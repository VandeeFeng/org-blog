#+title: Native Linux on Apple Silicon Mac
#+date: <2025-12-09 11:03>
#+description: æ•´ç†äº†ä¸€ä¸‹æˆ‘åœ¨ mac ä¸Šå®‰è£… Linux çš„è¿‡ç¨‹ï¼Œåˆ†äº«ç»™æƒ³å…¥å‘ Linux çš„è½»åº¦ç©å®¶ã€‚
#+filetags: Linux

* TL;DR
åœ¨å‡ ä¸ªæœˆä¹‹å‰åœ¨æˆ‘çš„ MacBook M1 Pro ä¸Šå®‰è£…äº† Linux (ä¸æ˜¯è™šæ‹Ÿæœº)ï¼Œå¤„ç†ç…§ç‰‡çš„æ—¶å€™åˆ‡æ¢åˆ° macOSï¼Œå¹³å¸¸å°± Linuxï¼Œä½¿ç”¨ä¸‹æ¥æŒºç¨³å®šçš„ã€‚

è¿™å‡ ä¸ªæœˆ windows æŒç»­çš„ä¸€äº›è´Ÿé¢æ–°é—»ï¼Œè®© Linux æœ‰ä¸€æ³¢å°çƒ­åº¦ã€‚æ•´ç†äº†ä¸€ä¸‹æˆ‘åœ¨ mac ä¸Šå®‰è£… Linux çš„è¿‡ç¨‹ï¼Œåˆ†äº«ç»™æƒ³å…¥å‘ Linux çš„è½»åº¦ç©å®¶ã€‚

å¤§ä½¬è¯·ç›´æ¥å…³é—­é¡µé¢ã€‚

* Why Linux
ä¹°è¿™ä¸ª MacBook çš„åˆè¡·ä¸»è¦æ˜¯å¤„ç†æ‘„å½±ç…§ç‰‡ï¼ŒM1 ç³»åˆ—å‡ºæ¥çš„æ—¶å€™ä¸€ç›´å‚æ¶å®ƒé¥é¥é¢†å…ˆçš„æ€§èƒ½ã€‚æ•´ä½“ä½¿ç”¨ä¸‹æ¥ Mac çš„ä½“éªŒä¹ŸæŒºèˆ’é€‚ï¼ŒMac åœ¨æ•°ç å½±åƒå¤„ç†è¿™ä¸ªç”Ÿæ€è¿˜æ˜¯åŠçš„ã€‚

ä½¿ç”¨ Mac çš„æ™®é€šç”¨æˆ·å¤§å¤šæ•°éƒ½æ˜¯å› ä¸ºç²¾è‡´è®¾è®¡æ„Ÿçš„ UIï¼Œè‹¹æœçš„å“ç‰Œæ•ˆåº”ï¼Œæˆ‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½†æ˜¯è¿™å‡ å¹´ Mac çš„å‘å±•å®åœ¨æ˜¯è®©æˆ‘å¾ˆæ²¡æœ‰æœŸå¾…ï¼Œä»Šå¹´æ›´æ˜¯å¤§ä¾¿ä¸€å¨ã€‚

è‹¹æœçš„å“ç‰Œæ•ˆåº” 90% æ¥è‡ªä¹”å¸®ä¸»çš„ä¸ªäººé­…åŠ›ï¼Œæˆ‘è§‰å¾—ä¸€ç‚¹ä¹Ÿä¸ä¸ºè¿‡ã€‚å¦‚ä»Šè‹¹æœçš„è€æœ¬å¿«è¢«åƒå®Œäº†ï¼Œåˆ›æ–°çš„ä¸œè¥¿æœ‰ï¼Œä½†æ˜¯çµé­‚æˆ‘è§‰å¾—æ—©å·²ä¸åœ¨ã€‚

ä¹‹å‰éƒ½æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šä½¿ç”¨ Linuxï¼Œæœ€åˆä¹Ÿæ²¡æœ‰æƒ³å®Œå…¨å…¥å‘ Linuxã€‚è½¬æŠ˜ç‚¹å°±æ˜¯ Linus çš„è‡ªä¼ ã€ŠJust For Funã€‹ï¼Œæˆ‘æœ‰å¤ªå¤šæƒ³æ³•å’Œ Linus ä¸è°‹è€Œåˆã€‚åœ¨è‹¹æœæ²¡æœ‰äº†ä¹”å¸ƒæ–¯çš„ä¸ªäººé­…åŠ›ä¹‹åï¼Œå®ƒèƒ½å¸å¼•æˆ‘çš„è¶Šæ¥è¶Šå°‘ï¼ŒLinux å¯¹æˆ‘çš„å¸å¼•è¶Šæ¥è¶Šå¤§ã€‚

å½“ä¸ªäººç”µè„‘ PC å¯¹æˆ‘æ¥è¯´ä¸å†åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªä¼™ä¼´çš„æ—¶å€™ï¼ŒLinux å°±æ˜¯ç°åœ¨æœ€é€‚åˆæˆ‘çš„æ“ä½œç³»ç»Ÿï¼Œ[[https://www.vandee.art/blog/2025-07-16-linux-is-awesome.html][Linux å¤ªè‡ªç”±äº†]] ã€‚

* Asahi Alarm

#+attr_html: :alt :class img :width 70% :height 70%
https://pic.vandee.art/images/2025-08-12_16-18.png

æœ€å¼€å§‹æˆ‘å°è¯•çš„æ˜¯ Asahi Linuxï¼ŒæŒ‰ç…§è¿™ä¸ªè§†é¢‘å¾ˆå¿«å°±æå®šäº†ï¼š [[https://www.youtube.com/watch?v=u_kcXg00R2g][ã€Œé»‘è²“ã€Asahi Linuxï¼M1 Mac åŸç”Ÿé‹è¡Œ Linux é›™ç³»çµ±ï¼Œç°¡å–®æµæš¢ï¼ - YouTube]]

Asahi Linux é¢„è£…çš„æ˜¯ Fedoraï¼Œåˆå§‹åŒ–å®‰è£…åˆ°è¿›å…¥å›¾å½¢ç•Œé¢éƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯å½“æˆ‘æ‰§è¡Œæ›´æ–°ï¼Œå®‰è£…äº†ä¸€äº›åŒ…ä¹‹åï¼Œå†é‡å¯ï¼Œæ€»æ˜¯ä¼šé‡åˆ°å„ç§ç³»ç»Ÿå´©æºƒé—®é¢˜ï¼Œå°è¯•äº†æ•°æ¬¡ä¹‹åï¼Œå°±æ²¡æœ‰å†æŠ˜è…¾äº†ã€‚

ä¹Ÿæ˜¯å·§äº†ï¼Œæ­£åœ¨æˆ‘å‘æ„çš„æ—¶å€™ï¼š[[https://omarchy.org/][Omarchy â€” Beautiful, Modern & Opinionated Linux by DHH]] å‡ºç°äº†ã€‚

Omarchy æ˜¯ Ruby çš„è”åˆåˆ›å§‹äºº DHH æ¨çš„ä¸€ä¸ªèƒ½åœ¨ Mac ä¸Šè¿è¡Œçš„ åŸºäº Arch Linux çš„ Linux å‘è¡Œç‰ˆã€‚

ä½†æ˜¯æˆ‘ä¸å¤ªå–œæ¬¢å®ƒé»˜è®¤çš„ä¸»é¢˜ï¼Œå’Œè¿‡å¤šçš„å¿«æ·é”®è®¾ç½®ï¼Œè¿˜æœ‰è®¸å¤šæˆ‘ä¸éœ€è¦çš„é¢„å®‰è£…ã€‚å°è¯•äº†å‡ å¤©ä¹‹åä¹Ÿå¦å®šäº†è¿™ä¸ªæ–¹æ¡ˆã€‚

ç„¶åå‘ç°å®è—ï¼š[[https://asahi-alarm.org/][Asahi Alarm]] , https://github.com/basecamp/omarchy/discussions/155

å®Œæˆåº¦ç›¸å½“é«˜å•Šï¼é™¤äº†è€—ç”µé‡ç•¥é«˜ä¸€ç‚¹ï¼Œå’ŒåŸç”Ÿåˆ†è¾¨ç‡ä¸å¤ªå…¼å®¹ï¼Œå…¶ä»–çš„ç›¸å½“å®Œç¾äº†ã€‚
** åˆå§‹åŒ–å®‰è£…
å®ƒå°±æ˜¯ä¸€ä¸ªè£¸çš„ Arch Linuxã€‚

åœ¨ mac ä¸Šæ‰“å¼€ terminalï¼Œè¿è¡Œ ~curl https://asahi-alarm.org/installer-bootstrap.sh | sh~ ï¼ŒåŸºæœ¬å°±å…¨è‡ªåŠ¨å®‰è£…äº†ï¼Œå…·ä½“çš„å®‰è£…è¿‡ç¨‹å’Œ  [[https://www.youtube.com/watch?v=u_kcXg00R2g][ã€Œé»‘è²“ã€Asahi Linuxï¼M1 Mac åŸç”Ÿé‹è¡Œ Linux é›™ç³»çµ±ï¼Œç°¡å–®æµæš¢ï¼ - YouTube]] æ˜¯ä¸€æ ·çš„ã€‚

éœ€è¦ç§‘å­¦ä¸Šç½‘ã€‚

å®‰è£…å®Œæˆä¹‹åï¼Œå°±å¯ä»¥è¿›å…¥åˆ° Asahi Alarm äº†ï¼Œè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œå¯ä»¥å‘½ä»¤è¡Œå®‰è£…ä¸€äº›åŸºç¡€çš„åŒ…ã€‚

Pacman æ˜¯ Arch Linux é»˜è®¤çš„åŒ…ç®¡ç†å™¨ ï¼Œ[[https://github.com/Morganamilo/paru][Morganamilo/paru]] æ˜¯ Rust ç‰ˆæœ¬çš„ yay AUR åŒ…ç®¡ç†å™¨ã€‚

** WM & DM
æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…æ˜¾ç¤ºå™¨åè®®ï¼ˆdisplay server protocolï¼‰å’Œ WMï¼ˆwindow managersï¼‰ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ [[https://wiki.archlinux.org/title/Wayland][Wayland]] + [[https://swaywm.org/][Sway]] ï¼Œæç®€å°±å®Œäº‹äº†ã€‚Hyprland ä¹Ÿå¾ˆä¸é”™ï¼Œä½†æ˜¯æˆ‘ç›®å‰å¯¹æŠ˜è…¾ Linux çš„ç•Œé¢æ²¡æœ‰å¤ªå¤§å…´è¶£ï¼Œä¹Ÿä¸éœ€è¦å®ƒå¤šç¾è§‚ã€‚

åˆ›å»ºå¥½ Linux ç”¨æˆ·ä¹‹å ~sudo pacman -S wayland sway~ å®‰è£…å°± OK äº†ã€‚

è¾“å…¥ sway å°±å¯ä»¥è¿›å…¥åˆ°å›¾å½¢ç•Œé¢äº†ã€‚æƒ³è‡ªåŠ¨è¿›å…¥å›¾å½¢ç•Œé¢ï¼ŒLinux é‡Œéœ€è¦å®‰è£… DMï¼ˆdisplay managersï¼‰

DM æˆ‘é€‰æ‹©çš„æ˜¯ [[https://github.com/coastalwhite/lemurs][Lemurs]] ä¹Ÿæ˜¯å› ä¸ºå®ƒè¶³å¤Ÿç®€å•ã€‚

** App launcher
[[https://codeberg.org/dnkl/fuzzel][dnkl/fuzzel]]

å› ä¸ºä¹‹å‰åœ¨ i3 é‡Œä½¿ç”¨ dmenuï¼Œfuzzel è¶³å¤Ÿç®€æ´ã€‚å’Œ sway çš„åŒ¹é…åº¦ä¹Ÿå¾ˆé«˜ã€‚

Vicinae ä¹ŸæŒºå¥½ç”¨ï¼Œå’Œ raycast æŒºåƒ: https://github.com/vicinaehq/vicinae/

** Theme
[[https://github.com/vinceliuice/Qogir-theme][vinceliuice/Qogir-theme: Qogir is a flat Design theme for GTK]]

- ç»Ÿä¸€ gtk å’Œ qt ä¸»é¢˜ï¼šsudo pacman -S --noconfirm lxappearance qt5ct qt6ct kvantum

- lxappearance æ¥é…ç½®ä¸»é¢˜ï¼Œå¯èƒ½éœ€è¦å®‰è£…ï¼šsudo pacman -S gtk-engine-murrine gnome-themes-extra gtk-engines
  theme æ–‡ä»¶å¯ä»¥åœ¨ ~/.themes/, æˆ–è€… /usr/share/themes

  wayland é‡Œç”¨ nwg-look

** Bluetooth && Wi-Fi
- impala: ğŸ›œ TUI for managing wifi on Linux
  https://github.com/pythops/impala

- bluetui: ğŸ›œ TUI for managing bluetooth on Linux
  https://github.com/pythops/bluetui
** Fcitx && Rime è¾“å…¥æ³•
å‚è€ƒï¼š[[https://manateelazycat.github.io/2025/08/31/fcitx-best-config/][Fcitx æœ€ä½³é…ç½®å®è·µ 2025-08-31]]

Rime + åŒæ‹¼å®åœ¨æ˜¯å¤ªå·´é€‚äº†ã€‚

Rime æ¨èä½¿ç”¨ï¼š[[https://github.com/rime/plum][rime/plum: æ±é¢¨ç ´ ]] å®‰è£…ã€‚

è¾“å…¥æ³•ï¼š[[https://github.com/iDvel/rime-ice][iDvel/rime-ice: Rime é…ç½®ï¼šé›¾å‡‡æ‹¼éŸ³ | é•¿æœŸç»´æŠ¤çš„ç®€ä½“è¯åº“]]
** Obs Studio
Asahi Alarm é‡Œï¼Œpacman æ²¡æœ‰ obs studio çš„ ARM ç‰ˆæœ¬ã€‚

å®‰è£… CMake è‡ªå·±æ‰‹åŠ¨ç¼–è¯‘:

ä¸‹è½½æºä»£ç ï¼š

~git clone --depth 1 https://github.com/obsproject/obs-studio.git~

æˆ‘åœ¨ç¼–è¯‘çš„æ—¶å€™æç¤ºç¼ºå°‘å¤´æ–‡ä»¶ï¼Œå› æ­¤:

~sudo pacman -S qt6-xcb-private-headers~

ç„¶åæˆåŠŸç¼–è¯‘ï¼š

~cmake -DCMAKE_INSTALL_PREFIX=/usr -DENABLE_BROWSER=OFF -DENABLE_VLC=ON -DENABLE_AJA=OFF..~

å¦‚æœ PipeWire é€‰é¡¹ç¼ºå¤±: wlrobs æ˜¯ä¸€ä¸ª OBS æ’ä»¶ï¼Œä¸“ä¸º Wayland æä¾›å±å¹•æ•è·æ”¯æŒï¼Œå°¤å…¶åœ¨ Hyprland æˆ– River ç­‰åˆæˆå™¨ä¸‹æœ‰æ•ˆã€‚paru -S wlrobs-hgã€‚

* Settings
å…¶ä»–çš„åˆå§‹åŒ–å®‰è£…ï¼Œæˆ‘è®© LLM å†™äº†ä¸€ä¸ªç®€å•çš„å°è„šæœ¬æ¥å®‰è£…ä¸€äº›æˆ‘éœ€è¦çš„è½¯ä»¶ï¼Œå­—ä½“ï¼Œrime è¾“å…¥æ³•ç­‰ã€‚

ä¸‹é¢åˆ—ä¸¾çš„æ˜¯ä¸€äº›å›°æ‰°è¿‡æˆ‘çš„åœ°æ–¹ï¼Œå…¶ä»–ç»†å°çš„è®¾ç½® Claude CLI åŸºæœ¬éƒ½å¯ä»¥è§£å†³ã€‚

** Sway
sway ä¼šåˆå§‹åŒ–ä¸€ä¸ªé…ç½®æ–‡ä»¶åœ¨ ~.config/sway/config~ ï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œä¿®æ”¹å°±å¥½äº†ã€‚

åˆ†è¾¨ç‡è®¾ç½®ï¼šå¦‚æœä¸æ”¾å¤§ï¼Œå­—å°±è·Ÿèš‚èšä¸€æ ·å°

Asahi Alarm ç”±äºè‹¹æœç¡¬ä»¶çš„é™åˆ¶ï¼Œåªèƒ½ç¼©æ”¾ï¼Œæ›´æ”¹ä¸äº†åˆ†è¾¨ç‡ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘æ²¡æœ‰æ‰¾å¯¹æ–¹æ³•ã€‚å¸¸è§„è®¾ç½®åˆ†è¾¨ç‡çš„æ–¹æ³•ä¸ç®¡ç”¨ã€‚

~exec --no-startup-id xrandr --output eDP-1 --scale 1.5x1.5~

æˆªå›¾:

ä½¿ç”¨ grim + swappy ,ç”±äºä¹‹å‰ç¼©æ”¾çš„åŸå› ï¼Œflameshot åœ¨æˆªå›¾çš„æ—¶å€™è°ƒç”¨ grim æˆªå›¾ä¹Ÿæ˜¯æ”¾å¤§çš„ï¼Œè€Œä¸”æœ‰å…¼å®¹æ€§é—®é¢˜ã€‚

~bindsym $mod+s exec --no-startup-id sh -c 'grim -g "$(slurp)" -s 1 - | swappy -f -'~

åŠ ä¸Šäº† -s 1 å‚æ•°ï¼Œå°±å¯ä»¥è§£å†³æˆªå›¾æ”¾å¤§çš„é—®é¢˜äº†ã€‚

OCR: éœ€è¦å®‰è£… [[https://github.com/tesseract-ocr/tesseract][tesseract-ocr/tesseract]] å¹¶ä¸‹è½½ç›¸åº”è¯­è¨€çš„åŒ…

~bindsym $mod+Shift+s exec --no-startup-id ~/MyScripts/screenshot_ocr.sh~

è¿™ä¸ªè„šæœ¬å°±æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„åˆ›å»º tmp æˆªå›¾æ–‡ä»¶ï¼Œç”¨ tesseract è¯†åˆ«ä¿å­˜åˆ°ç³»ç»Ÿå‰ªè´´æ¿ã€‚

è®¾ç½®ç³»ç»ŸéŸ³é‡ï¼šæˆ‘è€³æœµè¢«ç‚¸äº†å¥½å‡ æ¬¡ã€‚ã€‚ã€‚

~exec --no-startup-id pactl set-sink-volume \@DEFAULT_SINK@ 55%~

è®¾ç½®ç³»ç»Ÿæ˜¾ç¤ºå™¨äº®åº¦ï¼š

~exec --no-startup-id brightnessctl set 20%~

å’ŒéŸ³é‡ä¸€æ ·ï¼Œå¦‚æœä¸è®¾ç½®å®ƒä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œæ¯æ¬¡é‡å¯å°±éœ€è¦é‡æ–°è®¾ç½®ã€‚

è®¾ç½®å£çº¸ï¼š

~output * bg /home/vandee/Pictures/create.jpg fill~

å‰ªè´´æ¿ï¼š
~exec wl-paste --watch cliphist store~
** Others
- è°ƒæ•´å¯¹æ¯”åº¦

  ~sudo pacman -S xorg-xgamma~

  ~xgamma -gamma 0.8~
- è®¾ç½®å±å¹•äº®åº¦

  ~brightnessctl set 20%~
- è§£å†³ macbooks æ— æ³•æ’­æ”¾éŸ³é¢‘çš„é—®é¢˜ï¼š

  ~sudo pacman -S asahi-audio~
- opensnatch å› ä¸º eBPF æŠ¥é”™

  ä¿®æ”¹ ~/etc/opensnitchd/default-config.json~

  æŠŠ procmonitormethod æ›´æ”¹æˆ proc

- éŸ³é‡æ§åˆ¶ï¼šsudo pacman -S pavucontrol ï¼Œæ›´è½»é‡åŒ–çš„ï¼šsudo pacman -S volumeicon
