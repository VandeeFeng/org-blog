<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="ç°åœ¨ vibe è¿™ä¹ˆæ–¹ä¾¿äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åœ¨è¿™ä¸ªä¸Šé¢èŠ±è¿™ä¹ˆå¤šå¿ƒæ€ï¼Ÿæˆ‘è§‰å¾—ç”¨é”®ç›˜æ‰“å­— coding å’Œå¼¹å‰ä»–çš„æ„Ÿè§‰å¾ˆåƒã€‚åœ¨ Emacs é‡Œé…ç½®è¿™äº›é”®ä½å¯¹æˆ‘æ¥è¯´ï¼Œå°±åƒåœ¨è°ƒç´å¼¦ï¼Œè°ƒåˆæˆå™¨ä¸€æ ·ã€‚vibe æ›´å¤šçš„æ˜¯äº«å—ç»“æœï¼Œè€Œè¿™äº›åˆ™æ˜¯äº«å—è¿‡ç¨‹ã€‚">
<link rel="alternate"
      type="application/rss+xml"
      href="https://www.vandee.art/blog/rss.xml"
      title="RSS feed for https://www.vandee.art/blog/">
<title>æˆ‘çš„ Emacs é”®ä½è®¾ç½®</title>
<meta property="og:title" content="æˆ‘çš„ Emacs é”®ä½è®¾ç½®">
<meta property="og:type" content="article" />
<meta property="og:description" content="ç°åœ¨ vibe è¿™ä¹ˆæ–¹ä¾¿äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åœ¨è¿™ä¸ªä¸Šé¢èŠ±è¿™ä¹ˆå¤šå¿ƒæ€ï¼Ÿæˆ‘è§‰å¾—ç”¨é”®ç›˜æ‰“å­— coding å’Œå¼¹å‰ä»–çš„æ„Ÿè§‰å¾ˆåƒã€‚åœ¨ Emacs é‡Œé…ç½®è¿™äº›é”®ä½å¯¹æˆ‘æ¥è¯´ï¼Œå°±åƒåœ¨è°ƒç´å¼¦ï¼Œè°ƒåˆæˆå™¨ä¸€æ ·ã€‚vibe æ›´å¤šçš„æ˜¯äº«å—ç»“æœï¼Œè€Œè¿™äº›åˆ™æ˜¯äº«å—è¿‡ç¨‹ã€‚">
<meta property="og:url" content="https://www.vandee.art/blog/2025-12-01-my-emacs-keybindings.html">
<meta name="author" content="Vandee">
       <meta name="referrer" content="origin-when-cross-origin">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">

       <link rel="stylesheet" href="assets/css/blog-style.css" type="text/css"/>
       <link rel="stylesheet"
             href="https://testingcf.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css"/>
       <link rel="stylesheet"
             href="https://testingcf.jsdelivr.net/npm/@fancyapps/ui@4.0.12/dist/fancybox.css"/>
       <link rel="icon" type="image/x-icon" href="/favicon.ico"/>

       <script src="https://testingcf.jsdelivr.net/npm/@fancyapps/ui@4.0.12/dist/fancybox.umd.js" defer></script>
       <script src="https://testingcf.jsdelivr.net/npm/pangu@7.2.0/dist/browser/pangu.umd.js" defer></script>
       <script defer>
         document.addEventListener("DOMContentLoaded", () => {
           pangu.autoSpacingPage();
         });
       </script>

       <script src="assets/js/app.js" defer></script>
       <script src="assets/js/copyCode.js" defer></script>
       <script src="assets/js/shiba.js" defer></script>
       <script src="assets/js/search.js" defer></script></head>
<body>
<div id="preamble" class="status">
      <header>
      <h1><a href="https://www.vandee.art/blog/">Vandee's Blog</a></h1>
      <img class="shiba" width="100px" src="assets/shiba_gif/shiba_idle_8fps.gif">
      <nav>
      <a href="https://www.vandee.art/blog/">Home</a>
      <a href="https://x404.xyz/wiki">Wiki</a>
      <a href="https://x404.xyz/photo">Photo</a>
      <a href="projects.html">Projects</a>
      <a href="archive.html">Archive</a>
      <a href="tags.html">Tags</a>
      <div id="search-container">
        <input type="text" id="search-input" placeholder="e.g. Emacs PKM...">
        <i class="ri-search-line ri-xl"></i>
      </div>
      </nav>
      </header></div>
<div id="content">
<div class="post-date">01 Dec 2025</div><h1 class="post-title"><a href="https://www.vandee.art/blog/2025-12-01-my-emacs-keybindings.html">æˆ‘çš„ Emacs é”®ä½è®¾ç½®</a></h1>
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgae5bba8">TL;DR</a></li>
<li><a href="#org5b917f7">ç»„åˆå¿«æ·é”® VS åºåˆ—å¿«æ·é”®</a></li>
<li><a href="#orga2359d7">æˆ‘çš„é”®ä½è®¾ç½®</a>
<ul>
<li><a href="#orgf589b7e">General</a></li>
<li><a href="#org9471da3">mark &amp; move</a></li>
<li><a href="#org6b7c0a4">hydra &amp; general</a></li>
<li><a href="#orga2195f0">Misc</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<div id="outline-container-orgae5bba8" class="outline-2">
<h2 id="orgae5bba8">TL;DR</h2>
<div class="outline-text-2" id="text-orgae5bba8">
<p>
æˆ‘æ›´å–œæ¬¢åœ¨ Emacs é‡Œç¼–è¾‘æ–‡å­—å’Œä»£ç ï¼Œä½†æ˜¯æ›´ä¹ æƒ¯ vim çš„ç¼–è¾‘æ¨¡å¼å’Œè®¾è®¡ï¼ŒEmacs é‡ŒåŸç”Ÿçš„ Ctrl ç»„åˆé”®è®¾è®¡å¯¹äºé¢‘ç¹çš„ä»£ç ç¼–è¾‘æ¥è¯´ï¼Œæœ‰ç‚¹åäººç±»ã€‚
</p>
</div>
</div>
<div id="outline-container-org5b917f7" class="outline-2">
<h2 id="org5b917f7">ç»„åˆå¿«æ·é”® VS åºåˆ—å¿«æ·é”®</h2>
<div class="outline-text-2" id="text-org5b917f7">
<p>
ç»„åˆå¿«æ·é”®ä½ï¼šCtrl+Cï¼Œåºåˆ—å¿«æ·é”®ï¼šleader key + æŒ‰é”®ï¼ŒSpace -&gt; Cã€‚
</p>

<ul class="org-ul">
<li>ç»„åˆå¿«æ·é”®çš„ä¼˜åŠ¿: ç›¸åº”æ›´å¿«ï¼Œéœ€è¦æ‰§è¡Œé”®ä½æ“ä½œçš„ç»å¯¹æ¬¡æ•°æ›´å°‘ï¼ŒæŒ‰ä¸€æ¬¡ç»„åˆé”®è§†ä¸ºä¸€æ¬¡é”®ä½æ“ä½œã€‚</li>
<li>åºåˆ—å¿«æ·é”®çš„ä¼˜åŠ¿: é”®ä½çš„è®¾ç½®æ›´åŠ çµæ´»ï¼Œæ‰‹æŒ‡æ›´è½»æ¾ã€‚ä½†æ˜¯éœ€è¦æ‰§è¡Œçš„æŒ‰é”®æ“ä½œçš„ç»å¯¹æ¬¡æ•°æ›´å¤šï¼ŒåŒæ ·æŒ‰ä¸€æ¬¡æŒ‰é”®è§†ä¸ºä¾æ¬¡é”®ä½æ“ä½œã€‚</li>
</ul>

<p>
æˆ‘è®¤ä¸ºå®ƒä»¬å¯¹åº”ç€ä¸¤ç§æ€ç»´æ¨¡å¼:
</p>

<ul class="org-ul">
<li>ç»„åˆå¿«æ·é”®é‡Œçš„ Ctrlã€Altã€Shiftã€Command æ˜¯é™„åŠ é”®ï¼Œè¿™äº›ä¸åŒçš„é™„åŠ é”®ä½æ˜ å°„ä¸åŒçš„åŠŸèƒ½ã€‚åœ¨ window é‡Œï¼Œå’Œåº”ç”¨çª—å£ç›¸å…³çš„èœå•æ“ä½œé€šå¸¸æ˜¯ Altï¼Œå’Œç³»ç»Ÿç›¸å…³çš„é€šå¸¸æ˜¯ Winã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯å¸¸è§„æŒ‰é”®+åŠŸèƒ½çš„å åŠ ç»„åˆã€‚Mac é‡Œçš„ Option å’Œ Command åŒç†ã€‚</li>

<li>åºåˆ—å¿«æ·é”®åˆ™æ˜¯è®¾å®šä¸€ä¸ª leader key ä½œä¸ºåŠŸèƒ½çš„å…¥å£ï¼Œä¾‹å¦‚ Nvim é‡Œé€šå¸¸ Space ä½œä¸º leader keyï¼ŒSpace -&gt; fï¼Œè¡¨ç¤ºå’Œ file æ–‡ä»¶ç›¸å…³çš„ï¼ŒSpace -&gt; f -&gt; rï¼Œè¡¨ç¤ºæµè§ˆæœ€è¿‘çš„æ–‡ä»¶ recent filesã€‚å®ƒæ˜¯ä¸€ç§é€’è¿›çš„å±‚çº§è®¾è®¡ã€‚ä¸åŒçš„åŠŸèƒ½é€‰æ‹©ä¸åŒçš„ leader keyï¼Œvim é‡Œçš„ g ä¹Ÿå°±æ˜¯ä¸€ä¸ª leader keyã€‚</li>
</ul>

<p>
åœ¨ Emacs é‡Œï¼ŒC-x(Ctrl+x) æ˜¯å’Œ window çª—å£ç›¸å…³çš„å¿«æ·é”®ï¼Œè¿™ä¸ªç»„åˆé”®å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ª leader keyã€‚ç”±äº Emacs å’Œé€šå¸¸çš„æ–‡å­—ç¼–è¾‘å™¨é‡Œæ²¡æœ‰ vim çš„è¾“å…¥æ¨¡å¼çš„åŒºåˆ†ï¼Œéƒ½æ˜¯æŒ‰é”®ç›´æ¥è¾“å…¥æ–‡å­—ï¼Œå› æ­¤å¿…é¡»å¾—åŠ ä¸Š Ctrl è¿™ä¸ªåŠŸèƒ½é™„åŠ é”®é¿å…è¾“å…¥å­—ç¬¦ã€‚
</p>

<p>
Vim æœ‰ä¸‰ç§ç¼–è¾‘æ¨¡å¼ï¼šNormalï¼ŒVisualï¼ŒInsertã€‚normal å¯¹åº”å…‰æ ‡çš„ç§»åŠ¨ï¼Œvisual å¯¹åº”åŒºåŸŸé€‰å®šï¼Œinsert å¯¹åº”è¾“å…¥ã€‚æŒ‰ v è¿›å…¥ visualï¼Œiã€aã€sã€c éƒ½å¯ä»¥è¿›å…¥ insertï¼Œjk å¿«é€Ÿè¿æŒ‰åˆ™æ˜¯é€€å‡º insertã€‚jkhl åˆ†åˆ«å¯¹åº”å…‰æ ‡çš„ä¸‹ä¸Šå·¦å³ç§»åŠ¨ï¼Œå…¶ä»–çš„å°±ä¸å±•å¼€äº†ã€‚Vim è¿™å¥—è®¾è®¡é€»è¾‘å®ç°äº†ä¸ä¾èµ–é¼ æ ‡çš„å…¨é”®ç›˜æ–‡æœ¬ç¼–è¾‘å™¨é‡Œçš„å…‰æ ‡ç§»åŠ¨ï¼Œé¡µé¢æ»šåŠ¨ï¼Œå¿«é€Ÿæ›´æ”¹ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾ã€‚
</p>
</div>
</div>
<div id="outline-container-orga2359d7" class="outline-2">
<h2 id="orga2359d7">æˆ‘çš„é”®ä½è®¾ç½®</h2>
<div class="outline-text-2" id="text-orga2359d7">
<p>
ç°åœ¨ vibe è¿™ä¹ˆæ–¹ä¾¿äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åœ¨è¿™ä¸ªä¸Šé¢èŠ±è¿™ä¹ˆå¤šå¿ƒæ€ï¼Ÿæˆ‘è§‰å¾—ç”¨é”®ç›˜æ‰“å­— coding å’Œå¼¹å‰ä»–çš„æ„Ÿè§‰å¾ˆåƒã€‚åœ¨ Emacs é‡Œé…ç½®è¿™äº›é”®ä½å¯¹æˆ‘æ¥è¯´ï¼Œå°±åƒåœ¨è°ƒç´å¼¦ï¼Œè°ƒåˆæˆå™¨ä¸€æ ·ã€‚vibe æ›´å¤šçš„æ˜¯äº«å—ç»“æœï¼Œè€Œè¿™äº›åˆ™æ˜¯äº«å—è¿‡ç¨‹ã€‚
</p>

<p>
æŒ‰é”®çš„è®¾ç½®å’Œè®¾è®¡ï¼Œå¾€å¤§äº†è¯´ï¼Œè¿™äº›é”®ä½çš„æ˜ å°„ä¹Ÿæ˜¯ä¸ªäººçš„æ€ç»´å’Œé€»è¾‘ä¹ æƒ¯çš„æ˜ å°„ã€‚ç¼–ç¨‹æ˜¯ä¸€ç§è¡¨è¾¾çš„è‰ºæœ¯ï¼Œç±»æ¯”ç»˜ç”»ï¼Œé”®ä½çš„ç¼–è¾‘å™¨è®¾ç½®å°±æ˜¯ç”»ç¬”ç¬”è§¦çš„ä¸ªäººè‰ºæœ¯é£æ ¼ã€‚
</p>

<p>
å¯¹äºç¼–è¾‘ä»£ç çš„äººæ¥è¯´ï¼Œè¿™äº›å¿«æ·é”®è®¾ç½®å°±åƒä¸€ä¸ªæå½±åƒç¼–è¾‘çš„äººçš„ Photoshop çš„è‡ªå®šä¹‰åŠ¨ä½œä¸€æ ·ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„æ€ç»´ä¹ æƒ¯å’Œæ“ä½œä¹ æƒ¯ã€‚è®©ä¸€ä¸ªç¨‹åºå‘˜å¤±å»ç¼–ç¨‹èƒ½åŠ›åªéœ€è¦ä¸€æ­¥ï¼šæ¢æ‰ä»–çš„é”®ç›˜ï¼Œç„¶åé…ç½®å¦ä¸€ä¸ªäººçš„æŒ‰é”®é…ç½®ğŸ¤£ ã€‚
</p>

<p>
æ‰€ä»¥åé¢ä¹Ÿåªæ˜¯ç®€å•è¯´æ˜ä¸€äº›é…ç½®æŒ‰é”®ç”¨åˆ°çš„ Emacs åŒ…å’Œé”®ä½è®¾ç½®çš„æ€è·¯ã€‚
</p>

<p>
Why emacs not vim? åªæ˜¯å› ä¸ºæ›´ä¹ æƒ¯ Emacs äº†ï¼Œè¿™äº›åœ¨ vim å’Œ Nvim é‡ŒåŒæ ·å¯ä»¥ã€‚
</p>
</div>
<div id="outline-container-orgf589b7e" class="outline-3">
<h3 id="orgf589b7e">General</h3>
<div class="outline-text-3" id="text-orgf589b7e">
<p>
ç°åœ¨é…ç½®äº† m ä½œä¸º mark çš„ leader keyã€‚Emacs é‡Œçš„ mark ç›¸å½“äº vim é‡Œçš„ visual æ¨¡å¼ã€‚ä½†æ˜¯ Emacs é»˜è®¤çš„ mark é”®ä½æˆ‘å¾ˆä¸ä¹ æƒ¯ï¼Œvim é‡Œ visual æ¨¡å¼å¿«é€Ÿé€‰æ‹© symbolï¼Œwordï¼Œsentence ä¸­è‹±æ··åˆå†åŠ ä¸Šä»£ç åˆä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ã€‚æŠŠ m ç»‘å®šåœ¨äº† Emacs çš„ <code>mark-sexp</code> ä¸Šï¼Œç°åœ¨ mm å°±å¯ä»¥è¿ç»­ mark äº†ã€‚
</p>

<p>
Vim é»˜è®¤çš„ fï¼Œwï¼Œeï¼Œb å°èŒƒå›´ç§»åŠ¨ï¼Œviï¼Œva é€‰å®šå‡½æ•°å†…éƒ¨ç‰¹å®šçš„å†…å®¹ï¼Œgd è·³è½¬åˆ°å®šä¹‰ï¼Œ]] å‡½æ•°é—´è·³è½¬ï¼Œå†åŠ ä¸Šè‡ªå®šä¹‰çš„ m åºåˆ—æŒ‰é”®ï¼ŒEmacs é‡Œè‡ªå¸¦çš„ <code>forward-sexp</code> , <code>backward-sexp</code> ç­‰å‡½æ•°ï¼Œæ—¥å¸¸çš„ä»£ç çš„é€‰ä¸­ç§»åŠ¨åŸºæœ¬å¯ä»¥å…¨é”®ç›˜è¦†ç›–ã€‚
</p>

<p>
Vim æœ€æ ¸å¿ƒè®¾è®¡çš„å°±æ˜¯å®ƒçš„ä¸‰ä¸ªç¼–è¾‘æ¨¡å¼ï¼Œä¾¿åˆ©çš„ç§»åŠ¨å¯¼èˆªæ˜¯ vim çš„çµé­‚ï¼Œå¼Šç«¯å°±æ˜¯éœ€è¦é¢‘ç¹çš„åˆ‡æ¢æ¨¡å¼ã€‚Normal æ¨¡å¼ cï¼Œaï¼Œiï¼Œdï¼Œxï¼Œs æä¾›äº†éå¸¸å…¨é¢ã€ä¾¿æ·çš„å¢æ·»åˆ å‡æ–¹æ³•ï¼Œä½†æ˜¯ insert æ¨¡å¼ä¸‹å°±åªæ˜¯ insertï¼ˆå¯ä»¥ä¸´æ—¶æ‰§è¡Œä¸€æ¬¡ normal æŒ‡ä»¤ï¼‰ã€‚
</p>

<p>
åœ¨ vim é‡Œï¼Œå¿«é€Ÿåˆ é™¤å‰åçš„å†…å®¹å¯ä»¥ä½¿ç”¨ d åŠ ä¸Šæ–¹å‘å¯¼èˆªé”®ä½ï¼Œä¾‹å¦‚ dl,dw,db,deï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ c åœ¨åˆ é™¤ä¹‹åç›´æ¥è¿›å…¥ insertã€‚ä½†æ˜¯åœ¨ insert ä¹‹åå†æƒ³æ‰§è¡Œ d çš„å¿«æ·åˆ é™¤å°±å¾—é€€å‡º insert æ¨¡å¼ã€‚
</p>

<p>
æœ€æ¶å¿ƒçš„å°±æ˜¯åœ¨è¾“å‡ºå„ç§æˆå¯¹å‡ºç°çš„ <code>()</code> , <code>{}</code> , <code>""</code> çš„æ—¶å€™ï¼Œè¿™åååˆæ˜¯ä»£ç é‡Œé¢‘ç‡å¾ˆé«˜çš„ã€‚è¾“å…¥å®Œæ‹¬å·å†…çš„å†…å®¹ä¹‹åï¼Œç§»åŠ¨å…‰æ ‡åˆ°æ‹¬å·å¤–å†è¾“å…¥ï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨ vim é‡Œè¦å…ˆé€€å‡º insertï¼Œç§»åŠ¨å…‰æ ‡ï¼Œå†è¿›å…¥ insertï¼Œè€Œç»„åˆé”®åªéœ€è¦ä¸€æ¬¡ç§»åŠ¨å…‰æ ‡çš„æ“ä½œï¼ˆEmacs é‡Œæ˜¯ Ctrl+f,Ctrl+bã€‚ç®­å¤´æ–¹å‘é”®åœ¨ä¸€èˆ¬çš„é”®ç›˜é‡Œéƒ½å¤ªè¿œäº†ï¼‰ï¼Œè¿™ç§åœºæ™¯ä¸‹æˆ‘è§‰å¾—ç»„åˆé”®çš„ä¼˜åŠ¿æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œä¹Ÿæ›´ç¬¦åˆç›´è§‰ã€‚å½“ç„¶ä¹ æƒ¯äº†ä¹Ÿéƒ½å·®ä¸å¤šï¼Œå¤šä¸€æ¬¡ jk ä¹Ÿä¸éº»çƒ¦ï¼Œä½†æœ‰æ—¶å€™å°±æ˜¯è§‰å¾—æœ‰ç‚¹è†ˆåº”ã€‚
</p>

<p>
æƒ³è¿‡å…¶ä»–è®¸å¤šæ–¹å¼æ¥å‡å°‘ vim æ¨¡å¼åˆ‡æ¢çš„æ“ä½œï¼Œä½†æ˜¯å®é™…ä½“éªŒä¸‹æ¥è¿˜æ˜¯å¤šåˆ‡æ¢æ›´çœäº‹ã€‚ç§»åŠ¨çš„æ—¶å€™è¿˜æ˜¯é€€å›åˆ° normalï¼Œæå°‘æ•°æƒ…å†µä¸‹ä¹Ÿç”¨ Ctrl ç»„åˆé”®åœ¨ insert æ¨¡å¼ä¸‹ç§»åŠ¨å…‰æ ‡ã€‚å¤åˆ¶ç²˜è´´åˆ é™¤çš„æ“ä½œåŸåˆ™ä¸Šéƒ½åœ¨ normal æ¨¡å¼é‡Œè¿›è¡Œï¼Œm é”®ä½çš„è®¾ç½®ä¹Ÿæ˜¯åœ¨ normal æ¨¡å¼ä¸‹çš„ï¼Œæå°‘æ•°ç¼–è¾‘æ“ä½œï¼ˆå¿«é€Ÿåˆ é™¤åˆ°è¡Œå°¾ï¼Œå¿«é€Ÿåˆ é™¤å½“å‰å…‰æ ‡åˆ°å•è¯çš„æœ«å°¾ï¼Œå¿«é€Ÿåˆ é™¤å½“å‰å…‰æ ‡åˆ°å•è¯çš„å¼€å¤´ç­‰ï¼‰ä½¿ç”¨ Ctrl ç»„åˆé”®åœ¨ insert æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚
</p>

<p>
å› æ­¤åœ¨ Emacs é‡Œè¡¥è¶³ insert æ¨¡å¼å°±å¥½äº†ã€‚
</p>

<p>
é™¤å» vim æ¨¡å¼å’Œ Emacs æœ¬èº«å ç”¨çš„é”®ä½ï¼Œå¯ä»¥è‡ªå®šä¹‰çš„å…¶å®ä¸å¤šï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒåˆé€‚çš„æ˜¯ <code>m</code> , <code>r</code> , <code>,</code> , <code>.</code> , <code>/</code> , <code>;</code> , <code>'</code> , <code>[</code> , <code>]</code>
</p>

<p>
å®ƒä»¬æ—¢å¯ä»¥ä½œä¸º leader key ï¼Œè¿˜å¯ä»¥å’Œ Ctrl ç­‰é™„åŠ é”®ä½œä¸ºç»„åˆé”®ã€‚Emacs å’Œ vim é‡Œå®ƒä»¬éƒ½æ²¡æœ‰ç»‘å®šå¾ˆæ ¸å¿ƒçš„åŠŸèƒ½æˆ–æ˜¯ç©ºç¼ºçš„è®¾ç½®ã€‚
</p>

<p>
åœ¨ Emacs çš„å¿«æ·é”®è®¾ç½®é‡Œ Ctrl è®°ä½œ Cï¼ŒAlt å’Œ Option è®°ä½œ Mï¼ŒShift è®°ä½œ Sï¼ŒWin å’Œ Command è®°ä½œ s(super é”®)ï¼Œç»„åˆé”®ç”¨ <code>-</code> é“¾æ¥èµ·æ¥ï¼Œctrl+c è®°ä½œ <code>C-c</code> ã€‚Emacs å¯ä»¥è‡ªå®šä¹‰ minor modeï¼Œç”¨ hook åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€é‡Œæ¿€æ´»ä¸åŒçš„è‡ªå®šä¹‰ minor modeï¼Œå„è‡ªçš„ mode map åˆå¯ä»¥è®¾ç½®ä¸åŒçš„å¿«æ·é”®ï¼Œç›¸åŒçš„å¿«æ·é”®å°±å¯ä»¥å®ç°ä¸åŒçš„åŠŸèƒ½äº†ã€‚
</p>

<p>
åœ¨è¿™å‡ å¹´çš„ä½¿ç”¨ä¸­ï¼Œé€æ¸å½¢æˆäº†ä¸‹é¢çš„è¿™äº›æŒ‰é”®é…ç½®å’Œä¹ æƒ¯ã€‚Evil é‡Œæœ‰è®¸å¤šå®Œå…¨ä¸å¸¸ç”¨çš„åŠŸèƒ½ä¼šå ç”¨å¿«æ·é”®çš„é”®ä½ï¼Œè®¸å¤šé»˜è®¤é”®ä½å’ŒåŸç”Ÿçš„ vim ä¹Ÿä¸ç›¸åŒï¼Œæ‰€ä»¥èƒ½å–æ¶ˆçš„éƒ½å–æ¶ˆäº†ï¼Œåœ¨å‡½æ•°çš„é€‰æ‹©ä¸Šä¹Ÿå°½é‡ä½¿ç”¨ Emacs åŸç”Ÿçš„å‡½æ•°ï¼ŒEmacs æœ‰çš„å°±ä¸ç”¨ evil çš„äº†ã€‚
</p>

<p>
æ„Ÿè§‰è¿™äº›å¿«æ·é”®çš„è®¾ç½®ä¸Šè¿˜æ˜¯æ¯”è¾ƒç¬¦åˆç›´è§‰çš„ã€‚
</p>

<p>
ä¸‹é¢æ˜¯ä¸€äº›å…·ä½“çš„é…ç½®ç‰‡æ®µå’Œå¸¸ç”¨çš„è‡ªå®šä¹‰åŠŸèƒ½:
</p>
</div>
</div>
<div id="outline-container-org9471da3" class="outline-3">
<h3 id="org9471da3">mark &amp; move</h3>
<div class="outline-text-3" id="text-org9471da3">
<p>
ä¸‹é¢çš„é…ç½®åŒ…å«äº†è®¾å®š mark æ–¹ä¾¿åœ¨ä»£ç ç¼–è¾‘é‡Œæ¥å›è·³è½¬ï¼Œdefunï¼Œsymbolï¼Œword çš„å¿«é€Ÿå¤åˆ¶å‰ªåˆ‡ã€‚
</p>

<p>
å¯¹æ¯” vio é€‰ä¸­ symbol -&gt; y å¤åˆ¶ï¼Œms åªéœ€è¦æŒ‰ä¸¤æ¬¡ã€‚å°‘ä¸€æ¬¡æŒ‰é”®åœ¨å¤æ‚åº¦ä¸Šå°±å°‘äº†ä¸€ä¸ªå±‚çº§ã€‚
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #787878;">;; </span><span style="color: #787878;">https://github.com/VandeeFeng/emacs.d/blob/archlinux/lisp/init-editing-utils.el
</span><span style="color: #787878;">;; </span><span style="color: #787878;">Mark &amp; edit
</span><span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #A1D08E;">"M-m"</span><span style="color: #93a8c6;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">set-mark-command</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">with-eval-after-load</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">evil</span>
  <span style="color: #93a8c6;">(</span>define-prefix-command <span style="color: #FFA657;">'</span><span style="color: #95a99f;">my/mark-map</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>define-key evil-normal-state-map <span style="color: #b0b1a3;">(</span>kbd <span style="color: #A1D08E;">"m"</span><span style="color: #b0b1a3;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">my/mark-map</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>define-key evil-motion-state-map <span style="color: #b0b1a3;">(</span>kbd <span style="color: #A1D08E;">";"</span><span style="color: #b0b1a3;">)</span> nil<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">evil-define-key</span> <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>normal visual<span style="color: #b0b1a3;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">global</span>
    <span style="color: #A1D08E;">"gc"</span> <span style="color: #FFA657;">#'</span><span style="color: #95a99f;">comment-dwim</span><span style="color: #93a8c6;">)</span>

  <span style="color: #787878;">;; </span><span style="color: #787878;">this keybindings only use not in insert mode
</span>  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">dolist</span> <span style="color: #b0b1a3;">(</span>binding <span style="color: #FFA657;">'</span><span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"m"</span> . mark-sexp<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"p"</span> . set-pin-mark<span style="color: #aebed8;">)</span> <span style="color: #787878;">; </span><span style="color: #787878;">&#36825;&#26159;&#33258;&#24049;&#23454;&#29616;&#30340; init-mark.el
</span>                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"g"</span> . goto-pin-mark<span style="color: #aebed8;">)</span> <span style="color: #787878;">; </span><span style="color: #787878;">&#31616;&#21270;&#29256;&#30340; bookmark
</span>                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"d"</span> . mark-defun<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">";"</span> . comment-indent<span style="color: #aebed8;">)</span>
                     <span style="color: #787878;">;; </span><span style="color: #787878;">(";" . comment-dwim) ; use gc instead
</span>                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"k"</span> . move-dup-move-lines-up<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"j"</span> . move-dup-move-lines-down<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"u"</span> . upcase-dwim<span style="color: #aebed8;">)</span> <span style="color: #787878;">; </span><span style="color: #787878;">equal to g U in vim
</span>                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"s"</span> . thing-copy-symbol<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"S"</span> . thing-cut-symbol<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"w"</span> . thing-copy-word<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"W"</span> . thing-cut-word<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"-"</span> . thing-copy-to-line-end<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"_"</span> . thing-cut-to-line-end<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"0"</span> . thing-copy-to-line-beginning<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">")"</span> . thing-cut-to-line-beginning<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>define-key my/mark-map <span style="color: #97b098;">(</span>kbd <span style="color: #aebed8;">(</span>car binding<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>cdr binding<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">with-eval-after-load</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">evil</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">normal, visual, insert
</span>  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">dolist</span> <span style="color: #b0b1a3;">(</span>binding <span style="color: #FFA657;">'</span><span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-s"</span> . backward-kill-sexp<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-S-s"</span> . kill-back-to-indentation<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-d"</span> . kill-sexp<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-k"</span> . kill-visual-line<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-y"</span> . clipboard-yank<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-a"</span> . beginning-of-line<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-e"</span> . end-of-line<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-b"</span> . backward-char<span style="color: #aebed8;">)</span> <span style="color: #787878;">;; </span><span style="color: #787878;">&#35206;&#30422; evil &#30340;&#38190;&#20301;&#65292;&#22238;&#24402; Emacs &#40664;&#35748;&#38190;&#20301;
</span>                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-f"</span> . forward-char<span style="color: #aebed8;">)</span> <span style="color: #787878;">;; </span><span style="color: #787878;">&#35206;&#30422; evil &#30340;&#38190;&#20301;&#65292;&#22238;&#24402; Emacs &#40664;&#35748;&#38190;&#20301;
</span>                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-n"</span> . next-line<span style="color: #aebed8;">)</span> <span style="color: #787878;">;; </span><span style="color: #787878;">&#35206;&#30422; evil &#30340;&#38190;&#20301;&#65292;&#22238;&#24402; Emacs &#40664;&#35748;&#38190;&#20301;
</span>                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"C-p"</span> . previous-line<span style="color: #aebed8;">)</span> <span style="color: #787878;">;; </span><span style="color: #787878;">&#35206;&#30422; evil &#30340;&#38190;&#20301;&#65292;&#22238;&#24402; Emacs &#40664;&#35748;&#38190;&#20301;
</span>                     <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">dolist</span> <span style="color: #97b098;">(</span>state <span style="color: #FFA657;">'</span><span style="color: #aebed8;">(</span>normal visual insert<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>evil-global-set-key state <span style="color: #aebed8;">(</span>kbd <span style="color: #b0b0b3;">(</span>car binding<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span>cdr binding<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #787878;">;; </span><span style="color: #787878;">;; visual, insert
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">(dolist (binding '(("C-h" . backward-char)
</span>  <span style="color: #787878;">;;                    </span><span style="color: #787878;">("C-l" . forward-char)
</span>  <span style="color: #787878;">;;                    </span><span style="color: #787878;">("C-j" . next-line)
</span>  <span style="color: #787878;">;;                    </span><span style="color: #787878;">("C-k" . previous-line)))
</span>  <span style="color: #787878;">;;   </span><span style="color: #787878;">(dolist (state '(visual insert))
</span>  <span style="color: #787878;">;;     </span><span style="color: #787878;">(evil-global-set-key state (kbd (car binding)) (cdr binding))))
</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">normal visual
</span>  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">dolist</span> <span style="color: #b0b1a3;">(</span>binding <span style="color: #FFA657;">'</span><span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"-"</span> . end-of-line<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">","</span> . backward-sexp<span style="color: #aebed8;">)</span>
                     <span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"."</span> . forward-sexp<span style="color: #aebed8;">)</span>
                     <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">dolist</span> <span style="color: #97b098;">(</span>state <span style="color: #FFA657;">'</span><span style="color: #aebed8;">(</span>normal visual<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>evil-global-set-key state <span style="color: #aebed8;">(</span>kbd <span style="color: #b0b0b3;">(</span>car binding<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span>cdr binding<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span>define-key evil-motion-state-map <span style="color: #b0b1a3;">(</span>kbd <span style="color: #A1D08E;">"C-v"</span><span style="color: #b0b1a3;">)</span> nil<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>global-unset-key <span style="color: #b0b1a3;">(</span>kbd <span style="color: #A1D08E;">"C-v"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>global-set-key <span style="color: #b0b1a3;">(</span>kbd <span style="color: #A1D08E;">"S-&lt;backspace&gt;"</span><span style="color: #b0b1a3;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">delete-char</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6b7c0a4" class="outline-3">
<h3 id="org6b7c0a4">hydra &amp; general</h3>
<div class="outline-text-3" id="text-org6b7c0a4">
<p>
ç”±äºæˆ‘ä½¿ç”¨ evilï¼Œè®¾ç½® leader key è¿˜æ˜¯ç”¨çš„ generalï¼Œä½†æ˜¯æœ€è¿‘æŠŠæŒ‰é”®çš„è®¾ç½®è½¬åˆ°äº† hydraï¼Œå› ä¸ºå®ƒå¯ä»¥æ ¹æ®ä¸åŒçš„ Emacs çš„ major mode æ˜¾ç¤ºä¸åŒçš„ hydra key bodyã€‚åŒæ ·ä¸€ä¸ªè§¦å‘é”®ï¼Œåœ¨ org mode é‡Œå¯ä»¥æ˜¾ç¤º org çš„å¿«æ·é”®è®¾ç½®ï¼Œåœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ mode é‡Œå¯ä»¥ä¸“é—¨çš„å¿«æ·é”®ã€‚
</p>

<p>
æˆ‘æœ‰æ—¶å€™ä¹Ÿç”¨ Nvimï¼Œæ‰€ä»¥è¿˜æ˜¯ç”¨ SPC ä½œä¸º leader keyï¼š
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #787878;">;; </span><span style="color: #787878;">https://github.com/VandeeFeng/emacs.d/blob/archlinux/lisp/init-hydra.el
</span><span style="color: #787878;">;; </span><span style="color: #787878;">general &#35774;&#32622; leader key SPC
</span><span style="color: #8c8c8c;">(</span>general-define-key
 <span style="color: #79C0FF;">:states</span> <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span>normal motion visual<span style="color: #93a8c6;">)</span>
 <span style="color: #79C0FF;">:keymaps</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">override</span>
 <span style="color: #79C0FF;">:prefix</span> <span style="color: #A1D08E;">"SPC"</span>
 <span style="color: #A1D08E;">""</span> <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span>hydra-leader/body <span style="color: #79C0FF;">:wk</span> <span style="color: #A1D08E;">"hydra leader"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">&#19981;&#21516;&#27169;&#24335;&#30340;&#24120;&#29992;&#24555;&#25463;&#38190;&#35774;&#32622;
</span><span style="color: #787878;">;; </span><span style="color: #787878;">Mode-specific hydra bindings
</span><span style="color: #8c8c8c;">(</span>define-key evil-normal-state-map <span style="color: #93a8c6;">(</span>kbd <span style="color: #A1D08E;">"C-."</span><span style="color: #93a8c6;">)</span> nil<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">hydra-mode-setup</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #787878;">"Setup hydra bindings for specific modes."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">cond</span>
   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>eq major-mode <span style="color: #FFA657;">'</span><span style="color: #95a99f;">dired-mode</span><span style="color: #97b098;">)</span>
    <span style="color: #97b098;">(</span>local-set-key <span style="color: #aebed8;">(</span>kbd <span style="color: #A1D08E;">"C-."</span><span style="color: #aebed8;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-dired/body</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>

   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>eq major-mode <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-mode</span><span style="color: #97b098;">)</span>
    <span style="color: #97b098;">(</span>local-set-key <span style="color: #aebed8;">(</span>kbd <span style="color: #A1D08E;">"C-."</span><span style="color: #aebed8;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-org/body</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>

   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>eq major-mode <span style="color: #FFA657;">'</span><span style="color: #95a99f;">magit-status-mode</span><span style="color: #97b098;">)</span>
    <span style="color: #97b098;">(</span>local-set-key <span style="color: #aebed8;">(</span>kbd <span style="color: #A1D08E;">"C-."</span><span style="color: #aebed8;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-magit/body</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>

   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>derived-mode-p <span style="color: #FFA657;">'</span><span style="color: #95a99f;">prog-mode</span><span style="color: #97b098;">)</span>
    <span style="color: #97b098;">(</span>local-set-key <span style="color: #aebed8;">(</span>kbd <span style="color: #A1D08E;">"C-."</span><span style="color: #aebed8;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-code/body</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">Add mode-specific setup to hooks
</span><span style="color: #8c8c8c;">(</span>add-hook <span style="color: #FFA657;">'</span><span style="color: #95a99f;">dired-mode-hook</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-mode-setup</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>add-hook <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-mode-hook</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-mode-setup</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>add-hook <span style="color: #FFA657;">'</span><span style="color: #95a99f;">magit-status-mode-hook</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-mode-setup</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>add-hook <span style="color: #FFA657;">'</span><span style="color: #95a99f;">prog-mode-hook</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">hydra-mode-setup</span><span style="color: #8c8c8c;">)</span>

</pre>
</div>
</div>
</div>
<div id="outline-container-orga2195f0" class="outline-3">
<h3 id="orga2195f0">Misc</h3>
<div class="outline-text-3" id="text-orga2195f0">
<p>
å…¶ä»–è‡ªå®šä¹‰å‡½æ•°åœ¨ï¼š<a href="https://github.com/VandeeFeng/emacs.d/blob/archlinux/lisp/init-custom-functions.el">https://github.com/VandeeFeng/emacs.d/blob/archlinux/lisp/init-custom-functions.el</a>
</p>

<p>
jk é€€å‡º insertï¼š
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #787878;">;; </span><span style="color: #787878;">jk &#36864;&#20986; insert
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">with-eval-after-load</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">evil</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">use-package</span> key-chord
    <span style="color: #79C0FF;">:ensure</span> t
    <span style="color: #79C0FF;">:config</span>
    <span style="color: #b0b1a3;">(</span>key-chord-mode 1<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">setq</span> key-chord-two-keys-delay 0.3<span style="color: #b0b1a3;">)</span> <span style="color: #787878;">;; </span><span style="color: #787878;">&#29256;&#26412;&#26356;&#26032;&#20043;&#21518;&#65292;&#40664;&#35748;j k &#30340;&#21028;&#26029;&#26102;&#38388;&#21464;&#23569;&#20102;
</span>    <span style="color: #b0b1a3;">(</span>key-chord-define evil-insert-state-map <span style="color: #A1D08E;">"jk"</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">evil-normal-state</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
compile grep searchï¼š
</p>

<p>
è¿™æ˜¯æˆ‘ç”¨çš„æœ€å¤šçš„ä¸€ä¸ªæœç´¢ã€‚å¯ä»¥ç”¨ grep æœç´¢å½“å‰æ–‡ä»¶ç›®å½•ä¸‹å…³é”®å­—ã€‚ç”¨ Emacs é‡Œçš„ compile æ¨¡å¼çš„å¥½å¤„æ˜¯ï¼Œå®ƒä¼šåœ¨æœç´¢ç»“æœçš„ minibuffer é‡Œæ˜¾ç¤ºå¯¹åº”çš„æ–‡ä»¶çš„è·³è½¬é“¾æ¥ï¼Œç›´æ¥ç‚¹å‡»å°±è·³è½¬äº†ã€‚
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #787878;">;; </span><span style="color: #787878;">compile grep
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my/compile-grep-rn</span> <span style="color: #93a8c6;">(</span>pattern<span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">"Run `grep -irn` with the given PATTERN in the current directory."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">interactive</span> <span style="color: #A1D08E;">"sGrep pattern: "</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>compile <span style="color: #b0b1a3;">(</span>format <span style="color: #A1D08E;">"grep -irn '</span><span style="color: #95a99f;">%s</span><span style="color: #A1D08E;">' ."</span> pattern<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>


<p>
org-backlink:
</p>

<p>
åŒæ ·ä¹Ÿæ˜¯ç”¨ grep æœç´¢å½“å‰ org ç¬”è®°çš„åé“¾
</p>

<div class="org-src-container">
<pre class="src src-elisp">
<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my/org-backlink</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #787878;">"Find all org files in the current directory that link to the current file.
The search is performed using `rgrep` for the specific pattern
'filename.org][filename]]'."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">unless</span> buffer-file-name
    <span style="color: #b0b1a3;">(</span><span style="color: #f43841;">error</span> <span style="color: #A1D08E;">"Current buffer is not visiting a file"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">let*</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>current-file <span style="color: #aebed8;">(</span>file-name-nondirectory buffer-file-name<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>current-dir <span style="color: #aebed8;">(</span>file-name-directory buffer-file-name<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>file-basename <span style="color: #aebed8;">(</span>file-name-sans-extension current-file<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #787878;">;; </span><span style="color: #787878;">Search for the literal string "filename.org][filename]]"
</span>         <span style="color: #97b098;">(</span>search-pattern <span style="color: #aebed8;">(</span>concat <span style="color: #b0b0b3;">(</span>regexp-quote current-file<span style="color: #b0b0b3;">)</span>
                                 <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">]</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">["</span>
                                 <span style="color: #b0b0b3;">(</span>regexp-quote file-basename<span style="color: #b0b0b3;">)</span>
                                 <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">]</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">]"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>rgrep search-pattern <span style="color: #A1D08E;">"*.org"</span> current-dir<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
simple claude:
</p>

<p>
ä½¿ç”¨ shellï¼Œå¿«é€Ÿè¿è¡Œ Claude Code æ‰§è¡Œ <code>claude -p</code> æŒ‡ä»¤å›ç­”ä¸€äº›ç®€å•çš„é—®é¢˜ï¼ŒæŠŠç»“æœè¾“å‡ºåˆ°å•ç‹¬çš„ bufferã€‚æœ‰æ—¶å€™ä¸æƒ³ç”¨ gptel å°±ç”¨è¿™ä¸ªã€‚å¯ä»¥æ›¿æ¢æˆ Gemini å’Œ Codexã€‚
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #787878;">;; </span><span style="color: #787878;">simple claude code shell command
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my/claude-shell-command</span> <span style="color: #93a8c6;">(</span>prompt<span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">"Execute claude command asynchronously and display the output."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">interactive</span> <span style="color: #A1D08E;">"sClaude prompt: "</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">let*</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>output-buffer-name <span style="color: #A1D08E;">"*Claude Output*"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>output-buffer <span style="color: #aebed8;">(</span>get-buffer-create output-buffer-name<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>shell-program <span style="color: #aebed8;">(</span><span style="color: #FFA657;">or</span> <span style="color: #b0b0b3;">(</span>getenv <span style="color: #A1D08E;">"SHELL"</span><span style="color: #b0b0b3;">)</span> shell-file-name<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #787878;">;; </span><span style="color: #787878;">Use shell-quote-argument
</span>         <span style="color: #97b098;">(</span>command-str <span style="color: #aebed8;">(</span>format <span style="color: #A1D08E;">"claude -p %s"</span> <span style="color: #b0b0b3;">(</span>shell-quote-argument prompt<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">with-current-buffer</span> output-buffer
      <span style="color: #97b098;">(</span><span style="color: #FFA657;">setq</span> buffer-read-only nil<span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>erase-buffer<span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FFA657;">setq-local</span> header-line-format <span style="color: #aebed8;">(</span>format <span style="color: #A1D08E;">"Claude Output for prompt: %s"</span> prompt<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #787878;">;; </span><span style="color: #787878;">(display-buffer output-buffer) ; Show the buffer immediately
</span>    <span style="color: #b0b1a3;">(</span>message <span style="color: #A1D08E;">"Claude command running asynchronously..."</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #787878;">;; </span><span style="color: #787878;">Start the async process
</span>    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">let</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>process <span style="color: #b0b0b3;">(</span>start-process <span style="color: #A1D08E;">"claude-process"</span>
                                  output-buffer-name
                                  shell-program
                                  <span style="color: #A1D08E;">"-lc"</span>
                                  command-str<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #787878;">;; </span><span style="color: #787878;">Set a function to be called when the process finishes
</span>      <span style="color: #97b098;">(</span>set-process-sentinel process <span style="color: #FFA657;">#'</span><span style="color: #95a99f;">my/claude-process-sentinel</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my/claude-process-sentinel</span> <span style="color: #93a8c6;">(</span>process _event<span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">"Sentinel for the claude async process. Handles success and error cases."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">when</span> <span style="color: #b0b1a3;">(</span>memq <span style="color: #97b098;">(</span>process-status process<span style="color: #97b098;">)</span> <span style="color: #FFA657;">'</span><span style="color: #97b098;">(</span>exit signal<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">let*</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>buffer <span style="color: #b0b0b3;">(</span>process-buffer process<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
           <span style="color: #aebed8;">(</span>exit-code <span style="color: #b0b0b3;">(</span>process-exit-status process<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FFA657;">cond</span>
       <span style="color: #787878;">;; </span><span style="color: #787878;">Case 1: Process failed (non-zero exit code)
</span>       <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>/= exit-code 0<span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span>kill-buffer buffer<span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span><span style="color: #FFA657;">if</span> <span style="color: #90a890;">(</span>= exit-code 127<span style="color: #90a890;">)</span>
            <span style="color: #90a890;">(</span>message <span style="color: #A1D08E;">"Error: '</span><span style="color: #95a99f;">claude</span><span style="color: #A1D08E;">' command not found. Please ensure it's in your shell's PATH."</span><span style="color: #90a890;">)</span>
          <span style="color: #90a890;">(</span>message <span style="color: #A1D08E;">"Error: Claude command failed with exit code %d."</span> exit-code<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>

       <span style="color: #787878;">;; </span><span style="color: #787878;">Case 2: Process succeeded but produced no output
</span>       <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>zerop <span style="color: #90a890;">(</span><span style="color: #FFA657;">with-current-buffer</span> buffer <span style="color: #a2b6da;">(</span>buffer-size<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span>kill-buffer buffer<span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span>message <span style="color: #A1D08E;">"Claude command finished with no output."</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>

       <span style="color: #787878;">;; </span><span style="color: #787878;">Case 3: Success
</span>       <span style="color: #aebed8;">(</span>t
        <span style="color: #b0b0b3;">(</span><span style="color: #FFA657;">with-current-buffer</span> buffer
          <span style="color: #90a890;">(</span><span style="color: #FFA657;">setq</span> buffer-read-only t<span style="color: #90a890;">)</span>
          <span style="color: #90a890;">(</span>goto-char <span style="color: #a2b6da;">(</span>point-min<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span>display-buffer buffer<span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span>message <span style="color: #A1D08E;">"Claude command finished."</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

</pre>
</div>
</div>
</div>
</div>
<div class="taglist"><a href="https://www.vandee.art/blog/tags.html">Tags</a>: <a href="https://www.vandee.art/blog/tag-emacs.html">Emacs</a> </div></div>
<div id="postamble" class="status"><div id="search-results"></div>
      <footer>
         <p>
            Â© 2022-<script>document.write(new Date().getFullYear())</script> Vandee. All rights reserved.
         </p>
        <div class="social-links"></div>
      </footer>

      <a href="#top" aria-label="go to top" title="Go to Top (Alt + G)"
         class="top-link" id="top-link" accesskey="g">
         <i class="ri-arrow-up-double-line ri-3x"></i>
      </a>

      <script>
        var mybutton = document.getElementById('top-link');
        window.onscroll = function () {
            if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
                mybutton.style.visibility = 'visible';
                mybutton.style.opacity = '1';
            } else {
                mybutton.style.visibility = 'hidden';
                mybutton.style.opacity = '0';
            }
        };
      </script></div>
</body>
</html>
