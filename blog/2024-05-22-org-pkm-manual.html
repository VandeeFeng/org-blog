<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="一个基于Emacs，org-mode的PKM构建手册">
<link rel="alternate"
      type="application/rss+xml"
      href="https://www.vandee.art/blog/rss.xml"
      title="RSS feed for https://www.vandee.art/blog/">
<title>PKM（个人知识管理）构建手册 - Emacs</title>
<meta property="og:title" content="PKM（个人知识管理）构建手册 - Emacs">
<meta property="og:type" content="article" />
<meta property="og:description" content="一个基于Emacs，org-mode的PKM构建手册">
<meta property="og:url" content="https://www.vandee.art/blog/2024-05-22-org-pkm-manual.html">
<meta name="author" content="Vandee">
       <meta name="referrer" content="origin-when-cross-origin">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">

       <link rel="stylesheet" href="assets/css/blog-style.css" type="text/css"/>
       <link rel="stylesheet"
             href="https://testingcf.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css"/>
       <link rel="stylesheet"
             href="https://testingcf.jsdelivr.net/npm/@fancyapps/ui@4.0.12/dist/fancybox.css"/>
       <link rel="icon" type="image/x-icon" href="/favicon.ico"/>

       <script src="https://testingcf.jsdelivr.net/npm/@fancyapps/ui@4.0.12/dist/fancybox.umd.js" defer></script>
       <script src="https://testingcf.jsdelivr.net/npm/pangu@7.2.0/dist/browser/pangu.umd.js" defer></script>
       <script defer>
         document.addEventListener("DOMContentLoaded", () => {
           pangu.autoSpacingPage();
         });
       </script>

       <script src="assets/js/app.js" defer></script>
       <script src="assets/js/copyCode.js" defer></script>
       <script src="assets/js/shiba.js" defer></script>
       <script src="assets/js/search.js" defer></script></head>
<body>
<div id="preamble" class="status">
      <header>
      <h1><a href="https://www.vandee.art/blog/">Vandee's Blog</a></h1>
      <img class="shiba" width="100px" src="assets/shiba_gif/shiba_idle_8fps.gif">
      <nav>
      <a href="https://www.vandee.art/blog/">Home</a>
      <a href="https://x404.xyz/wiki">Wiki</a>
      <a href="https://x404.xyz/photo">Photo</a>
      <a href="projects.html">Projects</a>
      <a href="archive.html">Archive</a>
      <a href="tags.html">Tags</a>
      <div id="search-container">
        <input type="text" id="search-input" placeholder="e.g. Emacs PKM...">
        <i class="ri-search-line ri-xl"></i>
      </div>
      </nav>
      </header></div>
<div id="content">
<div class="post-date">22 May 2024</div><h1 class="post-title"><a href="https://www.vandee.art/blog/2024-05-22-org-pkm-manual.html">PKM（个人知识管理）构建手册 - Emacs</a></h1>
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orge85b408">Intro</a></li>
<li><a href="#orgf3b8b53">Manual</a>
<ul>
<li><a href="#orgdca6a85">Prerequisites</a></li>
<li><a href="#org72832bb">PKM</a>
<ul>
<li><a href="#orgb2739cd">Principles</a></li>
<li><a href="#org9185358">Methods</a></li>
</ul>
</li>
<li><a href="#orgdc916a1">PKM with LLM</a>
<ul>
<li><a href="#orgf26e358">Ollama</a></li>
<li><a href="#orgf3045b9">Open WebUI</a></li>
<li><a href="#org83755fd">Aider</a></li>
<li><a href="#orgda65b58">gptel</a></li>
<li><a href="#org57f86d6">Kotaemon</a></li>
<li><a href="#orgb22b339">Chipper</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgdb81b52">ChangeLog</a></li>
<li><a href="#org689fb5a">Thanks</a></li>
</ul>
</div>
</nav>
<div id="outline-container-orge85b408" class="outline-2">
<h2 id="orge85b408">Intro</h2>
<div class="outline-text-2" id="text-orge85b408">
<blockquote>
<p>
For me, taking notes helps make sure that I’m really thinking hard about what’s in there. If I disagree with the book, sometimes it takes a long time to read the books because I’m writing so much in the margin. <a href="https://youtu.be/eTFy8RnUkoU?t=11">Bill Gates</a>
</p>

<p>
对我来说，做笔记有助于确保我真正认真思考其中的内容。如果我不同意这本书，有时需要花很长时间才能读完这本书，因为我在页边空白处写了太多内容。—比尔·盖茨
</p>
</blockquote>

<p>
这段时间关于PKM（个人知识管理）的构建起起伏伏，究其原因大概是我的思维工具跟不上思维了，工具用起来不顺手了。好在一些关键的问题都解决了，现在总结梳理成册，提供一个我个人觉得还比较靠谱，能有效的组织思维、呈现思维、扩展思维的PKM手册，也是一个模板。
</p>

<p>
从2022年开始用Notion，那个时候还不知道PKM是什么，就随心所欲的乱记一通。历经了Obsidian、Logseq，再到现在的Emacs，org-mode，通过做笔记和折腾这些笔记软件，不断深入了解这些软件的作者、笔记软件的设计理念，我觉得我的思维、认知、学习方法、写作、表达都有了质的提升。工欲善其事，必先利其器，对我而言，一个称手的笔记工具是很必须的。这个PKM方法就是我披荆斩棘的那个柳条，张三丰的太极，有形易于无形。这也就是在说，一个工具能发挥出多大效果，取决于使用者。爱因斯坦不需要记笔记，他的笔记直接就发表了🤣。对于PKM和做笔记，你可以不用，但我喜欢我有。
</p>

<p>
一个科学的，适合自己的PKM对思维的提升就好像，擎天柱组合了扩展装甲。再加上AI越来越易用，形成一些思维的语料通过LLM来拓展思维一定会是未来更有效的学习模式。而这个「PKM-base」库，就是我的扩展装甲。逐渐的，PKM这个工具和我的思维已经又融为一体，对于这个进展我很兴奋，似乎我离我的<a href="https://www.vandee.art/posts/2023-12-06-learn-all-the-time/">太极</a>又近了一步。
</p>

<p>
作为思维的另一个同步的呈现，以一生来度量，这个手册也会一直更新。
</p>

<p>
对于数字笔记来说，Markdown很实用，可读性也很强，兼容性和扩展性更不用说，而Org更有个性，更符合我现在的需求，在Emacs里，想实现的个性化功能，基本上都可以使用Elisp语言自己写函数来搞定，awesome！
</p>

<p>
无思维不笔记，PKM不做本末倒置的事，让它帮助自己拓展思维，提升思维、学习、认知的效率，<a href="https://dg.vandee.art/Cards/%E6%89%BE%E5%88%B0%E7%9F%A5%E8%AF%86%E7%9A%84%E7%BC%9D%E9%9A%99">找到知识的缝隙</a>，更好的认知世界、认知自我才是本质。Notion、Logseq、Obsidian、Roam Research、Heptabase，未来还会有更多的笔记软件，适合自己的才是最好的，选择一个笔记软件、笔记工具就是在选择一个生态、一个系统，下一个笔记软件，何必是笔记软件。
</p>

<p>
现在的PKM（个人知识管理）体系还有许多需要完善的地方，我也肯定还会有我的下一个笔记软件，它也一定不是一个笔记软件。
</p>
</div>
</div>
<div id="outline-container-orgf3b8b53" class="outline-2">
<h2 id="orgf3b8b53">Manual</h2>
<div class="outline-text-2" id="text-orgf3b8b53">
<p>
这是一个以 <a href="https://zh.wikipedia.org/wiki/Emacs">Emacs</a> 为基础编辑器、文件管理的Org-mode本地笔记PKM。
</p>

<p>
至于Emacs是什么，流传着一句话：Emacs是神的编辑器，Vim是编辑器之神。
</p>

<p>
本手册包括：
</p>

<ul class="org-ul">
<li>Prerequisites：开始构建本PKM需要的工具和准备工作</li>
<li>PKM：本PKM的构建原则和具体方法、org-mode的具体使用、org-capture与org-roam、Zotero、网页摘录与after-reading、中英混合输入的输入法配置与RIME</li>
<li>PKM-with-LLM：PKM和大语言模型结合的使用</li>
</ul>
</div>
<div id="outline-container-orgdca6a85" class="outline-3">
<h3 id="orgdca6a85">Prerequisites</h3>
<div class="outline-text-3" id="text-orgdca6a85">
<p>
Start with：<a href="https://git-scm.com/download">Git</a>，<a href="https://www.gnu.org/software/emacs/">GNU Emacs</a> ,<a href="https://orgmode.org/">Org mode for GNU Emacs</a>，<a href="https://github.com/protesilaos/denote">denote</a>。
</p>

<p>
开始你可能需要对Emacs、Org-mode、Git有一些了解，这些可以帮助到你：
</p>

<ul class="org-ul">
<li><a href="https://github.com/doomemacs/doomemacs/tree/master">GitHub - doomemacs/doomemacs: An Emacs framework for the stubborn martian hacker</a></li>

<li><a href="https://github.com/doomemacs/doomemacs/blob/master/docs/getting_started.org#on-windows">doomemacs/docs/getting_started.org at master · doomemacs/doomemacs · GitHub</a></li>

<li><a href="https://www.gnu.org/software/emacs/manual/">GNU Emacs Manuals Online</a></li>

<li><a href="https://orgmode.org/manuals.html">Manuals Org mode</a></li>

<li><a href="https://org-roam.discourse.group/">Org-roam - discourse</a></li>

<li><a href="https://emacs-china.org/">Emacs China</a></li>

<li><a href="https://emacsdocs.org/">Emacs Docs</a></li>

<li><a href="https://emacs.readthedocs.io/en/latest/index.html">Emacs readthedocs</a></li>
</ul>

<p>
配置参考：
</p>

<ul class="org-ul">
<li><a href="https://github.com/purcell/emacs.d">GitHub - purcell/emacs.d: An Emacs configuration bundle with batteries included</a></li>

<li><a href="https://github.com/redguardtoo/emacs.d">GitHub - redguardtoo/emacs.d: Fast and robust Emacs setup.</a></li>

<li><a href="https://github.com/MatthewZMD/.emacs.d">GitHub - MatthewZMD/.emacs.d: M-EMACS, a full-featured GNU Emacs configuration distribution</a></li>

<li><a href="https://github.com/manateelazycat/lazycat-emacs">manateelazycat/lazycat-emacs: Andy Stewart's emacs</a></li>

<li><a href="https://github.com/xenodium/dotsies">xenodium/dotsies: Dot files, Emacs config, etc</a></li>
</ul>

<p>
如何安装和基本的配置，上面都可以解决。如果你止步在了这里，直接放弃或许是更好的选择，或者使用<a href="https://obsidian.md/">obsidian</a>、<a href="https://logseq.com/">Logseq</a>这样的Markdown笔记工具，更或者使用Logseq的org编辑模式，用Logseq来管理org文档（不推荐长期这么做），适合自己的才是最好的。
</p>

<p>
强烈建议用 purcell 大神的配置作为高档毛坯房的开始。在开始上手的时候，DoomEmacs 的体验是很好的，但是 DoomEmacs 有许多自己的宏和类似语法糖的语句和原生 Emacs 是不通用的，许多适配的细节也不好自己调整，长期使用 Emacs 当然还是原生的好折腾一些。包管理用 <code>use-package</code> 和 <code>git submodule</code> 就挺方便的了。
</p>

<p>
现在我也从 DoomEmacs 转为自己配置了，这是我之前的doomemacs<a href="https://github.com/VandeeFeng/doomemacs">配置</a>，这个手册的配置代码示例是基于 DoomEmacs 的，所以原生 Emacs 和不使用 <code>use-package</code> 的部分需要修改。
</p>

<p>
这是现在的 config：<a href="https://github.com/VandeeFeng/emacs.d">VandeeFeng/emacs.d</a> ,在主题和使用习惯上加了亿点点细节。黑白灰的配色基调，加上了梵高经典星空蓝，向日葵橙黄，莫兰迪牛油果深绿等等这些自己喜欢的颜色。
</p>

<p>
摄影领域有一句话，一个最愿意拿起来的相机就是最好的相机。同样，一个最愿意打开和使用的笔记本，就是最好的笔记本。
</p>


<figure id="org9dba696">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/new-emacs3.png" class="img" width="50%" height="50%">

</figure>
</div>
</div>
<div id="outline-container-org72832bb" class="outline-3">
<h3 id="org72832bb">PKM</h3>
<div class="outline-text-3" id="text-org72832bb">
<p>
整体的笔记文件管理结构，还是<a href="https://publish.obsidian.md/chinesehelp/01+2021%E6%96%B0%E6%95%99%E7%A8%8B/ACCESS%E7%AC%94%E8%AE%B0%E6%B3%95">ACCESS</a>，可以选择不用。有文件夹和没有文件夹是两种不同的管理模式，例如ob和Logseq。这个手册里更主要的是分享我在构建PKM的过程中迭代的一些原则和方法，以供参考，形成、巩固自己的方法才是这个手册真正的目的，remember：有形易于无形。具体可以参看：<a href="https://dg.vandee.art/Atlas/MOC/%C2%A7Vandee%E7%9A%84PKM">§Vandee的PKM</a>
</p>

<p>
Januarys用来记录每天的日志，作为简单明了的回顾和展开。如果你不喜欢文件夹管理，我觉得这个是很有必要的。
</p>

<p>
使用org-capture和org-roam-capture来创建，插入新的笔记和条目，在org-roam里也就是node节点。
</p>

<p>
<b>example</b> ：
</p>


<figure id="orgd58c4a7">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/January.gif" class="img" width="50%" height="50%">

</figure>

<p>
核心：原子笔记 + 双链。
</p>

<p>
你可能需要了解「原子笔记」（或者常青笔记，whatever）：<a href="https://notes.andymatuschak.org/zNUaiGAXp21eorsER1Jm9yU">Evergreen notes should be atomic</a>。
</p>

<p>
双链和反链让笔记之间的关联更加直观，当原子笔记很多的时候，反链可以直观的反应出和当前笔记相关的其他笔记。它应该同步于思维的链条。
</p>

<p>
Zettelkasten 其实并不那么重要。
</p>

<p>
Stay foolish，stay simple。
</p>

<p>
关于同步：
</p>

<p>
本地笔记没有在线笔记软件方便的地方就是多端同步与预览。我的本地笔记已经上传到了GitHub仓库，通过Git同步。临时需要修改的直接在GitHub仓库里就修改了。预览方面，我的笔记输出到了 <a href="https://wiki.vandee.art">Vandee — Wiki</a>
</p>
</div>
<div id="outline-container-orgb2739cd" class="outline-4">
<h4 id="orgb2739cd">Principles</h4>
<div class="outline-text-4" id="text-orgb2739cd">
<ul class="org-ul">
<li><a href="https://dg.vandee.art/Cards/%E4%B8%80%E4%B8%AA%E8%89%AF%E5%A5%BD%E7%9A%84%E7%9F%A5%E8%AF%86%E5%BE%AA%E7%8E%AF%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BA%94%E8%AF%A5%E6%9C%89%E4%BC%98%E7%A7%80%E7%9A%84%E6%A3%80%E7%B4%A2%E9%80%BB%E8%BE%91">一个良好的知识循环系统，应该有优秀的检索逻辑</a></li>
<li><a href="https://dg.vandee.art/Cards/%E7%AC%94%E8%AE%B0%E6%98%AF%E6%80%9D%E7%BB%B4%E7%9A%84%E5%91%88%E7%8E%B0%EF%BC%8C%E5%AE%83%E5%BA%94%E8%AF%A5%E6%98%AF%E7%9F%A2%E9%87%8F%E7%9A%84">笔记是思维的呈现，它应该是矢量的</a>，当然也是<a href="https://notes.andymatuschak.org/zNUaiGAXp21eorsER1Jm9yU">原子化</a>的</li>
<li><a href="https://dg.vandee.art/Cards/%E7%AC%94%E8%AE%B0%E4%B9%8B%E9%97%B4%E7%9A%84%E4%B8%B2%E8%81%94%E5%BA%94%E8%AF%A5%E5%AE%8C%E5%85%A8%E4%BE%9D%E9%9D%A0%E4%B8%8E%E6%80%9D%E7%BB%B4%E7%9A%84%E5%90%8C%E6%AD%A5">笔记之间的串联应该完全依靠与思维的同步</a></li>
<li><a href="https://dg.vandee.art/Cards/%E7%AC%94%E8%AE%B0%E5%BA%94%E8%AF%A5%E8%AE%A9%E7%9F%A5%E8%AF%86%E6%B5%81%E5%8A%A8%E8%B5%B7%E6%9D%A5">笔记应该让知识流动起来</a></li>
<li><a href="https://dg.vandee.art/Cards/%E7%AC%94%E8%AE%B0%E5%BA%94%E8%AF%A5%E6%9C%89%E4%BC%98%E7%A7%80%E7%9A%84%E5%B1%82%E7%BA%A7%E9%80%BB%E8%BE%91">笔记应该有优秀的层级逻辑</a></li>
<li><a href="https://dg.vandee.art/Cards/%E7%AC%94%E8%AE%B0%E7%9A%84%E6%A0%B8%E5%BF%83%E4%BB%B7%E5%80%BC%E5%9C%A8%E4%BA%8E%E5%A2%9E%E6%8F%B4%E6%9C%AA%E6%9D%A5%E7%9A%84%E8%87%AA%E5%B7%B1">笔记的核心价值在于增援未来的自己</a></li>
</ul>

<p>
无思维不笔记，PKM不做本末倒置的事，让它帮助自己拓展思维，提升思维、学习、认知的效率，<a href="https://dg.vandee.art/Cards/%E6%89%BE%E5%88%B0%E7%9F%A5%E8%AF%86%E7%9A%84%E7%BC%9D%E9%9A%99">找到知识的缝隙</a>，更好的认知世界、认知自我才是本质。
</p>

<blockquote>
<p>
把人自身的思维看作一个向量，它有自己的方向和属性，在大脑里让它们串联起来的是一个个神经元和突触，在笔记里就是双链和索引。因此，要在PKM里最大程度复现大脑思维的流动，我认为，最自然的方式就是让笔记向量与思维最自然的习惯同步。
</p>

<p>
例如我们的语言系统，我们不会在用母语表达一些简单想法的时候还费力思考，笔记也应该是一样。当我大脑里现在想到一个概念，需要在笔记里找到相应的内容，脱口而出时，就应该只需要按照思维本来的习惯检索到笔记。
</p>

<p>
<a href="https://www.vandee.art/posts/2024-05-13-abandon-note-software-cli-nb/">脱离笔记软件，CLI 笔记工具 —nb</a>
</p>

<p>
对于信息传播者来说，立体化的信息载体无疑可以包含更多信息的元素，对于信息接受者来说，当然理论上就可以接收到更多的信息。问题是出现在信息接收之后，也就是调动认知的这个过程。
简单来说：信息损耗率 + 认知调动率 = 新认知迭代率
</p>

<p>
<a href="https://www.vandee.art/posts/2023-09-18-read-or-listen/">读或听或看？</a>
</p>
</blockquote>
</div>
</div>
<div id="outline-container-org9185358" class="outline-4">
<h4 id="org9185358">Methods</h4>
<div class="outline-text-4" id="text-org9185358">
<p>
在最开始需要构建的关键体系就是检索的逻辑。
</p>

<p>
在双链部分由于原则上已经和思维高度同步，因此不需要做额外的增加思维成本的检索，只要在记录原子笔记的时候，顺其自然，高度提炼出明确、简洁的一句话概念即可。
</p>

<p>
在标签tags部分，我习惯把标签当作是一个object的二、三级属性来看待。例如《黄金时代》这本书，它的基础属性是book，我不会再重复标注它，而是写在property里，记下 <code>Type: book</code> 方便我通过函数来列举所有的书目，tag则记下文学、王小波。我习惯用单数来强调它是个属性，区别与复数的category集合的概念。
</p>

<p>
我看过许多博客和PKM，许多情况下，他们的tags在语义概念上都混用了，我习惯把tags和categories分开，分类就是分类，标签就是标签。category、property、tag还是需要在逻辑里有自然的分类，理清楚一个概念的内涵与外延。混用会导致tags越来越多，反而会增加检索的成本，过个几年，大多数的tags 可能已经忘了当时为什么记下了，单独再去整理标签无疑是个巨大的工程，tags也失去了应当有的作用。tags的构建同样应当同步与自身的思维习惯，自身对概念、语义的记忆。
</p>

<p>
当然这也完全取决于每个人自己的习惯。
</p>

<p>
学习、获取信息和知识是在做加法，PKM里更多的应该是减法，<a href="https://dg.vandee.art/Sources/Articles/Stay-learn,-Stay-unlearn%EF%BD%9C%E8%AF%95%E8%A1%8C%E9%94%99%E8%AF%AF102">Learn and unlearn</a>。
</p>

<p>
可以参考我的思路：<a href="https://dg.vandee.art/Spaces/Studys/org/org-mode-pkm">org-mode-pkm</a>
</p>

<p>
example：
Emacs，org-roam，模板创建Daily和note：
</p>


<figure id="org8261a6b">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/org-roam.gif" class="img" width="50%" height="50%">

</figure>
</div>
<ul class="org-ul">
<li><a id="org9dba7c4"></a>双链（反链）<br>
<div class="outline-text-5" id="text-org9dba7c4">
<p>
2025-11-16 added
</p>

<p>
我很喜欢在做笔记的时候使用双链，它简单高效的把单个笔记和其他笔记关联起来，它就是笔记地图里的节点。
</p>

<p>
tag，category，正则关键字搜索，双链，我觉得这些对于一个笔记系统来说就已经很足够了，再扩展更高层次的抽象，可能会得不偿失。
</p>

<p>
如果在搜索一个笔记概念的时候，上面的方法都找不到，那么就说明这个概念还没有完全掌握，笔记也需要进一步提炼。
</p>

<p>
在 Emacs 里，实现一个类似 denote 和 org-roam 的双链预览也极其简单：
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my/org-backlink</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #787878;">"Find all org files in the current directory that link to the current file.
The search is performed using `rgrep` for the specific pattern
'filename.org][filename]]'."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">unless</span> buffer-file-name
    <span style="color: #b0b1a3;">(</span><span style="color: #f43841;">error</span> <span style="color: #A1D08E;">"Current buffer is not visiting a file"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">let*</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>current-file <span style="color: #aebed8;">(</span>file-name-nondirectory buffer-file-name<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>current-dir <span style="color: #aebed8;">(</span>file-name-directory buffer-file-name<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>file-basename <span style="color: #aebed8;">(</span>file-name-sans-extension current-file<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #787878;">;; </span><span style="color: #787878;">Search for the literal string "filename.org][filename]]"
</span>         <span style="color: #97b098;">(</span>search-pattern <span style="color: #aebed8;">(</span>concat <span style="color: #b0b0b3;">(</span>regexp-quote current-file<span style="color: #b0b0b3;">)</span>
                                 <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">]</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">["</span>
                                 <span style="color: #b0b0b3;">(</span>regexp-quote file-basename<span style="color: #b0b0b3;">)</span>
                                 <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">]</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">]"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>rgrep search-pattern <span style="color: #A1D08E;">"*.org"</span> current-dir<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
为了在 Emacs 里获得和 obsidian 和 Logseq 里类似的链接预览的体验，自己糊了一个快速预览文件的小玩意 org-hover：<a href="https://github.com/VandeeFeng/org-hover">https://github.com/VandeeFeng/org-hover</a>
</p>

<p>
有时候只想快速预览一下双链的文件，org file link 的文件，又不想打开很多 buffer。这个小玩意也支持 denote 链接。
</p>

<p>
详细介绍在：<a href="https://www.vandee.art/blog/2025-11-13-emacs-notes-preview-org-hover.html">Emacs 浮窗快速预览笔记 - Org Hover</a>
</p>
</div>
</li>
<li><a id="org47be6b0"></a>denote<br>
<div class="outline-text-5" id="text-org47be6b0">
<p>
2025-06-28 added
</p>

<p>
其实在选择 org-roam 的时候也考虑过 denote，但是当时久仰 roam 的大名，对 org-roam 的好感多一些。
</p>

<p>
在长时间使用 org-roam 之后，其实很多它的功能我都没有使用到，除了核心的双链之外许多都可以直接用 org-capture 实现。org-roam-ui 我用到的次数也是非常少，也已经很久没有更新了。随着对编程的学习，笔记的 web ui 现在也可以自己写了。
</p>

<p>
denote 最吸引我的一点是它的作者对于记笔记的理解，在这个 <a href="https://www.youtube.com/watch?v=mLzFJcLpDFI">介绍视频</a> 里，展示了 denote 最核心的功能。其中有一个是批量查询相关笔记并导入链接，这个太方便了。虽然在 org-roam 里肯定也可以实现，但是在 denote 里，是开箱即用的。denote 的 backlink 的实现也更简洁，不像 org-roam 依赖数据库和节点 ID。
</p>

<p>
其次是 denote 默认的文件命名方式：时间戳（identifier） + 文件名（title） + Keywords（tags），这样命名的好处是，可以直接 grep 或者正则检索 tags 和笔记，不需要额外的设置，这个思路是通用的。
</p>

<p>
denote 还提供三种格式：org，md，txt。对于使用 Emacs，但是不喜欢 org 的来说，也很方便。
</p>

<p>
总之 denote 的设计更加简洁，依赖更少，自定义起来更方便，现在从 org-roam 转到 denote 了。
</p>

<p>
Ref:
</p>
<ul class="org-ul">
<li><a href="https://protesilaos.com/emacs/denote">https://protesilaos.com/emacs/denote</a></li>
<li><a href="https://github.com/protesilaos/denote">https://github.com/protesilaos/denote</a></li>
<li><a href="https://www.youtube.com/watch?v=mLzFJcLpDFI">https://www.youtube.com/watch?v=mLzFJcLpDFI</a></li>
</ul>
</div>
</li>
<li><a id="orgfa91015"></a>Org-tag<br>
<div class="outline-text-5" id="text-orgfa91015">
<p>
org里的标签功能也很全面，支持多个分组，可以自动补全，还支持自定义标签的快捷键。这很好的保证了之前所说的 <b>标签的统一性</b> ，大小写或者单复数不统一会很麻烦。
</p>

<p>
在org的任意标题之后加上 <code>:TAG1::TAG2:</code> 就打上了标签。
</p>

<p>
<b>进阶用法</b> 如下：
</p>

<p>
在Org Mode中，你可以通过按下快捷键来为项目或任务添加预定义的标签。以下是具体的步骤：
</p>

<ol class="org-ol">
<li>光标定位：将光标移动到你想要添加标签的项目或任务上。</li>
<li><b>添加标签：按下快捷键 <code>C-c C-q</code> ，org-set-tags-command，这将打开标签过滤器。可以直接在标题的最后输入标签。在输入冒号后，M-TAG</b> 提供了标签的自动补全和选择功能。</li>
<li>使用快捷键：在标签过滤器中，输入你为标签分配的字符常量作为快捷键。例如，如果你为 <code>@work</code> 标签分配了字符 <code>w</code> ，那么在标签过滤器中输入 <code>w</code> 。</li>
<li>确认添加：按下 <code>Enter</code> 键，这将为项目或任务添加相应的标签。</li>
</ol>

<p>
默认情况下，org 模式使用标准的 minibuffer 来输入标签 。然而，emacs 还提供了另外一种叫做 <b>fast tag selection</b> 的快速标签选择方式。在这种方式下可以仅用一个键来完成标签的选择和反选。要想使用这种方式，首先要为常使用的标签分配一个唯一字符。这个字符可以通过配置 <b>org-tag-alist</b> 来设置。比如，需要在很多文件中为很多项添加 '<b>:home:</b>' 标签。在这种情况下，可以这样设置：
</p>

<div class="org-src-container">
<pre class="src src-nil">(setq org-tag-alist '(("@work" . ?w) ("@home" . ? h ) ("@laptop" . ?l)))
</pre>
</div>

<p>
如果标签仅仅和当前使用的文件相关，那么可以像下面这样在文件中添加 <b>TAGS</b> 选项：
</p>

<div class="org-src-container">
<pre class="src src-nil">#+TAGS: @work(w) @home(h) @tennisclub(t) laptop(l) pc(p)
</pre>
</div>

<p>
标签接口会在一个 splash windows 中显示可用的标签。如果想在一个特定的标签后换行，需要在标签列表中插入一个 '<b>\n</b>' 。
</p>

<div class="org-src-container">
<pre class="src src-nil">#+TAGS: @work(w) @home(h) @tennisclub(t) \n laptop(l) pc(p)
</pre>
</div>

<p>
或者将他们写成两行
</p>

<div class="org-src-container">
<pre class="src src-nil">#+TAGS: @work(w) @home(h) @tennisclub(t)
#+TAGS: laptop(l) pc(p)
</pre>
</div>

<p>
也可以像下面这样用大(花)括号手动将标签进行分组
</p>

<div class="org-src-container">
<pre class="src src-nil">#+TAGS: { @work(w) @home(h) @tennisclub(t) } laptop(l) pc(p)
</pre>
</div>

<p>
在这种情况下， <code>@work(w) @home(h) @tennisclub(t)</code> 三个标签最多同时选择一个
</p>

<p>
org 也允许多个分组。当光标在这些行上的时候，不要忘了按 <b>C-c C-c</b> 来激活其它修改。
</p>

<p>
如果要在 <b>org-tags-alist</b> 中设置排它的标签组，必需要用 <b>:startgroup</b> 和 <b>:endgroup</b> 标签对，而不是用大括号。类似的，可以用 <b>:newline</b> 来声明一个新行。上面的例子也可以用下面的方式进行设置：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-tag-alist <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #79C0FF;">:startgroup</span> . nil<span style="color: #b0b1a3;">)</span>
                      <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"@work"</span> . ?w<span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"@home"</span> . ?h<span style="color: #b0b1a3;">)</span>
                      <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"@tennisclub"</span> . ?t<span style="color: #b0b1a3;">)</span>
                      <span style="color: #b0b1a3;">(</span><span style="color: #79C0FF;">:endgroup</span> . nil<span style="color: #b0b1a3;">)</span>
                      <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"laptop"</span> . ?l<span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"pc"</span> . ?p<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
</pre>
</div>

<p>
默认情况下，org tags 只会匹配加入到 agenda files 里的文件，如果想匹配其他的文件：
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my/org-tags-view</span> <span style="color: #93a8c6;">(</span>tags-match<span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">"Search for headings with TAGS-MATCH in all .org files in the current directory of the buffer.
TAGS-MATCH is a tags search string, like '</span><span style="color: #95a99f;">+project-work</span><span style="color: #787878;">'.
This version disables tag inheritance to avoid listing all headings if a filetag matches."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">interactive</span> <span style="color: #A1D08E;">"sTags match (e.g., +project-work): "</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">unless</span> <span style="color: #b0b1a3;">(</span>derived-mode-p <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-mode</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #f43841;">user-error</span> <span style="color: #A1D08E;">"This function must be called from an Org-mode buffer"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">let*</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>current-file <span style="color: #aebed8;">(</span>buffer-file-name<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>current-dir <span style="color: #aebed8;">(</span>file-name-directory current-file<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #787878;">;; </span><span style="color: #787878;">(parent-dir (expand-file-name ".." current-dir))
</span>         <span style="color: #787878;">;; </span><span style="color: #787878;">(org-files (directory-files-recursively parent-dir "\\.org$"))
</span>         <span style="color: #97b098;">(</span>org-files <span style="color: #aebed8;">(</span>directory-files-recursively current-dir <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">.org$"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">if</span> <span style="color: #97b098;">(</span>null org-files<span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>message <span style="color: #A1D08E;">"No .org files found in parent directory: %s"</span> current-dir<span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FFA657;">let</span> <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>org-agenda-files org-files<span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>org-use-tag-inheritance nil<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>  <span style="color: #787878;">; </span><span style="color: #787878;">Disable inheritance to ignore filetags
</span>        <span style="color: #aebed8;">(</span>org-tags-view nil tags-match<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
Ref:
</p>

<ul class="org-ul">
<li><a href="https://orgmode.org/manual/Tags.html#:~:text=Org%20mode%20has%20extensive%20support%20for%20tags.%20Every,by%20a%20single%20colon%2C%20e.g.%2C%20%E2%80%98%20%3Awork%3A%20%E2%80%99.">Tags (The Org Manual)</a></li>
<li><a href="https://www.cnblogs.com/btea/p/4412375.html">emacs org mode 中的标签全参考 - 咖啡加茶 - 博客园</a></li>
<li><a href="https://www.zmonster.me/2018/02/28/org-mode-capture.html">强大的 Org mode(4): 使用 capture 功能快速记录 · ZMonster's Blog</a></li>
</ul>
</div>
</li>
<li><a id="org1993256"></a>Org-agenda<br>
<div class="outline-text-5" id="text-org1993256">
<p>
最开始是不打算用org-agenda的，因为没有太多TODO要去管理。用 <code>#TODO</code> 来标注TODO搜索也并不麻烦。但是考虑到时间久了，agenda也可以通过标注时间戳来回顾非TODO项，还是启用了。和org-roam配合，可以很清晰的回顾一个星期内重要的笔记。以后需要清除掉这些时间戳也很方便，一个正则搞定。
</p>

<p>
之前考虑到和其他笔记软件通用的问题，journal全部以单独的文件按照年份生成，现在改为集中在一个 <code>journal.org</code> 文件里。要不然以后org-agenda每次要扫描几年的journal文档会很头疼，现在改为每年一个单独的 <code>20xx-journal.org</code> 文件。
</p>

<p>
需要注意的是：在最开始设置好org-agenda要包括的文件或文件夹
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;; </span><span style="color: #787878;">&#21333;&#29420;&#30340;&#25991;&#20214;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-agenda-files <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span><span style="color: #A1D08E;">"~/your/path/to/1.org"</span> <span style="color: #A1D08E;">"~/your/path/to/2.org"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #787878;">;; </span><span style="color: #787878;">&#25991;&#20214;&#22841;
</span><span style="color: #787878;">;; </span><span style="color: #787878;">&#36825;&#26679;&#20250;&#25226;&#30446;&#24405;&#19979;&#21253;&#25324;&#23376;&#25991;&#20214;&#22841;&#30340;&#25991;&#20214;&#37117;&#28155;&#21152;&#36827;&#21435; https://emacs-china.org/t/org-txt-agenda/13506/5
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-agenda-files <span style="color: #93a8c6;">(</span>directory-files-recursively <span style="color: #A1D08E;">"~/your/directory/"</span> <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">.org$"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #787878;">;; </span><span style="color: #787878;">&#25991;&#20214;&#22841;&#20294;&#19981;&#21253;&#25324;&#23376;&#25991;&#20214;&#22841;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-agenda-directory <span style="color: #A1D08E;">"~/your/agenda/directory/"</span><span style="color: #8c8c8c;">)</span>

</pre>
</div>

<p>
这是现在的样子：
</p>

<figure id="org0ac18e1">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/%E6%88%AA%E5%B1%8F2024-06-15%2011.28.09.png" class="img" width="50%" height="50%">

</figure>
</div>
</li>
<li><a id="org80d11ea"></a>TODOs<br>
<div class="outline-text-5" id="text-org80d11ea">
<ul class="org-ul">
<li><p>
你可以通过在TODO项目下新建一个大纲树，并在子树上标记子任务来实现这个功能。为了能对已经完成的任务有个大致的了解，你可以在标题的任何地方插入 <code>[/]</code> 或者 <code>[%]</code> 。当每个子任务的状态变化时，或者当你在标记上按 C-c C-c时，这些标记状态也会随之更新。
</p>

<div class="org-src-container">
<pre class="src src-nil">  * TODO Organize party [1/3]
    - [-] call people [1/2]
      - [ ] Peter
      - [X] Sarah
    - [X] order food
    - [ ] think about what music to play
</pre>
</div>

<p>
Org mode 允许定义进入状态和离开状态时的额外动作，可用的动作包含两个:
</p>

<ul class="org-ul">
<li>添加笔记和状态变更信息(包括时间信息)，用"@"表示</li>
<li>只添加状态变更信息，用"!"表示</li>
</ul>

<p>
这个通过定义带快速选择键的关键词时，在快速选择键后用"X/Y"来表示，X表示进入该状态时的动作，Y表示离开该状态时的动作。对于一个状态(以"DONE"为例)，以下形式都是合法的:
</p>

<div class="org-src-container">
<pre class="src src-nil">  DONE(d@)       ; 进入时添加笔记
  DONE(d/!)      ; 离开时添加变更信息
  DONE(d@/!)     ; 进入时添加笔记，离开时添加变更信息
</pre>
</div>

<ul class="org-ul">
<li><p>
除了基于 headline 的任务管理外，Org mode 还提供基于列表的任务管理，即将每个列表项作为任务，方法是在列表标记与列表项内容之间添加一个 "[ ]" 标记(注意中间包含一个字符的预留位置)，这个标记在 Org mode 中被称为 <b>checkbox</b> 。这种任务只有三种状态(待办、进行中和完成)，分别用 <code>[ ]</code>, <code>[-]</code> 和 <code>[X]</code> 表示。
</p>

<p>
若要将用 checkbox 标记的任务标记为完成，将光标移动到对应的行，然后使用快捷键 "C-c C-c"  即可。对于包含子任务的任务，如果其子任务未全部完成，用此快捷键更改其子任务状态时，该任务的状态会自动设置为  "进行中([-])"，表示子任务未全部完成；当用快捷键将所有子任务标记为完成时，它会自动更新为完成状态。
</p>

<p>
用"TODO"等关键词标记为headline为任务时，使用的快捷键同样适用于checkbox，不过略有不同:
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">快捷键</th>
<th scope="col" class="org-left">功能</th>
<th scope="col" class="org-left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-S-return</td>
<td class="org-left">在当前列表项的内容后面建立一个同级列表项，标记为 "[ ]"</td>
<td class="org-left">无列表项时不创建</td>
</tr>

<tr>
<td class="org-left">M-S-return</td>
<td class="org-left">在当前列表项后建立一个同级列表项，标记为 "[ ]"</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
使用 <code>shift+← →方向键</code> 也可以快速更改TODO的状态。
</p></li>

<li><p>
TODO sequence
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
   <span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-todo-keywords
         <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>sequence <span style="color: #A1D08E;">"TODO(t)"</span> <span style="color: #A1D08E;">"DOING(i)"</span> <span style="color: #A1D08E;">"|"</span> <span style="color: #A1D08E;">"DONE(d@)"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
   <span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-log-done <span style="color: #FFA657;">'</span><span style="color: #95a99f;">time</span><span style="color: #8c8c8c;">)</span> <span style="color: #787878;">;; </span><span style="color: #787878;">&#27599;&#27425;&#24403;&#20320;&#23558;&#19968;&#20010;&#39033;&#20174; TODO (not-done) &#29366;&#24577;&#21464;&#25104;&#20219;&#24847;&#30340; DONE &#29366;&#24577;&#26102;&#65292;&#37027;&#20040;&#65292;&#23427;&#23601;&#20250;&#33258;&#21160;&#22312;&#26631;&#39064;&#30340;&#19979;&#38754;&#25554;&#20837;&#19968;&#34892;&#19979;&#38754;&#30340;&#20869;&#23481;&#65306;CLOSED: [timestamp]
</span>
</pre>
</div></li>
</ul></li>
</ul>

<p>
Ref：
</p>

<ul class="org-ul">
<li><a href="https://emacs-china.org/t/org-agenda/26755">新人提问，org格式中，重复任务在某一天完成后，却不能在agenda正确显示。。。 - Emacs-general - Emacs China</a></li>
<li><a href="https://github.com/AbstProcDo/Master-Emacs-From-Scratch-with-Solid-Procedures/blob/master/06.Emacs-as-Agenda-by-Org.org">Master-Emacs-From-Scratch-with-Solid-Procedures/06.Emacs-as-Agenda-by-Org</a></li>
<li><a href="https://orgmode.org/manual/Agenda-Views.html">Agenda Views (The Org Manual)</a></li>
<li><a href="https://emacsist.github.io/emacsist/orgmode/orgmode%E6%89%8B%E5%86%8C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#org6796967">emacsist.github.io/emacsist/orgmode/orgmode手册学习笔记.html</a></li>
<li><a href="https://www.zmonster.me/2015/07/15/org-mode-planning.html">强大的 Org mode(2): 任务管理 · ZMonster's Blog</a></li>
<li><a href="https://www.cnblogs.com/Open_Source/archive/2011/07/17/2108747.html#sec-5">Org-mode 简明手册 - open source - 博客园</a></li>
</ul>
</div>
</li>
<li><a id="orgda1baac"></a>Org-capture<br>
<div class="outline-text-5" id="text-orgda1baac">
<p>
<a href="https://orgmode.org/manual/Capture.html">Org-capture</a> 是org-mode做笔记比较核心的功能，结合capture-templates可以在不离开当前buffer的情况下，快速记录、捕捉特定的内容到特定的文件和位置。加上时间戳还可以在agenda里以时间线回顾。
</p>

<p>
目前PKM里的Journal-日志、clip-剪藏、task-TODO等都是用org-capture处理的。
</p>

<p>
一定要在最开始先设置好org的默认笔记目录： <code>(setq org-directory "~/your/path/org/")</code>
</p>

<p>
需要注意的是：对于Doom-Emacs，需要在 <code>(after！org)</code> 里写上关于org的配置来覆盖Doom-Emacs的默认配置。
</p>

<p>
如果常规的org-capture参数不足以满足你的需求，这个函数可能对你有帮助：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;; </span><span style="color: #787878;">org-capture&#25903;&#25345;&#33258;&#23450;&#20041;&#20989;&#25968;&#65292;&#36890;&#36807;function&#26469;&#25191;&#34892;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my-org-goto-last-todo-headline</span> <span style="color: #93a8c6;">()</span>
    <span style="color: #787878;">"Move point to the last headline in file matching </span><span style="color: #787878; font-weight: bold;">\</span><span style="color: #787878; font-weight: bold;">"</span><span style="color: #787878;">* Notes</span><span style="color: #787878; font-weight: bold;">\</span><span style="color: #787878; font-weight: bold;">"</span><span style="color: #787878;">."</span>
    <span style="color: #93a8c6;">(</span>end-of-buffer<span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span>re-search-backward <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">* TODOs"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span>
            <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span><span style="color: #A1D08E;">"t"</span> <span style="color: #A1D08E;">"Task"</span> entry <span style="color: #b0b1a3;">(</span>file+function <span style="color: #A1D08E;">"~/Vandee/pkm/org/Journal.org"</span>
                                                my-org-goto-last-todo-headline<span style="color: #b0b1a3;">)</span>
</pre>
</div>



<p>
下面是org-capture的模板和相关配置：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span>after! org
  <span style="color: #787878;">;; </span><span style="color: #787878;">(server-start)
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">(require 'org-protocol)
</span>  <span style="color: #93a8c6;">(</span>org-link-set-parameters <span style="color: #A1D08E;">"zotero"</span> <span style="color: #79C0FF;">:follow</span>
                           <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">lambda</span> <span style="color: #97b098;">(</span>zpath<span style="color: #97b098;">)</span>
                             <span style="color: #97b098;">(</span>browse-url
                              <span style="color: #787878;">;; </span><span style="color: #787878;">we get the "zotero:"-less url, so we put it back.
</span>                              <span style="color: #aebed8;">(</span>format <span style="color: #A1D08E;">"zotero:%s"</span> zpath<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">setq</span> org-agenda-files <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"~/Vandee/pkm/org/Journal.org"</span> <span style="color: #A1D08E;">"~/Vandee/pkm/org/clip.org"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">(setq org-agenda-include-diary t)
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">(setq org-agenda-diary-file "~/Vandee/pkm/org/Journal.org")
</span>  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">setq</span> org-directory <span style="color: #A1D08E;">"~/Vandee/pkm/org/"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>global-set-key <span style="color: #b0b1a3;">(</span>kbd <span style="color: #A1D08E;">"C-c c"</span><span style="color: #b0b1a3;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture</span><span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">;;</span><span style="color: #787878;">(setq org-default-notes-file "~/Vandee/pkm/inbox.org")
</span>  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">setq</span> org-capture-templates nil<span style="color: #93a8c6;">)</span>

  <span style="color: #787878;">;; </span><span style="color: #787878;">(add-to-list 'org-capture-templates
</span>  <span style="color: #787878;">;;              </span><span style="color: #787878;">'("j" "Journal" entry (file+datetree  "~/Vandee/pkm/Journals/Journal.org")
</span>  <span style="color: #787878;">;;                </span><span style="color: #787878;">"* [[file:%&lt;%Y&gt;/%&lt;%Y-%m-%d&gt;.org][%&lt;%Y-%m-%d&gt;]] - %^{heading} %^g\n %?\n"))
</span>  <span style="color: #93a8c6;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span>
               <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"j"</span> <span style="color: #A1D08E;">"Journal"</span> entry <span style="color: #97b098;">(</span>file+datetree <span style="color: #A1D08E;">"~/Vandee/pkm/org/Journal.org"</span><span style="color: #97b098;">)</span>
                 <span style="color: #A1D08E;">"* TODOs</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">* Inbox</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">- %?"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span>
               <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"i"</span> <span style="color: #A1D08E;">"Inbox"</span> entry <span style="color: #97b098;">(</span>file+datetree <span style="color: #A1D08E;">"~/Vandee/pkm/org/Inbox.org"</span><span style="color: #97b098;">)</span>
                 <span style="color: #A1D08E;">"* %U - %^{heading} %^g</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;"> %?</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my-org-goto-last-todo-headline</span> <span style="color: #b0b1a3;">()</span>
    <span style="color: #787878;">"Move point to the last headline in file matching </span><span style="color: #787878; font-weight: bold;">\</span><span style="color: #787878; font-weight: bold;">"</span><span style="color: #787878;">* Notes</span><span style="color: #787878; font-weight: bold;">\</span><span style="color: #787878; font-weight: bold;">"</span><span style="color: #787878;">."</span>
    <span style="color: #b0b1a3;">(</span>end-of-buffer<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>re-search-backward <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">* TODOs"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span>
               <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"t"</span> <span style="color: #A1D08E;">"Task"</span> entry <span style="color: #97b098;">(</span>file+function <span style="color: #A1D08E;">"~/Vandee/pkm/org/Journal.org"</span>
                                                 my-org-goto-last-todo-headline<span style="color: #97b098;">)</span>
                 <span style="color: #A1D08E;">"* TODO %i%? </span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">%T"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span> <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"c"</span> <span style="color: #A1D08E;">"Collections"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span>
               <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"cw"</span> <span style="color: #A1D08E;">"Web Collections"</span> item
                 <span style="color: #97b098;">(</span>file+headline <span style="color: #A1D08E;">"~/Vandee/pkm/org/websites.org"</span> <span style="color: #A1D08E;">"&#23454;&#29992;"</span><span style="color: #97b098;">)</span>
                 <span style="color: #A1D08E;">"%?"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span>
               <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"ct"</span> <span style="color: #A1D08E;">"Tool Collections"</span> item
                 <span style="color: #97b098;">(</span>file+headline <span style="color: #A1D08E;">"~/Vandee/pkm/org/tools.org"</span> <span style="color: #A1D08E;">"&#23454;&#29992;"</span><span style="color: #97b098;">)</span>
                 <span style="color: #A1D08E;">"%?"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-capture-templates</span>
               <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"cc"</span> <span style="color: #A1D08E;">"Clip Collections"</span> entry
                 <span style="color: #97b098;">(</span>file+headline <span style="color: #A1D08E;">"~/Vandee/pkm/org/clip.org"</span> <span style="color: #A1D08E;">"Clip"</span><span style="color: #97b098;">)</span>
                 <span style="color: #A1D08E;">"* %^{heading} %^g</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">%T</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">Source: %^{source}</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">%?"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

</pre>
</div>


<p>
Ref：
</p>

<ul class="org-ul">
<li><a href="https://www.zmonster.me/2018/02/28/org-mode-capture.html">强大的 Org mode(4): 使用 capture 功能快速记录 · ZMonster's Blog</a></li>
<li><a href="https://orgmode.org/manual/Capture.html">Capture (The Org Manual)</a></li>
</ul>
</div>
</li>
<li><a id="org0de08f8"></a>Org-roam<br>
<div class="outline-text-5" id="text-org0de08f8">
<p>
<a href="https://www.orgroam.com/">Org-roam</a> 是 Emacs的一个包，可以简单的实现双链，通过org-roam-ui直观的预览。
</p>


<figure id="orga1c381f">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/org-roam-ui-2024-05-22%2013.31.40.png" class="img" width="50%" height="50%">

</figure>

<p>
也不是必须，只需要解决双链的查看就可以了。
</p>

<p>
org-roam也有它的capture，可以直接生成org笔记。而org-roam的「 node-insert 」可以快速在文档里直接插入新的笔记。与常规的org-mode <code>.org</code> 文件不同的是，它可以通过带id的node「 节点 」链接来实现org-mode里的双链功能。每一个org-roam笔记都有唯一的id。
</p>

<p>
其他属性和使用基本与org-mode一致，也是生成 <code>.org</code> 文件。同样也需要配置org-roam的capture-templates。原来用org-roam创建Journal日志文件，现在已经用org-capture替代。
</p>

<p>
org-roam-ui 也有和 Logseq一样的网点图谱「 Graph View 」，也提供大纲结构视图，对于我来说用起来很亲切。如果你觉得org-mode可读性不强，那么org-roam-ui一定会让你喜欢。org-roam-ui是在浏览器里通过 <code>org-roam-protocol</code> 访问，需要在配置加上 <code>(require 'org-roam-protocol)</code> 。
</p>

<p>
同样也需要在最开始设置好org-roam笔记的文件夹： <code>(setq org-roam-directory "~/your/roam/directory/")</code>
</p>

<p>
有一个坑，org-roam会自动生成一个 <code>.orgids</code> 文件来记录生成的每个org-roam笔记的id，如果不设置会在系统根目录下自动生成。加上 <code>(org-id-locations-file "~/your/path/to/.orgids"</code>)即可。在一开始我一度认为我的电脑是不是哪里出了问题🤣，这个文件冷不丁的就冒出来了，删了重启又有了。官方文档和各大论坛里都没有这个设置，困扰了我很久，还是GPT帮我解决了。
</p>

<p>
下面是模板和相关配置：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;; </span><span style="color: #787878;">(setq org-roam-dailies-directory "~/Vandee/pkm/Journals/")
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-export-with-toc nil<span style="color: #8c8c8c;">)</span> <span style="color: #787878;">;;</span><span style="color: #787878;">&#31105;&#27490;&#29983;&#25104;toc
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">use-package</span> org-roam
  <span style="color: #79C0FF;">:ensure</span> t
  <span style="color: #79C0FF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">setq</span> org-roam-v2-ack t<span style="color: #93a8c6;">)</span>
  <span style="color: #79C0FF;">:custom</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">(org-roam-dailies-capture-templates
</span>  <span style="color: #787878;">;;  </span><span style="color: #787878;">'(("d" "daily" plain "* %&lt;%Y-%m-%d&gt;\n* TODO\n- \n* Inbox\n- %?"
</span>  <span style="color: #787878;">;;     </span><span style="color: #787878;">:if-new (file+head "%&lt;%Y&gt;/%&lt;%Y-%m-%d&gt;.org" "#+TITLE: %&lt;%Y-%m-%d&gt;\n"))))
</span>  <span style="color: #93a8c6;">(</span>org-roam-directory <span style="color: #A1D08E;">"~/Vandee/pkm/roam/"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>org-id-locations-file <span style="color: #A1D08E;">"~/Vandee/pkm/roam/.orgids"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>org-roam-capture-templates
   ~<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span><span style="color: #A1D08E;">"n"</span> <span style="color: #A1D08E;">"note"</span> plain <span style="color: #A1D08E;">"%?"</span>
      <span style="color: #79C0FF;">:if-new</span> <span style="color: #aebed8;">(</span>file+head <span style="color: #A1D08E;">"${title}.org"</span>
                         <span style="color: #A1D08E;">"#+TITLE: ${title}</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+UID: %&lt;%Y%m%d%H%M%S&gt;</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+FILETAGS: </span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+TYPE: </span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+SOURCE: </span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+DATE: %&lt;%Y-%m-%d&gt;</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">"</span><span style="color: #aebed8;">)</span>
      <span style="color: #79C0FF;">:unnarrowed</span> t<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
   <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>org-roam-completion-everywhere t<span style="color: #93a8c6;">)</span>
  <span style="color: #79C0FF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"C-c n l"</span> . org-roam-buffer-toggle<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"C-c n f"</span> . org-roam-node-find<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"C-c n i"</span> . org-roam-node-insert<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"C-c n I"</span> . org-roam-node-insert-immediate<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"C-c n c"</span> . org-roam-capture<span style="color: #b0b1a3;">)</span>
         <span style="color: #787878;">;; </span><span style="color: #787878;">("C-c n j" . org-roam-dailies-capture-today)
</span>         <span style="color: #79C0FF;">:map</span> org-mode-map
         <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"C-M-i"</span> . completion-at-point<span style="color: #b0b1a3;">)</span>
         <span style="color: #787878;">;; </span><span style="color: #787878;">:map org-roam-dailies-map
</span>         <span style="color: #787878;">;; </span><span style="color: #787878;">("Y" . org-roam-dailies-capture-yesterday)
</span>         <span style="color: #787878;">;; </span><span style="color: #787878;">("T" . org-roam-dailies-capture-tomorrow))
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">:bind-keymap
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">("C-c n d" . org-roam-dailies-map)
</span>  <span style="color: #79C0FF;">:config</span>
  <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">require</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-roam-dailies</span><span style="color: #b0b1a3;">)</span> <span style="color: #787878;">;; </span><span style="color: #787878;">Ensure the keymap is available
</span>  <span style="color: #b0b1a3;">(</span>org-roam-db-autosync-mode<span style="color: #b0b1a3;">)</span>
  <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">require</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-roam-protocol</span><span style="color: #b0b1a3;">)</span>
  <span style="color: #93a8c6;">)</span>

</pre>
</div>

<p>
<b>org-roam-capture模板分组</b>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;; </span><span style="color: #787878;">org-roam-capture&#27169;&#26495;&#20998;&#32452;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-roam-capture-templates
      <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"d"</span> <span style="color: #A1D08E;">"default"</span> plain <span style="color: #97b098;">(</span><span style="color: #FFA657;">function</span> org-roam-capture--get-point<span style="color: #97b098;">)</span>
         <span style="color: #A1D08E;">"%?"</span>
         <span style="color: #79C0FF;">:file-name</span> <span style="color: #A1D08E;">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
         <span style="color: #79C0FF;">:head</span> <span style="color: #A1D08E;">"#+title: ${title}</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+roam_alias:</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">"</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"g"</span> <span style="color: #A1D08E;">"group"</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"ga"</span> <span style="color: #A1D08E;">"Group A"</span> plain <span style="color: #97b098;">(</span><span style="color: #FFA657;">function</span> org-roam-capture--get-point<span style="color: #97b098;">)</span>
         <span style="color: #A1D08E;">"%?"</span>
         <span style="color: #79C0FF;">:file-name</span> <span style="color: #A1D08E;">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
         <span style="color: #79C0FF;">:head</span> <span style="color: #A1D08E;">"#+title: ${title}</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+roam_alias:</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">"</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"gb"</span> <span style="color: #A1D08E;">"Group B"</span> plain <span style="color: #97b098;">(</span><span style="color: #FFA657;">function</span> org-roam-capture--get-point<span style="color: #97b098;">)</span>
         <span style="color: #A1D08E;">"%?"</span>
         <span style="color: #79C0FF;">:file-name</span> <span style="color: #A1D08E;">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
         <span style="color: #79C0FF;">:head</span> <span style="color: #A1D08E;">"#+title: ${title}</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">#+roam_alias:</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">n</span><span style="color: #A1D08E;">"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

</pre>
</div>



<p>
Ref：
</p>

<ul class="org-ul">
<li><a href="https://emacs-china.org/t/org-roam-v2-backlinks-buffer-headlines/23368/3">org-roam v2 的 backlinks buffer 能否显示指向当前文件的所有 headlines 的反链 - Org-mode - Emacs China</a></li>
<li>org-roam的官方论坛：<a href="https://org-roam.discourse.group/">Org-roam - discourse</a></li>
<li><a href="https://systemcrafters.net/build-a-second-brain-in-emacs/5-org-roam-hacks/">https://systemcrafters.net/build-a-second-brain-in-emacs/5-org-roam-hacks/</a></li>
<li><a href="https://www.zmonster.me/2020/06/27/org-roam-introduction.html">使用 org-roam 构建自己的知识网络 · ZMonster's Blog</a></li>
<li><a href="https://d12frosted.io/tags/org-roam.html">Boris Buliga - org-roam</a></li>
<li><a href="https://emacs-china.org/t/org-roam-v2-org-roam-ui-emacs-29-sqlite/17806">Org-roam(v2) 以及 org-roam-ui 的使用姿势（已支持Emacs 29 内置的 sqlite) - Org-mode - Emacs China</a></li>
</ul>
</div>
</li>
<li><a id="orge9a807d"></a>Org-export<br>
<div class="outline-text-5" id="text-orge9a807d">
<p>
单独导出成MD、HTML或其他格式，Org-mode里就可以，也可以使用这些<a href="https://orgmode.org/zh-CN/tools.html">工具</a> 。批量导出，由于每个人的排版和格式习惯不同，还是自己用自己熟悉的语言，写几个正则，搞个脚本。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;; </span><span style="color: #787878;">&#24403;&#21069;buffer&#19979;&#65292;&#26367;&#25442;markdown&#30340;&#38142;&#25509;&#21644;&#26631;&#39064;&#26684;&#24335;&#21040;org-mode&#30340;&#26684;&#24335;&#65292;&#25490;&#38500;&#22270;&#29255;&#30340;&#36716;&#25442;&#12289;&#26367;&#25442;&#20195;&#30721;&#22359;&#26684;&#24335;&#12290;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">defun</span> <span style="color: #96a6c8;">my-markdown-to-org</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">save-excursion</span>
    <span style="color: #787878;">;; </span><span style="color: #787878;">&#36716;&#25442;Markdown&#26631;&#39064;&#20026;Org-mode&#26631;&#39064;
</span>    <span style="color: #b0b1a3;">(</span>goto-char <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">while</span> <span style="color: #97b098;">(</span>re-search-forward <span style="color: #A1D08E;">"^</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">s</span><span style="color: #A1D08E;">*</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">(</span><span style="color: #A1D08E;">#+</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">)</span><span style="color: #A1D08E;"> </span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">(</span><span style="color: #A1D08E;">.*</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">)</span><span style="color: #A1D08E;">"</span> nil t<span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FFA657;">let</span> <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>level <span style="color: #90a890;">(</span>length <span style="color: #a2b6da;">(</span>match-string 1<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>title1 <span style="color: #90a890;">(</span>match-string 2<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
        <span style="color: #aebed8;">(</span>replace-match <span style="color: #b0b0b3;">(</span>concat <span style="color: #90a890;">(</span>make-string level ?*<span style="color: #90a890;">)</span> <span style="color: #A1D08E;">" "</span> title1<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">&#36716;&#25442;Markdown&#38142;&#25509;&#20026;Org-mode&#38142;&#25509;,&#20294;&#26159;&#36339;&#36807;&#22270;&#29255;&#38142;&#25509;
</span>  <span style="color: #93a8c6;">(</span>goto-char <span style="color: #b0b1a3;">(</span>point-min<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">while</span> <span style="color: #b0b1a3;">(</span>re-search-forward <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">[[</span><span style="color: #f43841; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">(</span><span style="color: #A1D08E;">.*?</span><span style="color: #f43841; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">]</span><span style="color: #A1D08E;">[</span><span style="color: #f43841; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">(</span><span style="color: #A1D08E;">.*?</span><span style="color: #f43841; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">)</span><span style="color: #f43841; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">]</span><span style="color: #A1D08E;">])"</span> nil t<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">let</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>title <span style="color: #b0b0b3;">(</span>match-string 1<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span>url <span style="color: #b0b0b3;">(</span>match-string 2<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FFA657;">unless</span> <span style="color: #aebed8;">(</span><span style="color: #FFA657;">and</span> <span style="color: #b0b0b3;">(</span>string-match <span style="color: #A1D08E;">"</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">(</span><span style="color: #A1D08E;">jpeg</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">|</span><span style="color: #A1D08E;">png</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">|</span><span style="color: #A1D08E;">svg</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">)</span><span style="color: #A1D08E;">"</span> url<span style="color: #b0b0b3;">)</span>
                   <span style="color: #b0b0b3;">(</span>string-match <span style="color: #A1D08E;">"https"</span> url<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
        <span style="color: #aebed8;">(</span>replace-match <span style="color: #b0b0b3;">(</span>format <span style="color: #A1D08E;">"[[%s][%s]]"</span> url title<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">&#36716;&#25442;Markdown&#20195;&#30721;&#22359;&#20026;Org-mode&#20195;&#30721;&#22359;
</span>  <span style="color: #93a8c6;">(</span>goto-char <span style="color: #b0b1a3;">(</span>point-min<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">while</span> <span style="color: #b0b1a3;">(</span>re-search-forward <span style="color: #A1D08E;">"^~~~"</span> nil t<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">if</span> <span style="color: #97b098;">(</span>looking-back <span style="color: #A1D08E;">"^~~~"</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span><span style="color: #FFA657;">progn</span>
          <span style="color: #aebed8;">(</span>replace-match <span style="color: #A1D08E;">"#+begin_src"</span><span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span>re-search-forward <span style="color: #A1D08E;">"^~~~"</span> nil t<span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span><span style="color: #FFA657;">if</span> <span style="color: #b0b0b3;">(</span>looking-back <span style="color: #A1D08E;">"^~~~"</span><span style="color: #b0b0b3;">)</span>
              <span style="color: #b0b0b3;">(</span>replace-match <span style="color: #A1D08E;">"#+end_src"</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>


<ul class="org-ul">
<li><p>
<b>Markdown to org-mode</b>:
</p>

<p>
Pandoc转换md到org会有小问题，批量转换还是悠着点。
</p>

<p>
<a href="https://emacs-china.org/t/markdown-to-org-pandoc-filter/26424">一个改善 Markdown to Org 转换的 Pandoc Filter 脚本 - Org-mode - Emacs China</a>
</p>

<p>
<a href="https://emacs.stackexchange.com/questions/5465/how-to-migrate-markdown-files-to-emacs-org-mode-format">How to migrate Markdown files to Emacs org mode format - Emacs Stack Exchange</a>
</p></li>
</ul>

<p>
Ref：<a href="https://orgmode.org/manual/Exporting.html">Exporting (The Org Manual)</a>、<a href="https://orgmode.org/zh-CN/tools.html">工具 | Org mode</a>
</p>
</div>
</li>
<li><a id="orgcecd717"></a>Org with Zotero<br>
<div class="outline-text-5" id="text-orgcecd717">
<p>
书和论文的PDF文件，我现在全部放在<a href="https://www.zotero.org/">Zotero</a>。快速复制单个笔记到org-mode也挺简单：
</p>

<p>
通过下载这个<a href="https://raw.githubusercontent.com/Zotero-ODF-Scan/zotero-odf-scan/master/attic/Zotero%20Select%20Item.js">文件</a>到 zotero 资料目录下的 translators 文件下，将其命名为 <code>Zotero Select Item.js</code> ，重启 Zotero 后在编辑-&gt; 首选项中配置便捷复制的 Item Format 为 Zotero Select Item:
</p>

<p>
这样就可以自定义复制粘贴过去的格式了。
</p>


<div class="org-src-container">
<pre class="src src-js"><span style="color: #8c8c8c;">{</span>
<span style="color: #A1D08E;">"translatorID"</span>:<span style="color: #A1D08E;">"76a79119-3a32-453a-a0a9-c92640e3c93b"</span>,
<span style="color: #A1D08E;">"translatorType"</span>:2,
<span style="color: #A1D08E;">"label"</span>:<span style="color: #A1D08E;">"Zotero Select Item"</span>,
<span style="color: #A1D08E;">"creator"</span>:<span style="color: #A1D08E;">"Scott Campbell, Avram Lyon"</span>,
<span style="color: #A1D08E;">"target"</span>:<span style="color: #A1D08E;">"html"</span>,
<span style="color: #A1D08E;">"minVersion"</span>:<span style="color: #A1D08E;">"2.0"</span>,
<span style="color: #A1D08E;">"maxVersion"</span>:<span style="color: #A1D08E;">""</span>,
<span style="color: #A1D08E;">"priority"</span>:200,
<span style="color: #A1D08E;">"inRepository"</span>:<span style="color: #95a99f;">false</span>,
<span style="color: #A1D08E;">"lastUpdated"</span>:<span style="color: #A1D08E;">"2012-07-17 22:27:00"</span>
<span style="color: #8c8c8c;">}</span>

<span style="color: #FFA657;">function</span> <span style="color: #96a6c8;">doExport</span><span style="color: #8c8c8c;">()</span> <span style="color: #8c8c8c;">{</span>
        <span style="color: #FFA657;">var</span> <span style="color: #f4f4ff;">item</span>;
        <span style="color: #FFA657;">while</span><span style="color: #93a8c6;">(</span>item = Zotero.nextItem<span style="color: #b0b1a3;">()</span><span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span>
                Zotero.write<span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"zotero://select/items/"</span><span style="color: #b0b1a3;">)</span>;
                <span style="color: #FFA657;">var</span> <span style="color: #f4f4ff;">library_id</span> = item.libraryID ? item.libraryID : 0;
                Zotero.write<span style="color: #b0b1a3;">(</span>library_id+<span style="color: #A1D08E;">"_"</span>+item.key<span style="color: #b0b1a3;">)</span>;
        <span style="color: #93a8c6;">}</span>
<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
然后在Emacs的配置文件里加上：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span>org-link-set-parameters <span style="color: #A1D08E;">"zotero"</span> <span style="color: #79C0FF;">:follow</span>
                        <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">lambda</span> <span style="color: #b0b1a3;">(</span>zpath<span style="color: #b0b1a3;">)</span>
                        <span style="color: #b0b1a3;">(</span>browse-url
                            <span style="color: #787878;">;; </span><span style="color: #787878;">we get the "zotero:"-less url, so we put it back.
</span>                            <span style="color: #97b098;">(</span>format <span style="color: #A1D08E;">"zotero:%s"</span> zpath<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
Ref：
</p>

<ul class="org-ul">
<li><a href="https://hsingko.pages.dev/post/2022/07/04/zotero-and-orgmode/">https://hsingko.pages.dev/post/2022/07/04/zotero-and-orgmode/</a></li>
<li><a href="https://www.mkbehr.com/posts/a-research-workflow-with-zotero-and-org-mode/">https://www.mkbehr.com/posts/a-research-workflow-with-zotero-and-org-mode/</a></li>
</ul>
</div>
</li>
<li><a id="org5f94afc"></a>Org-mode美化<br>
<div class="outline-text-5" id="text-org5f94afc">
<p>
我觉得原生的就挺好看，可读性也还好。
</p>

<ul class="org-ul">
<li><a href="https://github.com/minad/org-modern">minad/org-modern: :unicorn: Modern Org Style</a></li>
<li><a href="https://emacs-china.org/t/org/19458/3?page=3">想向各位道友收集一下美化 org 的配置 - Org-mode - Emacs China</a></li>
<li><a href="https://github.com/coldnew/pangu-spacing">coldnew/pangu-spacing：emacs minor-mode用于在中文/日文/韩文和英文字符之间添加空格</a></li>
<li><a href="https://remacs.fun/posts/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%97%B6%E4%BB%A3%E6%88%91%E4%BB%AC%E6%80%8E%E4%B9%88%E7%8E%A9emacs1.-%E4%B8%AD%E8%8B%B1%E6%96%87%E8%BE%93%E5%85%A5%E6%97%B6%E7%9A%84%E7%A9%BA%E6%A0%BC/">大模型时代我们怎么玩Emacs：1. 中英文输入时的空格 | remacs的世界</a> 比pangu实用。</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;; </span><span style="color: #787878;">&#35774;&#32622;&#26631;&#39064;&#22823;&#23567;
</span><span style="color: #8c8c8c;">(</span>after! org
  <span style="color: #93a8c6;">(</span>custom-set-faces!
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-1 <span style="color: #79C0FF;">:weight</span> extra-bold <span style="color: #79C0FF;">:height</span> 1.25<span style="color: #b0b1a3;">)</span>
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-2 <span style="color: #79C0FF;">:weight</span> bold <span style="color: #79C0FF;">:height</span> 1.15<span style="color: #b0b1a3;">)</span>
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-3 <span style="color: #79C0FF;">:weight</span> bold <span style="color: #79C0FF;">:height</span> 1.12<span style="color: #b0b1a3;">)</span>
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-4 <span style="color: #79C0FF;">:weight</span> semi-bold <span style="color: #79C0FF;">:height</span> 1.09<span style="color: #b0b1a3;">)</span>
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-5 <span style="color: #79C0FF;">:weight</span> semi-bold <span style="color: #79C0FF;">:height</span> 1.06<span style="color: #b0b1a3;">)</span>
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-6 <span style="color: #79C0FF;">:weight</span> semi-bold <span style="color: #79C0FF;">:height</span> 1.03<span style="color: #b0b1a3;">)</span>
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-8 <span style="color: #79C0FF;">:weight</span> semi-bold<span style="color: #b0b1a3;">)</span>
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>outline-9 <span style="color: #79C0FF;">:weight</span> semi-bold<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span>custom-set-faces!
    <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span>org-document-title <span style="color: #79C0FF;">:height</span> 1.2<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;;</span><span style="color: #787878;">&#23383;&#20307;&#65292;&#35774;&#32622;&#27491;&#25991;&#22823;&#23567;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> doom-font <span style="color: #93a8c6;">(</span>font-spec <span style="color: #79C0FF;">:family</span> <span style="color: #A1D08E;">"&#38686;&#40540;&#25991;&#26999;&#31561;&#23485;"</span> <span style="color: #79C0FF;">:weight</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">regular</span> <span style="color: #79C0FF;">:size</span> 14<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">&#35774;&#32622;&#34892;&#20869;make up&#65292;&#30452;&#25509;&#26174;&#31034;*&#31895;&#20307;*&#65292;/&#26012;&#20307;/&#65292;=&#39640;&#20142;=&#65292;~&#20195;&#30721;~
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> org-hide-emphasis-markers t<span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">&#30424;&#21476;&#65292;&#20013;&#33521;&#25991;&#28151;&#21512;&#25490;&#29256;&#32654;&#21270;
</span><span style="color: #787878;">;;</span><span style="color: #787878;">https://github.com/coldnew/pangu-spacing
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">use-package</span> pangu-spacing<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>add-hook <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-mode-hook</span>
          <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span>lambda <span style="color: #b0b1a3;">()</span>
             <span style="color: #b0b1a3;">(</span>set <span style="color: #97b098;">(</span>make-local-variable <span style="color: #FFA657;">'</span><span style="color: #95a99f;">pangu-spacing-real-insert-separtor</span><span style="color: #97b098;">)</span> t<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</li>
<li><a id="orgfb4a456"></a>Org-protocol<br>
<div class="outline-text-5" id="text-orgfb4a456">
<p>
Org-protocol可以在Emacs里更方便的剪藏网页内容，做after reading。也不是必须，多切换一次窗口也还好。
</p>

<ul class="org-ul">
<li><p>
protocol
</p>

<p>
<a href="https://emacs-china.org/t/org-capture/14190">求助: 在网页剪藏时用org-capture模板生成独立文件名 - Org-mode - Emacs China</a>
</p>

<p>
<a href="https://emacs-china.org/t/org-mode/8189/7">用org-mode做网页书签的可以进来看一下 - Org-mode - Emacs China</a>
</p>

<p>
<a href="https://emacs-china.org/t/org-protocol/8684">什么样才是正确的org-protocol姿势 - Org-mode - Emacs China</a>
</p>

<p>
<a href="https://www.orgroam.com/manual.html#Mac-OS">Org-roam User Manual-org-protocol</a>
</p></li>

<li><p>
插入网页连接：
</p>

<p>
<a href="https://emacs-china.org/t/emacs-firefox-org-link/23661">技巧分享：在 emacs 中获取 firefox 当前标签页并生成 org link</a>
</p>

<p>
<a href="https://github.com/alphapapa/org-protocol-capture-html">org-protocol-capture-html </a>
</p>

<p>
或利用org-roam-capture-ref： <a href="https://www.zmonster.me/2020/06/27/org-roam-introduction.html">https://www.zmonster.me/2020/06/27/org-roam-introduction.html</a>
</p>

<p>
或者使用浏览器插件：<a href="https://github.com/k08045kk/CopyTabTitleUrl">k08045kk/CopyTabTitleUrl</a>
</p>

<p>
Firefox这个反骨仔，经常不适配各种系统。比如不支持mac的applescript。
</p></li>
</ul>
</div>
</li>
<li><a id="org7865da7"></a>网页摘录和 after-reading<br>
<div class="outline-text-5" id="text-org7865da7">
<p>
after-reading 转入 hoarder 了：<a href="https://www.vandee.art/blog/2025-07-04-after-reading-emacs-hoarder.html">稍后阅读新方案 Emacs-Hoarder</a> 。<a href="https://github.com/obsidianmd/obsidian-clipper">Obsidian Web Clipper</a> 这个开源的浏览器插件内置一个阅读器，清除网页样式，瞬间清爽，实在太好用了。沉浸式翻译爆雷之后，改用 <a href="https://github.com/Bistutu/FluentRead">流畅阅读 (FluentRead)</a> , <a href="https://github.com/OwO-Network/DeepLX">DeepLX</a> 和 openrouter 免费的 API 日常翻译基本够用了。
</p>

<p>
利用org-capture，做剪藏和摘录很方便。保存在 <code>clip.org</code> 文件里，可以在agenda里按时间线回顾，由于agenda里只有标题，也起到了类似Anki卡片回顾的作用：
</p>


<figure id="org69f62bd">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/clip.gif" class="img" width="50%" height="50%">

</figure>

<p>
有一个JavaScript我一直在用，可以选定一个网页的特定内容，在翻译和剪藏的时候挺有用，同时也微微提升了一点阅读体验。
下面的代码保存到书签，单击书签就可以了：
</p>

<div class="org-src-container">
<pre class="src src-javascript">javascript:<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">function</span><span style="color: #93a8c6;">(){</span><span style="color: #FFA657;">var</span> <span style="color: #f4f4ff;">e</span>=document.body;<span style="color: #FFA657;">const</span> <span style="color: #f4f4ff;">n</span>=document.head.appendChild<span style="color: #b0b1a3;">(</span>document.createElement<span style="color: #97b098;">(</span><span style="color: #A1D08E;">"style"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>;n.textContent=<span style="color: #A1D08E;">".mainonly { outline: 2px solid red; }"</span>;<span style="color: #FFA657;">const</span> <span style="color: #f4f4ff;">t</span>=CSS.supports<span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"selector(:has(*))"</span><span style="color: #b0b1a3;">)</span>;<span style="color: #FFA657;">function</span> o<span style="color: #b0b1a3;">(</span><span style="color: #f4f4ff;">n</span><span style="color: #b0b1a3;">){</span>n <span style="color: #FFA657;">instanceof</span> <span style="color: #95a99f;">HTMLElement</span>&amp;&amp;<span style="color: #97b098;">(</span>e.classList.remove<span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"mainonly"</span><span style="color: #aebed8;">)</span>,<span style="color: #aebed8;">(</span>e=n<span style="color: #aebed8;">)</span>.classList.add<span style="color: #aebed8;">(</span><span style="color: #A1D08E;">"mainonly"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">}</span><span style="color: #FFA657;">function</span> s<span style="color: #b0b1a3;">(</span>e<span style="color: #b0b1a3;">){</span>o<span style="color: #97b098;">(</span>e.target<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">}</span><span style="color: #FFA657;">function</span> a<span style="color: #b0b1a3;">(</span>o<span style="color: #b0b1a3;">){</span><span style="color: #FFA657;">if</span><span style="color: #97b098;">(</span>o.preventDefault<span style="color: #aebed8;">()</span>,t<span style="color: #97b098;">)</span>n.textContent=<span style="color: #A1D08E;">":not(:has(.mainonly), .mainonly, .mainonly *) { display: none; }"</span>;<span style="color: #FFA657;">else</span><span style="color: #97b098;">{</span>n.textContent=<span style="color: #A1D08E;">":not(.mainonly *, .mainonly-ancestor) { display: none; }"</span>;<span style="color: #FFA657;">var</span> <span style="color: #f4f4ff;">s</span>=e;<span style="color: #FFA657;">do</span><span style="color: #aebed8;">{</span>s.classList.add<span style="color: #b0b0b3;">(</span><span style="color: #A1D08E;">"mainonly-ancestor"</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">}</span><span style="color: #FFA657;">while</span><span style="color: #aebed8;">(</span>s=s.parentElement<span style="color: #aebed8;">)</span><span style="color: #97b098;">}</span>l<span style="color: #97b098;">()</span><span style="color: #b0b1a3;">}</span><span style="color: #FFA657;">function</span> i<span style="color: #b0b1a3;">(</span>n<span style="color: #b0b1a3;">){</span>n.preventDefault<span style="color: #97b098;">()</span>,n.deltaY&lt;0?o<span style="color: #97b098;">(</span>e.parentElement<span style="color: #97b098;">)</span>:o<span style="color: #97b098;">(</span>e.firstElementChild<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">}</span><span style="color: #FFA657;">function</span> l<span style="color: #b0b1a3;">(){</span>document.removeEventListener<span style="color: #97b098;">(</span><span style="color: #A1D08E;">"mouseover"</span>,s<span style="color: #97b098;">)</span>,document.removeEventListener<span style="color: #97b098;">(</span><span style="color: #A1D08E;">"click"</span>,a<span style="color: #97b098;">)</span>,document.removeEventListener<span style="color: #97b098;">(</span><span style="color: #A1D08E;">"wheel"</span>,i<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">}</span>document.addEventListener<span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"mouseover"</span>,s<span style="color: #b0b1a3;">)</span>,document.addEventListener<span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"click"</span>,a<span style="color: #b0b1a3;">)</span>,document.addEventListener<span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"wheel"</span>,i,<span style="color: #97b098;">{</span>passive:!1<span style="color: #97b098;">}</span><span style="color: #b0b1a3;">)</span>,document.addEventListener<span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"keydown"</span>,<span style="color: #97b098;">(</span><span style="color: #FFA657;">function</span> o<span style="color: #aebed8;">(</span>s<span style="color: #aebed8;">){</span><span style="color: #FFA657;">if</span><span style="color: #b0b0b3;">(</span><span style="color: #A1D08E;">"Escape"</span>===s.key&amp;&amp;<span style="color: #90a890;">(</span>n.remove<span style="color: #a2b6da;">()</span>,document.removeEventListener<span style="color: #a2b6da;">(</span><span style="color: #A1D08E;">"keydown"</span>,o<span style="color: #a2b6da;">)</span>,l<span style="color: #a2b6da;">()</span>,e?.classList.remove<span style="color: #a2b6da;">(</span><span style="color: #A1D08E;">"mainonly"</span><span style="color: #a2b6da;">)</span>,!t<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #FFA657;">for</span><span style="color: #b0b0b3;">(</span><span style="color: #FFA657;">const</span> <span style="color: #f4f4ff;">e</span> <span style="color: #FFA657;">of</span> document.getElementsByClassName<span style="color: #90a890;">(</span><span style="color: #A1D08E;">"mainonly-ancestor"</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>e.classList.remove<span style="color: #b0b0b3;">(</span><span style="color: #A1D08E;">"mainonly-ancestor"</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">}</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">}()</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="org6eb1bd0"></a>tools<br>
<div class="outline-text-6" id="text-org6eb1bd0">
<ul class="org-ul">
<li><p>
网站：<a href="https://jina.ai/reader/">https://jina.ai/reader/</a>
</p>

<p>
Github：<a href="https://github.com/jina-ai/reader">https://github.com/jina-ai/reader</a>
</p>

<p>
它可以提取网页内容并转换为markdown格式，还支持直接搜索，支持API。
</p>

<p>
Reader does two things:
</p>

<ul class="org-ul">
<li><b>Read</b>: It converts any URL to an <b>LLM-friendly</b> input with <code>https://r.jina.ai/https://your.url</code>. Get improved output for your agent and RAG systems at no cost.</li>
<li><b>Search</b>: It searches the web for a given query with <code>https://s.jina.ai/your+query</code>. This allows your LLMs to access the latest world knowledge from the web.</li>
</ul>

<p>
添加下面代码到书签保存，点击书签就可以提取网页内容到markdown格式了。
</p>

<div class="org-src-container">
<pre class="src src-javascript">  javascript: <span style="color: #FFA657;">var</span> <span style="color: #f4f4ff;">currentUrl</span> = window.location.href;<span style="color: #FFA657;">var</span> <span style="color: #f4f4ff;">newUrl</span> = <span style="color: #A1D08E;">"https://r.jina.ai/"</span> + currentUrl;window.open<span style="color: #8c8c8c;">(</span>newUrl, <span style="color: #A1D08E;">'_blank'</span><span style="color: #8c8c8c;">)</span>;window.history.pushState<span style="color: #8c8c8c;">(</span><span style="color: #93a8c6;">{}</span>, <span style="color: #A1D08E;">''</span>, currentUrl<span style="color: #8c8c8c;">)</span>;
</pre>
</div></li>
</ul>


<p>
以这个工具为跳板，就可以干许多有意思的事情了。
</p>

<ul class="org-ul">
<li><p>
<a href="https://sspai.com/post/89828">u-Sir/drag-to-preview</a>，最近发现一个Firefox浏览器插件，可以选中网页链接拖拽弹出单独的窗口预览网页，在窗口外区域鼠标点击即可关闭，很符合我的胃口。
</p>

<p>
已改名为：<a href="https://github.com/u-Sir/peek-pop">https://github.com/u-Sir/peek-pop</a>
</p></li>
</ul>
</div>
</li>
</ul>
</li>
<li><a id="orgf993bbc"></a>输入法设置<br>
<div class="outline-text-5" id="text-orgf993bbc">
<p>
由于使用了evil，如果使用系统的输入法，每次在 <code>:w</code> 保存的时候，需要来回切换中英。推荐两种解决方案：SIS和pyim。
</p>
</div>
<ul class="org-ul">
<li><a id="orgff26293"></a>SIS<br>
<div class="outline-text-6" id="text-orgff26293">
<p>
<a href="https://github.com/laishulu/emacs-smart-input-source">emacs-smart-input-source</a> 是一个可以自动切换输入法的Emacs包。
</p>

<p>
之前在配置SIS的时候，可能是mac系统的问题，安装macism之后，Emacs一直弹窗辅助功能设置，最近突然好了。SIS比pyim方便，不需要再内置输入法，可以直接用系统的输入法。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">use-package</span> sis
  <span style="color: #787878;">;; </span><span style="color: #787878;">:hook
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">enable the /context/ and /inline region/ mode for specific buffers
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">(((text-mode prog-mode) . sis-context-mode)
</span>  <span style="color: #787878;">;;  </span><span style="color: #787878;">((text-mode prog-mode) . sis-inline-mode))
</span>
  <span style="color: #79C0FF;">:config</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">For MacOS
</span>  <span style="color: #93a8c6;">(</span>sis-ism-lazyman-config

   <span style="color: #787878;">;; </span><span style="color: #787878;">English input source may be: "ABC", "US" or another one.
</span>   <span style="color: #787878;">;; </span><span style="color: #787878;">"com.apple.keylayout.ABC"
</span>   <span style="color: #A1D08E;">"com.apple.keylayout.ABC"</span>

   <span style="color: #787878;">;; </span><span style="color: #787878;">Other language input source: "rime", "sogou" or another one.
</span>   <span style="color: #787878;">;; </span><span style="color: #787878;">"im.rime.inputmethod.Squirrel.Rime"
</span>   <span style="color: #A1D08E;">"im.rime.inputmethod.Squirrel.Hans"</span><span style="color: #93a8c6;">)</span>

  <span style="color: #787878;">;; </span><span style="color: #787878;">enable the /cursor color/ mode
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">(sis-global-cursor-color-mode t)
</span>  <span style="color: #787878;">;; </span><span style="color: #787878;">enable the /respect/ mode
</span>  <span style="color: #93a8c6;">(</span>sis-global-respect-mode t<span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">enable the /context/ mode for all buffers
</span>  <span style="color: #93a8c6;">(</span>sis-global-context-mode t<span style="color: #93a8c6;">)</span>
  <span style="color: #787878;">;; </span><span style="color: #787878;">enable the /inline english/ mode for all buffers
</span>  <span style="color: #93a8c6;">(</span>sis-global-inline-mode t<span style="color: #93a8c6;">)</span>
  <span style="color: #8c8c8c;">)</span>

</pre>
</div>
</div>
</li>
<li><a id="org761fc2c"></a>pyim<br>
<div class="outline-text-6" id="text-org761fc2c">
<p>
<a href="https://github.com/tumashu/pyim">pyim</a> 也可以达到相同的效果。只是这个输入法是Emacs内置的。
</p>

<p>
可能是由于我用Homebrew安装的Emacs-plus，再加上使用的doomemacs，emacs报错：编译时无法找到 <code>emacs-module.h</code> ，一直无法在Emacs里加载 <a href="https://github.com/DogLooksGood/emacs-rime">emacs-rime</a> 。Emacs-rime的<a href="https://github.com/DogLooksGood/emacs-rime/blob/master/INSTALLATION.org#%E7%BC%96%E8%AF%91%E6%97%B6%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0-emacs-moduleh-">文档</a>里写加上 <code>(rime-emacs-module-header-root "~/emacs/include")</code> ，我试了所有的Emacs可能的路径都不行。我在Linux-Ubuntu虚拟机里，没有任何问题。
</p>

<p>
这个输入法是Emacs里内置的，如果没有指定内置的输入法，会使用系统自带的。把内置的输入法设置好，同时也解决了中英混合输入的问题，在写代码的时候，来回切换输入法太磨叽了。
</p>

<p>
不知道是什么没设置好，每次新打开一个buffer都需要重新激活pyim，暂时先加了一个org-mode的hook，在org-mode里自动激活pyim。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span>add-hook <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-mode-hook</span>
          <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">lambda</span> <span style="color: #b0b1a3;">()</span>
            <span style="color: #b0b1a3;">(</span>toggle-input-method<span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">setq</span> default-input-method <span style="color: #A1D08E;">"pyim"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>



<p>
<b>pyim 设置</b> ：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;;</span><span style="color: #787878;">&#36755;&#20837;&#27861; https://github.com/tumashu/pyim
</span><span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #A1D08E;">"C-</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E; font-weight: bold;">\</span><span style="color: #A1D08E;">"</span><span style="color: #93a8c6;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">toggle-input-method</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">use-package</span> pyim
  <span style="color: #79C0FF;">:init</span>
  <span style="color: #79C0FF;">:config</span>
  <span style="color: #93a8c6;">(</span>pyim-default-scheme <span style="color: #FFA657;">'</span><span style="color: #95a99f;">xiaohe-shuangpin</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">setq</span> default-input-method <span style="color: #A1D08E;">"pyim"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">use-package</span> pyim-basedict
  <span style="color: #79C0FF;">:config</span>
  <span style="color: #93a8c6;">(</span>pyim-basedict-enable<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span>add-hook <span style="color: #FFA657;">'</span><span style="color: #95a99f;">org-mode-hook</span>
          <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">lambda</span> <span style="color: #b0b1a3;">()</span>
            <span style="color: #b0b1a3;">(</span>toggle-input-method<span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span><span style="color: #FFA657;">setq</span> default-input-method <span style="color: #A1D08E;">"pyim"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">&#35774;&#32622; pyim &#25506;&#38024;
</span><span style="color: #787878;">;; </span><span style="color: #787878;">&#35774;&#32622; pyim &#25506;&#38024;&#35774;&#32622;&#65292;&#36825;&#26159; pyim &#39640;&#32423;&#21151;&#33021;&#35774;&#32622;&#65292;&#21487;&#20197;&#23454;&#29616; *&#26080;&#30171;* &#20013;&#33521;&#25991;&#20999;&#25442; :-)
</span><span style="color: #787878;">;; </span><span style="color: #787878;">&#25105;&#33258;&#24049;&#20351;&#29992;&#30340;&#20013;&#33521;&#25991;&#21160;&#24577;&#20999;&#25442;&#35268;&#21017;&#26159;&#65306;
</span><span style="color: #787878;">;; </span><span style="color: #787878;">1. &#20809;&#26631;&#21482;&#26377;&#22312;&#27880;&#37322;&#37324;&#38754;&#26102;&#65292;&#25165;&#21487;&#20197;&#36755;&#20837;&#20013;&#25991;&#12290;
</span><span style="color: #787878;">;; </span><span style="color: #787878;">2. &#20809;&#26631;&#21069;&#26159;&#27721;&#23383;&#23383;&#31526;&#26102;&#65292;&#25165;&#33021;&#36755;&#20837;&#20013;&#25991;&#12290;
</span><span style="color: #787878;">;; </span><span style="color: #787878;">3. &#20351;&#29992; M-j &#24555;&#25463;&#38190;&#65292;&#24378;&#21046;&#23558;&#20809;&#26631;&#21069;&#30340;&#25340;&#38899;&#23383;&#31526;&#20018;&#36716;&#25442;&#20026;&#20013;&#25991;&#12290;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq-default</span> pyim-english-input-switch-functions
              <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span><span style="color: #787878;">;; </span><span style="color: #787878;">pyim-probe-dynamic-english
</span>                pyim-probe-isearch-mode
                <span style="color: #787878;">;; </span><span style="color: #787878;">pyim-probe-program-mode
</span>                pyim-probe-org-structure-template
                pyim-probe-evil-normal-mode
                <span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq-default</span> pyim-punctuation-half-width-functions
              <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span>pyim-probe-punctuation-line-beginning
                pyim-probe-punctuation-after-punctuation<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">&#38190;&#20301;&#32465;&#23450;&#65292;&#35299;&#32465;&#65292;&#36716;&#25442;
</span><span style="color: #787878;">;; </span><span style="color: #787878;">&#20462;&#25913;&#40664;&#35748;&#38190;&#20301;&#26144;&#23556;&#65292;&#21462;&#28040;command&#38190;&#20301;
</span><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">setq</span> mac-option-modifier <span style="color: #FFA657;">'</span><span style="color: #95a99f;">meta</span><span style="color: #8c8c8c;">)</span>

</pre>
</div>



<p>
Ref：
</p>

<ul class="org-ul">
<li><a href="https://emacs-china.org/t/os-smart-input-source/13436">（重新设计）中英文混打：OS输入法管理包 smart-input-source - Emacs-general - Emacs China</a></li>
</ul>
</div>
</li>
<li><a id="org86d2ab6"></a>RIME<br>
<div class="outline-text-6" id="text-org86d2ab6">

<figure id="orga76d20e">
<img src="https://pic.vandee.art/images/rime.png" class="img" width="50%" height="50%">

</figure>

<p>
如果说PKM是纸，那么输入法就是笔。
</p>

<p>
再次强烈推荐 <a href="https://rime.im/">RIME | 中州韻輸入法引擎</a>，配合 <a href="https://github.com/iDvel/rime-ice">iDvel/rime-ice: Rime 配置：雾凇拼音 | 长期维护的简体词库</a>，多平台多端同步。已经使用了几年，非常巴适，手机端也可以同步配置。
</p>

<p>
以前输入法就各种偷偷记录用户输入习惯，现在各个输入法又还要内置AI再记录一遍。本地配置、不需要联网的输入法是我的刚需，更何况，rime还可以自挂词库。
</p>

<p>
一个巨坑，最近的RIME更新在<a href="https://github.com/rime/squirrel/releases/tag/1.0.0">Release 1.0.0 · rime/squirrel</a>版本里改变了候选词横向和竖向的设置：
</p>

<div class="org-src-container">
<pre class="src src-nil">style/horizontal 將徹底移除，雖然本版程序仍支持，但會被新控件的默認值覆蓋
請使用 candidate_list_layout: stacked/linear 和 text_orientation: horizontal/vertical
</pre>
</div>

<p>
而且最好直接在输入法外观的配置文件里，修改输入法外观的配置，而不是通用配置，反正我在通用设置里不起作用。
</p>

<p>
<b>下面是简单的安装步骤</b> ：
</p>

<div class="org-src-container">
<pre class="src src-bash">;; mac:
;; mac rime: https://rime.im/download/
Homebrew: brew install --cask squirrel
&#25110;&#32773;&#30452;&#25509;&#19979;&#36733;
;; mac rime-ice
&#20351;&#29992;&#19996;&#39118;&#30772; plum &#23433;&#35013;: https://github.com/rime/plum
curl -fsSL https://raw.githubusercontent.com/rime/plum/master/rime-install | bash

&#23433;&#35013; rime-ice:
&#8478; &#23433;&#35013;&#25110;&#26356;&#26032;&#20840;&#37096;&#25991;&#20214;
bash rime-install iDvel/rime-ice:others/recipes/full

&#8478; &#23433;&#35013;&#25110;&#26356;&#26032;&#25152;&#26377;&#35789;&#24211;&#25991;&#20214;<span style="color: #8c8c8c;">&#65288;</span>&#21253;&#21547;&#19979;&#38754;&#19977;&#20010;<span style="color: #8c8c8c;">&#65289;</span>
bash rime-install iDvel/rime-ice:others/recipes/all_dicts

&#8478; &#23433;&#35013;&#25110;&#26356;&#26032;&#25340;&#38899;&#35789;&#24211;&#25991;&#20214;<span style="color: #8c8c8c;">&#65288;</span> cn_dicts/ &#30446;&#24405;&#20869;&#25152;&#26377;&#25991;&#20214;<span style="color: #8c8c8c;">&#65289;</span>
bash rime-install iDvel/rime-ice:others/recipes/cn_dicts

&#8478; &#23433;&#35013;&#25110;&#26356;&#26032;&#33521;&#25991;&#35789;&#24211;&#25991;&#20214;<span style="color: #8c8c8c;">&#65288;</span> en_dicts/ &#30446;&#24405;&#20869;&#25152;&#26377;&#25991;&#20214;<span style="color: #8c8c8c;">&#65289;</span>
bash rime-install iDvel/rime-ice:others/recipes/en_dicts

&#8478; &#23433;&#35013;&#25110;&#26356;&#26032; opencc <span style="color: #8c8c8c;">&#65288;</span> opencc/ &#30446;&#24405;&#20869;&#25152;&#26377;&#25991;&#20214;<span style="color: #8c8c8c;">&#65289;</span>
bash rime-install iDvel/rime-ice:others/recipes/opencc

;;&#25110;&#20351;&#29992; rime-auto-deploy&#65306;https://github.com/Mark24Code/rime-auto-deploy&#65292;&#36825;&#20010;&#21644;plum&#21482;&#29992;&#36873;&#19968;&#20010;&#12290;

=======================================================
;;Linux
ibus:
https://github.com/rime/home/wiki/RimeWithIBus
sudo apt-get install ibus-rime                   <span style="color: #787878;">#</span><span style="color: #787878;">ibus
</span>
fcitx5:
sudo pacman -Sy fcitx5-rime                      <span style="color: #787878;"># </span><span style="color: #787878;">Arch Linux
</span>sudo apt update &amp;&amp; sudo apt install fcitx5-rime  <span style="color: #787878;"># </span><span style="color: #787878;">Ubuntu / Debian / Deepin
</span>sudo zypper install fcitx5-rime                  <span style="color: #787878;"># </span><span style="color: #787878;">OpenSUSE
</span>sudo dnf install fcitx5-rime                     <span style="color: #787878;"># </span><span style="color: #787878;">Fedora
</span>
plum and rime-ice&#65306;
git clone --depth 1 https://github.com/rime/plum ~/plum

;; &#20999;&#25442;&#21040;&#19996;&#39118;&#30772;&#30340;&#30446;&#24405;
<span style="color: #79C0FF;">cd</span> ~/plum

;; &#22914;&#26524;&#20320;&#20351;&#29992;Fcitx5&#65292;&#20320;&#38656;&#35201;&#21152;&#20837;&#21442;&#25968;&#65292;&#35753;&#19996;&#39118;&#30772;&#25226;&#37197;&#32622;&#25991;&#20214;&#20889;&#21040;&#27491;&#30830;&#30340;&#20301;&#32622;
<span style="color: #f4f4ff;">rime_frontend</span>=fcitx5-rime bash rime-install iDvel/rime-ice:others/recipes/full

;; &#22914;&#26524;&#20320;&#26159;&#29992;IBus&#65292;&#21017;&#19981;&#38656;&#21152;&#21442;&#25968;&#65292;&#22240;&#20026;&#19996;&#39118;&#30772;&#40664;&#35748;&#26159;&#20026;IBus&#29256;&#30340;RIME&#25171;&#36896;&#12290;
bash rime-install iDvel/rime-ice:others/recipes/full

</pre>
</div>


<p>
其他可以参考下面的文章:
</p>

<ul class="org-ul">
<li><a href="https://sspai.com/post/84373#!">自由输入法 RIME 简明配置指南 - 少数派</a></li>

<li><a href="https://sspai.com/post/89281">RIME + 雾凇拼音，打造绝佳的开源文字输入体验 - 少数派</a></li>

<li><a href="https://sspai.com/post/90068">让 RIME 体验更上一层楼：如何用 MediaWiki 扩展词库 - 少数派</a>  导入wiki</li>

<li><a href="https://github.com/gshang2017/rime-dict">gshang2017/rime-dict: RIME输入法(拼音)自用词库(包含英语，基础，维基，搜狗等词库)，词频基于腾讯AI向量词库逆序生成。</a>  自建词库，导入专业领域词汇</li>
</ul>
</div>
</li>
</ul>
</li>
<li><a id="org60114b1"></a>Others<br>
<div class="outline-text-5" id="text-org60114b1">
<ul class="org-ul">
<li><a href="https://github.com/lijigang/100-questions-about-orgmode">lijigang/100-questions-about-orgmode: It's all about <b>orgmode</b> !</a></li>

<li><a href="https://emacs-china.org/t/emacs-immersive-translate-emacs/24990">emacs-immersive-translate: Emacs 版本的沉浸式翻译（支持多个翻译后端） - Emacs-general - Emacs China</a></li>

<li><a href="https://emacs-china.org/t/org-ql-columnview-org-roam-org-capture-org-super-links/21599">混用 org-ql、columnview、org-roam、org-capture、org-super-links 塑造我的笔记流程 - Org-mode - Emacs China</a></li>

<li><a href="https://emacs-china.org/t/emacs-package/19922">我想分享一下我的emacs配置和学习思路，并向大家介绍一些我觉得有用的package - Emacs-general - Emacs China</a></li>

<li><p>
<a href="https://emacs-china.org/t/ekg-flomo/27505/12">https://emacs-china.org/t/ekg-flomo/27505/12</a>
</p>

<p>
<a href="https://github.com/ahyatt/ekg">https://github.com/ahyatt/ekg</a>
</p>

<p>
ekg：提供一个类似obsidian里dataview的查询汇总功能
</p></li>

<li><p>
<a href="https://github.com/protesilaos/denote">https://github.com/protesilaos/denote</a>
</p>

<p>
denote：提供类似org-roam的双链，快速插入等功能
</p></li>

<li><p>
Emacs里的其他笔记相关使用包
</p>

<p>
<a href="https://github.com/yibie/org-supertag">yibie/org-supertag: Make tag system great again, based on org-mode.</a>
</p>

<p>
<a href="https://github.com/meedstrom/org-node">meedstrom/org-node: A notetaking system like Roam using Emacs Org-mode</a>
</p>

<p>
<a href="https://github.com/jrblevin/deft">jrblevin/deft: Deft for Emacs</a>
</p>

<p>
<a href="https://github.com/caiorss/org-wiki">caiorss/org-wiki: Wiki for Emacs org-mode built on top of Emacs org-mode.</a>
</p>

<p>
<a href="https://github.com/Kungsgeten/org-brain">Kungsgeten/org-brain: Org-mode wiki + concept-mapping</a>
</p>

<p>
<a href="https://github.com/weirdNox/org-noter">weirdNox/org-noter: Emacs document annotator, using Org-mode</a>
</p>

<p>
<a href="https://github.com/toshism/org-super-links">toshism/org-super-links: Package to create links with auto backlinks</a>
</p>

<p>
<a href="https://github.com/alphapapa/org-ql">alphapapa/org-ql: A searching tool for Org-mode.</a>
</p>

<p>
<a href="https://www.armindarvish.com/post/web_omni_search_in_emacs_with_consult-web/">Web/Omni Search In Emacs with consult-web or Ditching the Browser's Default Search Engine</a>
</p></li>

<li><a href="https://mischavandenburg.com/zet/neovim-zettelkasten/">我的 Neovim Zettelkasten：我如何使用 Vim 和 Bash 在 Markdown 中做笔记 |米沙·范登伯格</a> 很强，之前用bash来生成md笔记的思路一下子扩展了。使用CLI来做笔记是一个很终极的方案。</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgdc916a1" class="outline-3">
<h3 id="orgdc916a1">PKM with LLM</h3>
<div class="outline-text-3" id="text-orgdc916a1">
<p>
2025-11-15 added: 和 AI 相关的整理到了 <a href="https://www.vandee.art/blog/2025-08-02-pkm-manual-combined-ai.html">PKM（个人知识管理）构建手册 - with AI</a> 。关于 RAG 和各类知识文档管理聚合项目，我目前的想法是，如果没有成千上万的笔记，或者专业学习和科研，普通的 tag+关键字检索 足够用了，对笔记和知识有了适合自己的管理方法，AI 的检索其实不那么必须，通过传统检索方法找到相关的，再结合 AI 更简单高效，AI 和 RAG 的相关性也会高很多。再一个，我个人还是习惯自己完成最原始的笔记，AI 帮助我发散思考，而不是生成笔记。
</p>

<p>
本地笔记的优势除了隐私性，再就是，数据在自己手上，就可以干很多事。把本地的笔记文档结合LLM做思维拓展，基于个人思维习惯更精确的问答。如果说有时候双链不足以串联整个思维链条，下面这些工具如虎添翼。
</p>

<p>
看到一个大佬已经用Ollama、RAG在MacBook Pro M3 Max上实现了基于obsidian的个人AI知识助手：<a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html">个人本地 (Llama3 8B) LLM 使用 WhatsApp + Obsidian 数据扩展 - Byte Tank</a>，和我的思路基本一致。
</p>

<p>
简单写了一个python用来直接获取高亮摘录并与本地LLM问答：<a href="https://www.vandee.art/posts/2024-07-08-omnivore-with-llm-in-python/">RSS 订阅和本地 LLM 结合的初步尝试 - 流动知识检索 | Vandee's Blog</a>
</p>

<p>
很久之前，看到一篇文章提出了一个观点：随着和LLM互动的增多，特别是现在各种LLM平台，ChatGPT、Claude、perplexity等等，查询、回顾、汇总这些问答是一个值得注意的点。
</p>

<p>
现在我的日常问答都在本地使用Open WebUI，可以导出聊天还有数据库可以直接备份，甚至还可以给对话打tag，当然也可以搜索(open webui 现在也用少了，基本都使用 gptel 在 org 文件里直接对话了)。
</p>


<figure id="orgcee0a54">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/PixPin_2024-10-09_11-05-50.png" class="img" width="50%" height="50%">

</figure>

<p>
需要联网搜索的内容现在基本在perplexity了，碰巧的是，最近搜索到了自己博客的内容🤣，纪念一下(现在能不用 AI 搜索就不用了，不想把这些没什么质变的便利建立在 AI 对互联网内容的侵略上)：
</p>


<figure id="org8992ad3">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/PixPin_2024-10-09_11-08-41.png" class="img" width="50%" height="50%">

</figure>
</div>
<div id="outline-container-orgf26e358" class="outline-4">
<h4 id="orgf26e358">Ollama</h4>
<div class="outline-text-4" id="text-orgf26e358">
<p>
<a href="https://ollama.com/">Ollama</a> 可以本地部署大语言模型，目前GitHub 69.1k star，一直在用。obsidian，Emacs，Logseq都支持。如果说Cloudflare是赛博活菩萨，那ollama就是LLM筋斗云。
</p>

<p>
ollama支持主流的开源模型如llama3，所有支持模型可查看：
</p>

<p>
<b>Model library</b> ：Ollama supports a list of models available on <a href="https://ollama.com/library">ollama.com/library</a>
</p>

<p>
相关文章：
</p>

<ul class="org-ul">
<li><a href="https://blog.inoki.cc/2024/04/16/Ollama-cn/">Ollama 架构解析 | Inoki in the world</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgf3045b9" class="outline-4">
<h4 id="orgf3045b9">Open WebUI</h4>
<div class="outline-text-4" id="text-orgf3045b9">
<p>
<a href="https://github.com/open-webui/open-webui">Open WebUI</a> 提供一个WebUI运行本地LLM，目前GitHub 31k star。良好的兼容ollama，聊天数据本地保存，可本地导入文档做RAG查询。
</p>

<p>
<a href="https://openwebui.com/#open-webui-community">社区</a>提供了插件和功能，质变的是：可以让本地LLM搜索web的内容。
</p>

<p>
Open WebUI 在2024-10-06的版本中<a href="https://github.com/open-webui/open-webui/releases/tag/v0.3.31">更新</a>了支持类似Claude artifacts的artifacts: <b>🎨 Artifacts Feature</b>: Render web content and SVGs directly in the interface, supporting quick iterations and live changes，不过只支持原生的HTML和CSS。还更新了Overview，可以在白板里展示对话的内容，太实用了，史诗级更新！
</p>


<figure id="org2680606">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/PixPin_2024-10-09_10-56-03.png" class="img" width="50%" height="50%">

</figure>


<figure id="org461cfc3">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/PixPin_2024-10-09_10-56-41.png" class="img" width="50%" height="50%">

</figure>

<p>
<b>其他主要功能</b> ：
</p>

<ul class="org-ul">
<li>📚 本地 RAG 集成：通过突破性的检索增强生成 (RAG) 支持深入探索聊天交互的未来。此功能将文档交互无缝集成到您的聊天体验中。您可以将文档直接加载到聊天中或将文件添加到文档库中，在查询之前使用 <code>#</code> 命令轻松访问它们。</li>

<li>🔍 RAG 的网络搜索：使用 <code>SearXNG</code> 、 <code>Google PSE</code> 、 <code>Brave Search</code> 、 <code>serpstack</code> 、 <code>serper</code> 、 <code>Serply</code> 、 <code>DuckDuckGo</code> 和 <code>TavilySearch</code> 并将结果直接注入您的聊天体验中。</li>

<li>🌐 网页浏览功能：使用 <code>#</code> 命令后跟 URL，将网站无缝集成到您的聊天体验中。此功能允许您将网络内容直接合并到您的对话中，从而增强交互的丰富性和深度。</li>
</ul>

<p>
<b>docker部署相当简单</b> ：
</p>

<ul class="org-ul">
<li>CLI: <code>docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main</code></li>

<li><p>
Docker compose: <a href="https://github.com/open-webui/open-webui/blob/main/docker-compose.yaml">https://github.com/open-webui/open-webui/blob/main/docker-compose.yaml</a>
</p>

<div class="org-src-container">
<pre class="src src-ymal">  services:
    ollama:
      volumes:
        - ollama:/root/.ollama
      container_name: ollama
      pull_policy: always
      tty: true
      restart: unless-stopped
      image: ollama/ollama:${OLLAMA_DOCKER_TAG-latest}

    open-webui:
      build:
        context: .
        args:
          OLLAMA_BASE_URL: '/ollama'
        dockerfile: Dockerfile
      image: ghcr.io/open-webui/open-webui:${WEBUI_DOCKER_TAG-main}
      container_name: open-webui
      volumes:
        - open-webui:/app/backend/data
      depends_on:
        - ollama
      ports:
        - ${OPEN_WEBUI_PORT-3000}:8080
      environment:
        - 'OLLAMA_BASE_URL=http://ollama:11434'
        - 'WEBUI_SECRET_KEY='
      extra_hosts:
        - host.docker.internal:host-gateway
      restart: unless-stopped

  volumes:
    ollama: {}
    open-webui: {}

</pre>
</div></li>

<li><a href="https://docs.openwebui.com/getting-started/updating"> Updating | Open WebUI</a></li>
</ul>

<p>
Ref：<a href="https://docs.openwebui.com/">Open WebUI 官方手册</a>
</p>
</div>
</div>
<div id="outline-container-org83755fd" class="outline-4">
<h4 id="org83755fd">Aider</h4>
<div class="outline-text-4" id="text-org83755fd">
<p>
<a href="https://github.com/Aider-AI/aider">Aider</a> 最近挺火的一个CLI AI助手，开源，GitHub 20.3K Star，基本可以支持市面上的所有模型。当然也支持ollama，在Emacs里有个大佬做了个<a href="https://github.com/tninja/aider.el">aider.el</a>。
</p>

<p>
可以像cursor一样有diff，修改代码，比之前看到的许多CLI AI助手（例如 <a href="https://github.com/ErikBjare/gptme">gtpme</a>、<a href="https://github.com/BuilderIO/ai-shell">ai-shell</a> 、<a href="https://github.com/cline/cline">cline</a> 、<a href="https://github.com/Doriandarko/claude-engineer">claude-enginner</a>）全面许多。
</p>

<p>
先在本机的Python环境里<a href="https://aider.chat/docs/install.html">Install aider</a>，我用的conda，在terminal里：
</p>

<div class="org-src-container">
<pre class="src src-bash">conda activate yourenv
python -m pip install -U aider-chat
</pre>
</div>

<p>
实测在doomEmacs里要使用ollama的本地模型需要这样写：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #FFA657;">use-package</span> aider
  <span style="color: #79C0FF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FFA657;">setq</span> aider-args <span style="color: #FFA657;">'</span><span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"--model"</span> <span style="color: #A1D08E;">"ollama/llama3.1"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>setenv <span style="color: #A1D08E;">"OLLAMA_API_BASE"</span> <span style="color: #A1D08E;">"http://127.0.0.1:11434"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>global-set-key <span style="color: #b0b1a3;">(</span>kbd <span style="color: #A1D08E;">"C-c a"</span><span style="color: #b0b1a3;">)</span> <span style="color: #FFA657;">'</span><span style="color: #95a99f;">aider-transient-menu</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
另外在package.el里的安装：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span>package! aider
  <span style="color: #79C0FF;">:recipe</span> <span style="color: #93a8c6;">(</span><span style="color: #79C0FF;">:host</span> github <span style="color: #79C0FF;">:repo</span> <span style="color: #A1D08E;">"tninja/aider.el"</span> <span style="color: #79C0FF;">:files</span> <span style="color: #b0b1a3;">(</span><span style="color: #A1D08E;">"aider.el"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
在Emacs里激活conda环境正常运行Aider.el。
</p>

<p>
Ref：<a href="https://emacs-china.org/t/ai-aider-emacs-aider-el/28064/15">抛砖引玉: 介绍命令行AI编程工具aider以及emacs集成aider.el - Emacs-general - Emacs China</a>
</p>

<p>
又有一个大佬制作了 <a href="https://github.com/MatthewZMD/aidermacs">aidermacs</a> ,功能更加全面。
</p>
</div>
</div>
<div id="outline-container-orgda65b58" class="outline-4">
<h4 id="orgda65b58">gptel</h4>
<div class="outline-text-4" id="text-orgda65b58">
<p>
<a href="https://github.com/karthink/gptel">gptel: A simple LLM client for Emacs</a> 是Emacs的一个包，可以在Emacs里直接和LLM对话，目前在用。
</p>


<figure id="org3d96f9d">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/ollama-emacs.gif" class="img" width="50%" height="50%">

</figure>

<p>
<b>最近更新了</b> ，可以支持直接添加文件、文本到上下文，awesome！居然还支持转换MD格式到Org？
</p>


<figure id="org2493087">
<img src="https://testingcf.jsdelivr.net/gh/vandeefeng/gitbox@main/img/gptel-summary.gif" class="img" width="50%" height="50%">

</figure>

<p>
您可以使用 gptel 的查询包含其他文本区域、缓冲区或文件。这个附加上下文是“实时”的，而不是快照。添加后，将在每次查询时扫描并包含区域、缓冲区或文件。
</p>

<p>
您可以从菜单中将选定的区域、缓冲区或文件添加到 gptel 的上下文中，或调用 <code>gptel-add</code> 。 （要添加文件，请在 Dired 中使用 <code>gptel-add</code> 或使用专用的 <code>gptel-add-file</code> 命令。）
</p>

<p>
Ref: <a href="https://github.com/karthink/gptel?tab=readme-ov-file#include-more-context-with-requests">https://github.com/karthink/gptel?tab=readme-ov-file#include-more-context-with-requests</a>
</p>


<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">To add context 添加上下文</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">gptel-add</td>
<td class="org-left">Add/remove a region or buffer to gptel’s context.  Add/remove marked files in Dired. 在 gptel 上下文中添加/删除区域或缓冲区。在 Dired 中添加/删除标记的文件。</td>
</tr>

<tr>
<td class="org-left">gptel-add-file</td>
<td class="org-left">Add a (text-readable) file to gptel’s context.  Also available from the transient menu. 将（文本可读）文件添加到 gptel 的上下文中。也可以从瞬态菜单中获得。</td>
</tr>
</tbody>
</table>



<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #787878;">;; </span><span style="color: #787878;">&#22522;&#26412;&#37197;&#32622;
</span><span style="color: #8c8c8c;">(</span>use-package! gptel
 <span style="color: #79C0FF;">:config</span>
 <span style="color: #93a8c6;">(</span>setq! gptel-api-key <span style="color: #A1D08E;">"your key"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>


<span style="color: #787878;">;; </span><span style="color: #787878;">or
</span><span style="color: #787878;">;; </span><span style="color: #787878;">:key can be a function that returns the API key.
</span><span style="color: #8c8c8c;">(</span>gptel-make-gemini <span style="color: #A1D08E;">"Gemini"</span> <span style="color: #79C0FF;">:key</span> <span style="color: #A1D08E;">"YOUR_GEMINI_API_KEY"</span> <span style="color: #79C0FF;">:stream</span> t<span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">or
</span><span style="color: #787878;">;; </span><span style="color: #787878;">Perplexity offers an OpenAI compatible API
</span><span style="color: #8c8c8c;">(</span>gptel-make-openai <span style="color: #A1D08E;">"Perplexity"</span>         <span style="color: #787878;">;</span><span style="color: #787878;">Any name you want
</span>  <span style="color: #79C0FF;">:host</span> <span style="color: #A1D08E;">"api.perplexity.ai"</span>
  <span style="color: #79C0FF;">:key</span> <span style="color: #A1D08E;">"your-api-key"</span>                   <span style="color: #787878;">;</span><span style="color: #787878;">can be a function that returns the key
</span>  <span style="color: #79C0FF;">:endpoint</span> <span style="color: #A1D08E;">"/chat/completions"</span>
  <span style="color: #79C0FF;">:stream</span> t
  <span style="color: #79C0FF;">:models</span> <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span><span style="color: #787878;">;; </span><span style="color: #787878;">has many more, check perplexity.ai
</span>            <span style="color: #A1D08E;">"pplx-7b-chat"</span>
            <span style="color: #A1D08E;">"pplx-70b-chat"</span>
            <span style="color: #A1D08E;">"pplx-7b-online"</span>
            <span style="color: #A1D08E;">"pplx-70b-online"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #787878;">;; </span><span style="color: #787878;">or
</span><span style="color: #787878;">;; </span><span style="color: #787878;">Ollama
</span><span style="color: #8c8c8c;">(</span>gptel-make-ollama <span style="color: #A1D08E;">"Ollama"</span>             <span style="color: #787878;">;</span><span style="color: #787878;">Any name of your choosing
</span>  <span style="color: #79C0FF;">:host</span> <span style="color: #A1D08E;">"localhost:11434"</span>               <span style="color: #787878;">;</span><span style="color: #787878;">Where it's running
</span>  <span style="color: #79C0FF;">:stream</span> t                             <span style="color: #787878;">;</span><span style="color: #787878;">Stream responses
</span>  <span style="color: #79C0FF;">:models</span> <span style="color: #FFA657;">'</span><span style="color: #93a8c6;">(</span><span style="color: #A1D08E;">"mistral:latest"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>          <span style="color: #787878;">;</span><span style="color: #787878;">List of models</span>
</pre>
</div>

<p>
gptel 现在支持自己设计 tool，也支持 MCP 了。
</p>

<p>
tool 和 function calling 的设置可以参考：<a href="https://github.com/karthink/gptel/issues/514">https://github.com/karthink/gptel/issues/514</a>
</p>

<p>
MCP 需要安装 <a href="https://github.com/lizqwerscott/mcp.el">lizqwerscott/mcp.el: An Mcp client inside Emacs</a> 。但是 mcp.el Need Emacs 30 or higher version。
</p>
</div>
</div>
<div id="outline-container-org57f86d6" class="outline-4">
<h4 id="org57f86d6">Kotaemon</h4>
<div class="outline-text-4" id="text-org57f86d6">
<p>
从发现到现在差不多就一个多星期，GitHub直接飙升到10.9K star，win、mac、Linux都支持。边用边学习它的RAG构建框架，支持ollama，支持docker。
</p>

<p>
GitHub: <a href="https://github.com/Cinnamon/kotaemon">https://github.com/Cinnamon/kotaemon</a>
</p>

<p>
Hugging Face 在线体验: <a href="https://huggingface.co/spaces/cin-model/kotaemon-demo">https://huggingface.co/spaces/cin-model/kotaemon-demo</a>
</p>

<p>
官方介绍：
</p>

<p>
This project serves as a functional RAG UI for both end users who want to do QA on their documents and developers who want to build their own RAG pipeline.
</p>

<ul class="org-ul">
<li>For end users:
<ul class="org-ul">
<li>A clean &amp; minimalistic UI for RAG-based QA.</li>
<li>Supports LLM API providers (OpenAI, AzureOpenAI, Cohere, etc) and local LLMs (via <code>ollama</code> and ~llama-cpp-python`).</li>
<li>Easy installation scripts.</li>
</ul></li>
<li>For developers:
<ul class="org-ul">
<li>A framework for building your own RAG-based document QA pipeline.</li>
<li>Customize and see your RAG pipeline in action with the provided UI (built with <a href="https://github.com/gradio-app/gradio">Gradio</a>).</li>
<li>If you use Gradio for development, check out our theme here: <a href="https://github.com/lone17/kotaemon-gradio-theme">kotaemon-gradio-theme</a>.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb22b339" class="outline-4">
<h4 id="orgb22b339">Chipper</h4>
<div class="outline-text-4" id="text-orgb22b339">
<p>
Github: <a href="https://github.com/TilmanGriesel/chipper">https://github.com/TilmanGriesel/chipper</a>
</p>

<p>
其实很早就关注了这个项目，但是一直没有尝试。这个项目基于 Elasticsearch 来实现文档搜索和 RAG。LLM 的提供支持 ollama 和 huggingface。提供脚本一键 docker 部署很方便。
</p>

<p>
我看重的功能是：它可以提供一个 ollama 的代理。也就是使用这个项目的 ollama 代理之后，就可以直接调用项目的文档 RAG 了，而这个项目管理文档 RAG 很方便。这样就可以把它当作是一个文档搜索引擎了。
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdb81b52" class="outline-2">
<h2 id="orgdb81b52">ChangeLog</h2>
<div class="outline-text-2" id="text-orgdb81b52">
<ul class="org-ul">
<li><p>
2024-09-13: 校对文档。在使用了Nvim做MD笔记一个月之后，还是割舍不了org-mode的编辑体验，还有agenda。lisp的可玩性比lua还是高一些，比如<a href="https://github.com/jwiegley/dot-emacs/blob/master/lisp/org-roam-logseq.el">dot-emacs/lisp/org-roam-logseq.el at master · jwiegley/dot-emacs</a>这是一个把org-roam和Logseq联用的el。
</p>

<p>
<a href="https://nicholas.carlini.com/writing/2024/how-i-use-ai.html">How I Use "AI"</a> 许多远古大佬还是在用Emacs，这点就足够我继续探索lisp的语言哲学了。<a href="https://x.com/oran_ge/status/1834253705149133225">orange.ai on X: "采访《汉语新解》作者李继刚：为什么会用 Lisp？ </a>,最近大火的汉语新解的prompt就是lisp语法写的。
</p></li>

<li><p>
2024-10-09：更新了输入法设置，加入sis的配置方案。Open WebUI最近<a href="https://github.com/open-webui/open-webui/releases/tag/v0.3.31">更新</a>了，支持类似Claude artifacts的artifacts: <b>🎨 Artifacts Feature</b>: Render web content and SVGs directly in the interface, supporting quick iterations and live changes.
</p>

<p>
还有一大堆新更新。
</p></li>

<li>2024-10-13: 增加了 Aider (一个CLI AI编程助手)在 Emacs 里的安装。最近开源的从代码到部署的 <a href="https://github.com/stackblitz/bolt.new">bolt.new</a>  也很强，还有 Pythagora 的 <a href="https://github.com/Pythagora-io/gpt-pilot">gpt-pilot</a>， AI 辅助编程的项目越来越多了，感谢 cursor 带来了这么多的竞争者。</li>
<li>2024-10-24: 将 MD 文档转换成 org 文档的校对，删除了部分不必要的介绍。</li>
<li>2024-11-12: 从 DoomEmacs 转向原生 Emacs 自己<a href="https://github.com/VandeeFeng/emacs.d">配置</a>。</li>
<li>2025-02-09: 增加 chipper。</li>
<li>2025-02-13：增加 aidermacs.</li>
<li>2025-05-11: 增加 org-supertag, org-node.</li>
<li>2025-06-28: 增加 denote。</li>
<li>2025-11-15：增加 org-hover</li>
<li>2025-11-16: 增加双链的介绍，把 org-hover 加进去了。更新网页摘录和 after-reading</li>
</ul>
</div>
</div>
<div id="outline-container-org689fb5a" class="outline-2">
<h2 id="org689fb5a">Thanks</h2>
<div class="outline-text-2" id="text-org689fb5a">
<p>
这个手册会持续更新，如果对你有所帮助，我会很开心。
</p>

<p>
另见：
</p>

<ul class="org-ul">
<li><a href="https://www.vandee.art/blog/2025-12-01-my-emacs-keybindings.html">我的 Emacs 键位设置</a></li>
<li><a href="https://www.vandee.art/blog/2024-08-02-nvim-pkm-manual.html">PKM（个人知识管理）构建手册 - Nvim</a></li>
<li><a href="https://www.vandee.art/blog/2025-08-02-pkm-manual-combined-ai.html">PKM（个人知识管理）构建手册 - with AI</a></li>
</ul>

<p>
这里是我日常使用的实用小工具： <a href="https://www.vandee.art/blog/2024-07-26-useful-tools-recommended.html">实用小玩意收集</a>
</p>

<p>
Imagining and creating！
</p>
</div>
</div>
<div class="taglist"><a href="https://www.vandee.art/blog/tags.html">Tags</a>: <a href="https://www.vandee.art/blog/tag-pkm.html">PKM</a> <a href="https://www.vandee.art/blog/tag-emacs.html">Emacs</a> </div></div>
<div id="postamble" class="status"><div id="search-results"></div>
      <footer>
         <p>
            © 2022-<script>document.write(new Date().getFullYear())</script> Vandee. All rights reserved.
         </p>
        <div class="social-links"></div>
      </footer>

      <a href="#top" aria-label="go to top" title="Go to Top (Alt + G)"
         class="top-link" id="top-link" accesskey="g">
         <i class="ri-arrow-up-double-line ri-3x"></i>
      </a>

      <script>
        var mybutton = document.getElementById('top-link');
        window.onscroll = function () {
            if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
                mybutton.style.visibility = 'visible';
                mybutton.style.opacity = '1';
            } else {
                mybutton.style.visibility = 'hidden';
                mybutton.style.opacity = '0';
            }
        };
      </script></div>
</body>
</html>
