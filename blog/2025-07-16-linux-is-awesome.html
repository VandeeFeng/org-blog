<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="AI 现在的发展趋势，更多的是资本的裹挟。它直接导致，如果不接入它，就会被市场淘汰。所以操作系统整合 AI 这个趋势，我很理解，如果以后它们单独推出不绑定 AI 的操作系统版本，我还是有可能会继续用。但是如果你把这些强行让消费者来买单，不给消费者选择，这是我反感的。PC 这个产品，或者说操作系统压根就和 AI 没有半毛钱必然的关系啊，为啥我要使用 PC 就一定要用 AI？这就好像我只是想骑自行车，但是必须要带上一个一直会在旁边 BB 的导航一样，我不需要给资本的这些运作买单。">
    <link rel="alternate"
          type="application/rss+xml"
          href="https://www.vandee.art/blog/rss.xml"
          title="RSS feed for https://www.vandee.art/blog/">
    <title>Linux 太自由了</title>
    <meta property="og:title" content="Linux 太自由了">
    <meta property="og:type" content="article" />
    <meta property="og:description" content="AI 现在的发展趋势，更多的是资本的裹挟。它直接导致，如果不接入它，就会被市场淘汰。所以操作系统整合 AI 这个趋势，我很理解，如果以后它们单独推出不绑定 AI 的操作系统版本，我还是有可能会继续用。但是如果你把这些强行让消费者来买单，不给消费者选择，这是我反感的。PC 这个产品，或者说操作系统压根就和 AI 没有半毛钱必然的关系啊，为啥我要使用 PC 就一定要用 AI？这就好像我只是想骑自行车，但是必须要带上一个一直会在旁边 BB 的导航一样，我不需要给资本的这些运作买单。">
    <meta property="og:url" content="https://www.vandee.art/blog/2025-07-16-linux-is-awesome.html">
    <meta name="author" content="Vandee">
    <meta name="referrer" content="origin-when-cross-origin">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="assets/css/blog-style.css" type="text/css"/>
    <link rel="stylesheet"
          href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css"/>
    <link rel="stylesheet"
          href="https://testingcf.jsdelivr.net/npm/@fancyapps/ui@4.0.12/dist/fancybox.css"/>
    <link rel="icon" type="image/x-icon" href="/favicon.ico"/>

    <script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js" defer></script>
    <script src="https://testingcf.jsdelivr.net/npm/@fancyapps/ui@4.0.12/dist/fancybox.umd.js" defer></script>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js" defer></script>
    <script defer>
      document.addEventListener("DOMContentLoaded", function () {
        pangu.spacingPage();
      });
    </script>

    <script src="assets/js/app.js" defer></script>
    <script src="assets/js/copyCode.js" defer></script>
    <script src="assets/js/shiba.js" defer></script>
    <script src="assets/js/search.js" defer></script></head>
  <body>
    <div id="preamble" class="status">
      <header>
        <h1><a href="https://www.vandee.art/blog/">Vandee's Blog</a></h1>
        <img class="shiba" width="100px" src="assets/shiba_gif/shiba_idle_8fps.gif">
        <nav>
          <a href="https://www.vandee.art/blog/">Home</a>
          <a href="https://x404.xyz/wiki">Wiki</a>
          <a href="https://x404.xyz/photo">Photo</a>
          <a href="archive.html">Archive</a>
          <a href="tags.html">Tags</a>
          <div id="search-container">
            <input type="text" id="search-input" placeholder="e.g. Emacs PKM...">
            <i class="fas fa-search search-icon"></i>
          </div>
        </nav>
    </header></div>
    <div id="content">
      <div class="post-date">16 Jul 2025</div><h1 class="post-title"><a href="https://www.vandee.art/blog/2025-07-16-linux-is-awesome.html">Linux 太自由了</a></h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li><a href="#org183e383">TL;DR</a></li>
            <li><a href="#org4761ba1">“不可避免的 AI”</a></li>
            <li><a href="#orgc63e529">Arch Linux 配置记录</a>
              <ul>
                <li><a href="#orgbf36d05">脚本</a></li>
                <li><a href="#org7ecc1a6">dotfiles</a></li>
                <li><a href="#org4573c4e">桌面环境和窗口管理</a></li>
                <li><a href="#orgef8bdb6">Tips</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <div id="outline-container-org183e383" class="outline-2">
        <h2 id="org183e383">TL;DR</h2>
        <div class="outline-text-2" id="text-org183e383">
          <p>
            Linux 就是我从现在开始会一直使用下去的操作系统。它的太多设计理念和我不谋而合，Linus 有太多理念和我不谋而合。
          </p>
        </div>
      </div>
      <div id="outline-container-org4761ba1" class="outline-2">
        <h2 id="org4761ba1">“不可避免的 AI”</h2>
        <div class="outline-text-2" id="text-org4761ba1">
          <p>
            从接触到个人电脑 PC 这个概念开始，就一直用的 Windows，直到很晚才开始使用 Mac，最初的原因也只是需要处理摄影的照片，Mac 的 M 芯片在刚出来的时候就是王炸。
          </p>

          <p>
            之前我对操作系统一直没有什么概念，用着顺手，系统 UI 看着舒服就好了，对 PC 和操作系统也没有什么特殊的情怀和偏爱。但近几年，Windows 首先开始把 AI 功能整合到操作系统默认的系统服务里，这种趋势是我很反感的。要是很有用也就算了，隐私问题就更得不到保证，现在 Apple 也开始了。作为一个普通的消费者，如果产品里没有我可以选择的需求，不用就好了。
          </p>

          <p>
            AI 现在的发展趋势，更多的是资本的裹挟。它直接导致，如果不接入它，就会被市场淘汰。所以操作系统整合 AI 这个趋势，我很理解，如果以后它们单独推出不绑定 AI 的操作系统版本，我还是有可能会继续用。但是如果你把这些强行让消费者来买单，不给消费者选择，这是我反感的。PC 这个产品，或者说操作系统压根就和 AI 没有半毛钱必然的关系啊，为啥我要使用 PC 就一定要用 AI？这就好像我只是想骑自行车，但是必须要带上一个一直会在旁边 BB 的导航一样，我不需要给资本的这些运作买单。几个巨头，大佬发发推，搞搞发布会，融融资，AI 就成了必然和必须，所谓的 AI 革命就开始了。AI 现在的形态最多只是一种更智能的自动化实现，距离真正的人工智能还有很远。
          </p>

          <p>
            互联网发展到现在已经成为了一个普惠的基础服务设施，但 AI 现在还不是，对 AI 过度鼓吹的那些布道者所宣称的普惠性，到现在我还没有真正体会到。它们正在把 token 变成现在的网络流量一样，网络流量的付费那是基础服务设施的付费，AI 现在的 token 付费完全还只是产品的付费。工业革命不管怎么样，是完全把人类社会的生产力提高了一个层次，机器替代了许多重复性的人工劳动实现了自动化，AI 革命距离它提高生产力还有太远，现在还只是资本游戏的开头。解决不了能源问题，以 AI 现在的耗电量，我都怕撑不到 AI 革命正式开始的那一天。
          </p>

          <p>
            <a href="https://tomrenner.com/posts/llm-inevitabilism/">The sound of inevitability</a> 这个文章的观点挺好：
          </p>

          <blockquote>
            <p>
              People advancing an inevitabilist world view state that the future they perceive will inevitably come to pass. It follows, relatively straightforwardly, that the only sensible way to respond to this is to prepare as best you can for that future.
            </p>

            <p>
              持有不可避免主义世界观的人声称他们所感知的未来将不可避免地到来。相对简单地说，回应这一点的唯一明智方式就是尽可能为那个未来做好准备。
            </p>

            <p>
              This is a fantastic framing method. Anyone who sees the future differently to you can be brushed aside as “ignoring reality”, and the only conversations worth engaging are those that already accept your premise.
            </p>

            <p>
              这是一种绝妙的框架方法。任何与您看待未来不同的人都可以被视为“忽视现实”，而唯一值得参与的对话是那些已经接受您前提的对话。
            </p>

            <p>
              I’m not convinced that LLMs are the future. I’m certainly not convinced that they’re the future I want. But what I’m most certain of is that we have choices about what our future should look like, and how we choose to use machines to build it.
            </p>

            <p>
              我并不相信大型语言模型是未来。我当然不相信它们是我想要的未来。但我最确定的是，我们对未来应该是什么样子有选择权，以及我们选择如何使用机器来构建它。
            </p>
          </blockquote>

          <p>
            今年一直在看 C 语言，体验 C 语言最合适的操作系统当然就是 Linux 了。在虚拟机里许多底层的实验操作起来不是很方便，正好还有一个很老的电脑已经不能装 Win10 了，最开始是抱着试一试的想法，安装了 Arch Linux，没想到使用体验实在是太好了，一点不卡。选 Arch Linux 是因为它的 wiki 做的太好了，对于新手很友好，Arch 的自由度也很高。
          </p>

          <p>
            再加上，Emacs 在 Linux 里才是满血的，现在所有的 workflow，除了 PS 处理照片和 ollama 的本地模型之外，都迁移到了这个老电脑 Arch Linux。
          </p>

          <p>
            Mac 里的 Emacsclient 一直感觉怪怪的，在 Linux 里体验就很顺畅，打开 Emacsclient 也是秒开，和 Nvim 打开的速度一样快。
          </p>

          <p>
            如果说上面的这些是让我开始使用 Linux 的诱因，那么 Linus 和 <a href="https://wiki.vandee.art/#%E3%80%8AJust%20For%20Fun%E3%80%8B">《Just For Fun》</a> 这本书，就是让我会一直使用 Linux 的原因。Linus 开源 Linux 的这个决定实在是太伟大了。Linus 对于他实现的许多我看来很了不起的事情，只是很谦虚的表示：他在当时完全没有想到后面的事情，只是觉得自己对这些很感兴趣就做了，从结果来看就是自己一次次的走在了自己的前面。
          </p>

          <p>
            Linux 这种自由的感觉很舒服。
          </p>
        </div>
      </div>
      <div id="outline-container-orgc63e529" class="outline-2">
        <h2 id="orgc63e529">Arch Linux 配置记录</h2>
        <div class="outline-text-2" id="text-orgc63e529">
          <p>
            简单记录一下从 Mac 迁移到 Arch Linux 的配置。
          </p>
        </div>
        <div id="outline-container-orgbf36d05" class="outline-3">
          <h3 id="orgbf36d05">脚本</h3>
          <div class="outline-text-3" id="text-orgbf36d05">
            <p>
              让 LLM 随便弄了一个 Linux 的初始化脚本，安装一些我需要的软件和配置。
            </p>

            <div class="org-src-container">
              <pre class="src src-bash">
                <span style="color: #787878;">#</span><span style="color: #787878;">!/bin/bash
                </span>
                <span style="color: #787878;"># </span><span style="color: #787878;">Exit immediately if a command exits with a non-zero status.
                </span><span style="color: #79C0FF;">set</span> -e

                <span style="color: #787878;"># </span><span style="color: #787878;">Check if the script is run as root
                </span><span style="color: #FFA657;">if</span> <span style="color: #8c8c8c;">[</span> <span style="color: #A1D08E;">"$(</span><span style="color: #ff4f58;">id -u</span><span style="color: #A1D08E;">)"</span> -ne 0 <span style="color: #8c8c8c;">]</span>; <span style="color: #FFA657;">then</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"This script must be run as root"</span> &gt;&amp;2
                <span style="color: #FFA657;">exit</span> 1
                <span style="color: #FFA657;">fi</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">--- Package Lists ---
                </span><span style="color: #f4f4ff;">BASE_PACKAGES</span>=<span style="color: #A1D08E;">"git curl neovim emacs vim feh mpv docker opensnitch"</span>
                <span style="color: #f4f4ff;">FCITX5_PACKAGES_ARCH</span>=<span style="color: #A1D08E;">"fcitx5 fcitx5-rime fcitx5-chinese-addons fcitx5-configtool"</span>
                <span style="color: #f4f4ff;">FCITX5_PACKAGES_UBUNTU</span>=<span style="color: #A1D08E;">"fcitx5 fcitx5-rime fcitx5-chinese-addons fcitx5-config-qt"</span>
                <span style="color: #f4f4ff;">FCITX5_PACKAGES_FEDORA</span>=<span style="color: #A1D08E;">"fcitx5 fcitx5-rime fcitx5-chinese-addons fcitx5-configtool"</span>
                <span style="color: #f4f4ff;">FCITX5_PACKAGES_SUSE</span>=<span style="color: #A1D08E;">"fcitx5 fcitx5-rime fcitx5-chinese-addons fcitx5-configtool"</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Function to install packages on Arch Linux
                </span><span style="color: #96a6c8;">install_arch</span><span style="color: #8c8c8c;">()</span> <span style="color: #8c8c8c;">{</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Updating system..."</span>
                pacman -Syu --noconfirm --needed
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Installing packages for Arch..."</span>
                <span style="color: #FFA657;">for</span> pkg<span style="color: #FFA657;"> in</span> $<span style="color: #f4f4ff;">BASE_PACKAGES</span> $<span style="color: #f4f4ff;">FCITX5_PACKAGES_ARCH</span> base-devel; <span style="color: #FFA657;">do</span>
                pacman -S --noconfirm --needed <span style="color: #A1D08E;">"$pkg"</span> || <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Skipping '$pkg': not found or error."</span>
                <span style="color: #FFA657;">done</span>
                <span style="color: #8c8c8c;">}</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Function to install packages on Ubuntu/Debian
                </span><span style="color: #96a6c8;">install_ubuntu</span><span style="color: #8c8c8c;">()</span> <span style="color: #8c8c8c;">{</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Updating system..."</span>
                apt-get update
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Installing packages for Debian/Ubuntu..."</span>
                apt-get install -y --ignore-missing $<span style="color: #f4f4ff;">BASE_PACKAGES</span> $<span style="color: #f4f4ff;">FCITX5_PACKAGES_UBUNTU</span> docker.io build-essential
                <span style="color: #8c8c8c;">}</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Function to install packages on Fedora
                </span><span style="color: #96a6c8;">install_fedora</span><span style="color: #8c8c8c;">()</span> <span style="color: #8c8c8c;">{</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Installing packages for Fedora..."</span>
                <span style="color: #FFA657;">for</span> pkg<span style="color: #FFA657;"> in</span> $<span style="color: #f4f4ff;">BASE_PACKAGES</span> $<span style="color: #f4f4ff;">FCITX5_PACKAGES_FEDORA</span>; <span style="color: #FFA657;">do</span>
                dnf -y install <span style="color: #A1D08E;">"$pkg"</span> || <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Skipping '$pkg': not found or error."</span>
                <span style="color: #FFA657;">done</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Installing development tools for Fedora..."</span>
                dnf -y groupinstall <span style="color: #A1D08E;">"C Development Tools and Libraries"</span> || <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Skipping 'C Development Tools and Libraries' group: not found or error."</span>
                <span style="color: #8c8c8c;">}</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Function to install packages on OpenSUSE
                </span><span style="color: #96a6c8;">install_opensuse</span><span style="color: #8c8c8c;">()</span> <span style="color: #8c8c8c;">{</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Installing packages for OpenSUSE..."</span>
                <span style="color: #FFA657;">for</span> pkg<span style="color: #FFA657;"> in</span> $<span style="color: #f4f4ff;">BASE_PACKAGES</span> $<span style="color: #f4f4ff;">FCITX5_PACKAGES_SUSE</span>; <span style="color: #FFA657;">do</span>
                zypper install -y <span style="color: #A1D08E;">"$pkg"</span> || <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Skipping '$pkg': not found or error."</span>
                <span style="color: #FFA657;">done</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Installing development tools for OpenSUSE..."</span>
                zypper install -y -t pattern devel_basis || <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Skipping 'devel_basis' pattern: not found or error."</span>
                <span style="color: #8c8c8c;">}</span>


                <span style="color: #787878;"># </span><span style="color: #787878;">Detect the distribution by checking for the package manager
                </span><span style="color: #FFA657;">if </span><span style="color: #79C0FF;">command</span> -v pacman &amp;&gt; /dev/null; <span style="color: #FFA657;">then</span>
                install_arch
                <span style="color: #FFA657;">elif </span><span style="color: #79C0FF;">command</span> -v apt-get &amp;&gt; /dev/null; <span style="color: #FFA657;">then</span>
                install_ubuntu
                <span style="color: #FFA657;">elif </span><span style="color: #79C0FF;">command</span> -v dnf &amp;&gt; /dev/null; <span style="color: #FFA657;">then</span>
                install_fedora
                <span style="color: #FFA657;">elif </span><span style="color: #79C0FF;">command</span> -v zypper &amp;&gt; /dev/null; <span style="color: #FFA657;">then</span>
                install_opensuse
                <span style="color: #FFA657;">else</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Could not detect a supported package manager (pacman, apt, dnf, zypper)."</span>
                <span style="color: #FFA657;">exit</span> 1
                <span style="color: #FFA657;">fi</span>

                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Basic packages installation complete."</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Setting up Fcitx5 environment variables..."</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Create environment file for Fcitx5
                </span>mkdir -p /etc/environment.d
                cat &gt; /etc/environment.d/90-fcitx5.conf &lt;&lt; EOL<span style="color: #ffff00; font-weight: bold;">
                  QT_IM_MODULE=fcitx
                  XMODIFIERS=@im=fcitx
                  EOL
                </span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Starting Rime configuration..."</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Run the Rime configuration as the user who invoked sudo
                </span><span style="color: #FFA657;">if</span> <span style="color: #8c8c8c;">[</span> -n <span style="color: #A1D08E;">"$SUDO_USER"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FFA657;">then</span>
                sudo -u <span style="color: #A1D08E;">"$SUDO_USER"</span> bash -c <span style="color: #A1D08E;">'
                  echo "Cloning plum repository..."
                  if [ -d "$HOME/plum" ]; then
                  echo "$HOME/plum already exists. Skipping clone."
                  else
                  git clone --depth 1 https://github.com/rime/plum "$HOME/plum"
                  fi

                  echo "Changing to plum directory..."
                  cd "$HOME/plum"

                  echo "Installing rime-ice..."
                  rime_frontend=fcitx5-rime bash rime-install iDvel/rime-ice:others/recipes/full
                  '</span>
                <span style="color: #FFA657;">else</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Could not determine the user to install Rime for."</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Please run the following commands manually as a regular user:"</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"git clone --depth 1 https://github.com/rime/plum ~/plum"</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"cd ~/plum"</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"rime_frontend=fcitx5-rime bash rime-install iDvel/rime-ice:others/recipes/full"</span>
                <span style="color: #FFA657;">fi</span>


                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Installation and setup complete."</span>
                <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"Please reboot your system for all changes to take effect."</span>
              </pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org7ecc1a6" class="outline-3">
          <h3 id="org7ecc1a6">dotfiles</h3>
          <div class="outline-text-3" id="text-org7ecc1a6">
            <p>
              bash，tmux，Emacs，Nvim，还有其他的配置一直用 GitHub 在同步，迁移起来也很顺畅。
            </p>

            <p>
              Mac 和 Linux 在文件路径上基本是一致的，需要改的也很少。我也没有啥复杂的开发环境。。。
            </p>
          </div>
        </div>
        <div id="outline-container-org4573c4e" class="outline-3">
          <h3 id="org4573c4e">桌面环境和窗口管理</h3>
          <div class="outline-text-3" id="text-org4573c4e">
            <p>
              KDE 的 Plasma 太重了，许多功能我也不需要。在 Arch Linux 里，发现 hyprland 自由度很高，就选择了这个。
            </p>

            <p>
              Gnome 不太喜欢，之前在虚拟机里一直用的 Ubuntu 就是 Gnome，整个的设计和操作逻辑都不太喜欢。看起来和 MacOS 挺像，但是用起来我感觉挺不顺手，而且 Mac 的 Dock 栏我一直不太喜欢。
            </p>

            <p>
              一直使用的是堆叠式的窗口管理，现在换到了 hyprland 的平铺式，才发现我更喜欢平铺式，特别是在大屏幕上，体验太好了。在 hyprland 里配置快捷键和启动项很方便，在绑定了快捷键之后，可以全键盘操作切换窗口和 Workspace。
            </p>

            <p>
              登录还是使用的 KDE SDDM。
            </p>

            <p>
              弄了一个小脚本用来把当前窗口隐藏到 hyprland 的 special Workspace，我感觉很实用：
            </p>

            <div class="org-src-container">
              <pre class="src src-bash">
                <span style="color: #787878;">#</span><span style="color: #787878;">!/bin/bash
                </span>
                <span style="color: #787878;"># </span><span style="color: #787878;">Directory to store the original workspace ID of the window
                </span><span style="color: #f4f4ff;">STATE_DIR</span>=<span style="color: #A1D08E;">"/tmp/hypr-special-state"</span>
                mkdir -p <span style="color: #A1D08E;">"$STATE_DIR"</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Get active window info as JSON
                </span><span style="color: #f4f4ff;">active_window_json</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #ff4f58;">/usr/bin/hyprctl activewindow -j</span><span style="color: #8c8c8c;">)</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Extract address and workspace info
                </span><span style="color: #f4f4ff;">window_address</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #ff4f58;">echo "$active_window_json" | /usr/bin/jq -r '.address'</span><span style="color: #8c8c8c;">)</span>
                <span style="color: #f4f4ff;">workspace_id</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #ff4f58;">echo "$active_window_json" | /usr/bin/jq -r '.workspace.id'</span><span style="color: #8c8c8c;">)</span>
                <span style="color: #f4f4ff;">workspace_name</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #ff4f58;">echo "$active_window_json" | /usr/bin/jq -r '.workspace.name'</span><span style="color: #8c8c8c;">)</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Exit if no active window is found
                </span><span style="color: #FFA657;">if</span> <span style="color: #8c8c8c;">[</span> -z <span style="color: #A1D08E;">"$window_address"</span> <span style="color: #8c8c8c;">]</span> || <span style="color: #8c8c8c;">[</span> <span style="color: #A1D08E;">"$window_address"</span> == <span style="color: #A1D08E;">"null"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FFA657;">then</span>
                <span style="color: #FFA657;">exit</span> 0
                <span style="color: #FFA657;">fi</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Path to the state file for the current window
                </span><span style="color: #f4f4ff;">STATE_FILE</span>=<span style="color: #A1D08E;">"$STATE_DIR/$window_address"</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Check if the window is in the special workspace
                </span><span style="color: #FFA657;">if</span> <span style="color: #8c8c8c;">[</span><span style="color: #93a8c6;">[</span> <span style="color: #A1D08E;">"$workspace_name"</span> == <span style="color: #A1D08E;">"special"</span>* <span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">]</span>; <span style="color: #FFA657;">then</span>
                <span style="color: #787878;"># </span><span style="color: #787878;">Window is in a special workspace, move it back to its original workspace
                </span>    <span style="color: #FFA657;">if</span> <span style="color: #8c8c8c;">[</span> -f <span style="color: #A1D08E;">"$STATE_FILE"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FFA657;">then</span>
                <span style="color: #f4f4ff;">target_workspace</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #ff4f58;">cat "$STATE_FILE"</span><span style="color: #8c8c8c;">)</span>
                rm <span style="color: #A1D08E;">"$STATE_FILE"</span> <span style="color: #787878;"># </span><span style="color: #787878;">Clean up the state file
                </span>    <span style="color: #FFA657;">else</span>
                <span style="color: #787878;"># </span><span style="color: #787878;">Fallback: if no state file is found, move to the first available regular workspace
                </span>        <span style="color: #f4f4ff;">target_workspace</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #ff4f58;">/usr/bin/hyprctl workspaces -j | /usr/bin/jq -r '.[] | select(.id &gt;= 1</span><span style="color: #A1D08E;">) | .id'</span> | head -n 1<span style="color: #8c8c8c;">)</span>
                <span style="color: #787878;"># </span><span style="color: #787878;">Default to workspace 1 if no other regular workspace is found
                </span>        <span style="color: #FFA657;">if</span> <span style="color: #8c8c8c;">[</span> -z <span style="color: #A1D08E;">"$target_workspace"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FFA657;">then</span>
                <span style="color: #f4f4ff;">target_workspace</span>=1
                <span style="color: #FFA657;">fi</span>
                <span style="color: #FFA657;">fi</span>

                <span style="color: #787878;"># </span><span style="color: #787878;">Move the specific window to the target workspace
                </span>    /usr/bin/hyprctl dispatch movetoworkspace <span style="color: #A1D08E;">"$target_workspace,address:$window_address"</span>
                <span style="color: #FFA657;">else</span>
                <span style="color: #787878;"># </span><span style="color: #787878;">Window is not in a special workspace, so move it there and save its current workspace
                </span>    <span style="color: #79C0FF;">echo</span> <span style="color: #A1D08E;">"$workspace_id"</span> &gt; <span style="color: #A1D08E;">"$STATE_FILE"</span>
                /usr/bin/hyprctl dispatch movetoworkspacesilent <span style="color: #A1D08E;">"special,address:$window_address"</span>
                <span style="color: #FFA657;">fi</span>
              </pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgef8bdb6" class="outline-3">
          <h3 id="orgef8bdb6">Tips</h3>
          <div class="outline-text-3" id="text-orgef8bdb6">
            <p>
              在国内，安装 Linux 遇到的最大的问题应该就是网络问题了。
            </p>

            <p>
              在没有安装桌面环境之前，只有命令行，配置代理很不方便。Arch 是可以在安装之前选择国内的镜像的，但是涉及到需要使用 GitHub 和 yay 的包，就不行了。
            </p>

            <p>
              好在可以直接在 Arch 里， <code>sudo pacman -S v2ray</code> ，然后把代理的 config.json 用 U 盘挂载，导入进来就好了。
            </p>
          </div>
        </div>
      </div>
      <div class="taglist"><a href="https://www.vandee.art/blog/tags.html">Tags</a>: <a href="https://www.vandee.art/blog/tag-linux.html">Linux</a> <a href="https://www.vandee.art/blog/tag-ramble.html">Ramble</a> </div></div>
    <div id="postamble" class="status"><div id="search-results"></div>
      <footer>
        <p>
          © 2022-<script>document.write(new Date().getFullYear())</script> Vandee. All rights reserved.
        </p>
        <div class="social-links"></div>
      </footer>

      <a href="#top" aria-label="go to top" title="Go to Top (Alt + G)"
         class="top-link" id="top-link" accesskey="g">
        <i class="fa-solid fa-angle-up fa-2xl"></i>
      </a>

      <script>
        var mybutton = document.getElementById('top-link');
        window.onscroll = function () {
          if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = 'visible';
            mybutton.style.opacity = '1';
          } else {
            mybutton.style.visibility = 'hidden';
            mybutton.style.opacity = '0';
          }
        };
    </script></div>
  </body>
</html>
